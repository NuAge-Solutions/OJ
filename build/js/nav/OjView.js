OJ.importJs("oj.components.OjComponent");OJ.importJs("oj.components.OjOverlay");OJ.importCss("oj.nav.OjView");"use strict";OJ.extendComponent("OjView",[OjComponent],{_props_:{controller:null,footer:null,header:null,icon:null,shortTitle:null,stack:null,title:null},_get_props_:{actionView:null,cancelView:null,titleView:null},_loading_msg:"Loading",_template:"oj.nav.OjView",_loaded:false,_unloading_msg:"UnLoading",_constructor:function(){this._super(OjComponent,"_constructor",[]);this._load_checkpoints={};this._unload_checkpoints={};var a=arguments,b=a.length,d=this._static.SHORT_TITLE,c=this._static.TITLE;if(b){this.setContent(a[0]);if(b>1){c=a[1];if(b>2){d=a[2]}}}this.setTitle(c);if(d){this.setShortTitle(d)}},_destructor:function(){this.unload();this._unset("_actionView");this._unset("_cancelView");this._unset("_titleView");this._unset("_overlay");return this._super(OjComponent,"_destructor",arguments)},_checkpointsCompleted:function(b){var a;for(a in b){if(!b[a]){return false}}return true},_hideOverlay:function(){var a=this._overlay;if(a){a.addEventListener(OjEvent.HIDE,this,"_onOverlayHide");a.hide()}},_load:function(){this._loaded=true;this.removeCss(["loading"]);this.redraw();this._hideOverlay();this.dispatchEvent(new OjEvent(OjView.LOAD))},_loadCheckpoint:function(){var a=arguments;if(a.length){this._load_checkpoints[a[0]]=true}if(this._checkpointsCompleted(this._load_checkpoints)){this._load()}else{this._showOverlay(this._loading_msg,this._loading_icon)}},_resetCheckpoints:function(b){var a;for(a in b){b[a]=false}},_showOverlay:function(){var b=arguments,d=b.length,e=d?b[0]:null,c=d>1?b[1]:null,a=this._overlay;if(a){a.setMessage(e);a.setIcon(c)}else{a=this._overlay=new OjOverlay(e,c)}a.show(this)},_unload:function(){this._loaded=true;this._hideOverlay();this.dispatchEvent(new OjEvent(OjView.UNLOAD))},_unloadCheckpoint:function(){var a=arguments;if(a.length){this._unload_checkpoints[a[0]]=true}if(this._checkpointsCompleted(this._unload_checkpoints)){this._unload()}else{this._showOverlay(this._unloading_msg,this._unloading_icon)}},_onOverlayHide:function(a){this._unset("_overlay")},load:function(){this.addCss(["loading"]);this._resetCheckpoints(this._load_checkpoints);this._loadCheckpoint()},unload:function(){this._resetCheckpoints(this._unload_checkpoints);this._unloadCheckpoint()},getContent:function(){return this.getElms()},setContent:function(b){this.removeAllElms();if(b){b=Array.array(b);var a=b.length;for(;a--;){this.addElmAt(b[a],0)}}},setFooter:function(a){if(this._footer=a){this.removeCss(["no-footer"]);if(!this.footer){this.footer=new OjStyleElement();this.footer.addCss("footer");this.container.parent().addChildAt(this.footer,0)}this.footer.removeAllChildren();this.footer.addChild(a)}else{this._unset("footer");this.addCss(["no-footer"])}},setHeader:function(a){if(this._header=a){this.removeCss(["no-header"]);if(!this.header){this.header=new OjStyleElement();this.header.addCss(["header"]);this.container.parent().addChildAt(this.header,0)}this.header.removeAllChildren();this.header.addChild(a)}else{this._unset("header");this.addCss(["no-header"])}},setTitle:function(a){this._title=a;if(!this._shortTitle){this._shortTitle=a}}},{SHORT_TITLE:null,TITLE:null,HORIZONTAL:"horizontal",VERTICAL:"vertical",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",LOAD:"onViewLoad",UNLOAD:"onViewUnload",_TAGS:["view"]});