OJ.importJs("oj.components.OjComponent");OJ.importCss("oj.form.OjInput");"use strict";OJ.extendClass("OjInput",[OjComponent],{_props_:{"default":null,name:null,prefix:null,required:false,suffix:null,title:null,validators:null,value:null},_get_props_:{error:null},_ready:false,_template:"oj.form.OjInput",_constructor:function(){this._super(OjComponent,"_constructor",[]);var a=arguments,b=a.length;this._errors=[];this._validators=[];if(!isUndefined(this.input.dom().placeholder)){this._unset("dflt")}if(b){this.setName(a[0]);if(b>1){this.setLabel(a[1]);if(b>2){this.setValue(a[2]);if(b>3){this.setValidators(a[3])}}}}if(!this._label){this.setLabel(this._label)}if(this.input){if(!this._value){this.setValue(this.input._dom.value)}this.input.addEventListener(OjFocusEvent.IN,this,"_onFocusIn");this.input.addEventListener(OjFocusEvent.OUT,this,"_onFocusOut");this.input.addEventListener(OjDomEvent.CHANGE,this,"_onChange")}if(this.className()=="OjInput"){this.hide()}else{b=this._class_names.length;for(;b--;){this.addCss(this._class_names[b]);if(this._class_names[b]=="OjInput"){break}}}this.addEventListener(OjMouseEvent.CLICK,this,"_onClick");this._ready=true},_formatError:function(a){return OJ.tokensReplace(a,this._formatErrorTokens())},_formatErrorTokens:function(){return{INPUT:this._title||this._label||this._default||this._name,VALUE:this._value}},_redrawDefault:function(){if(!this.dflt||isEmpty(this._default)||!isEmpty(this._value)){this.addCss(["no-default"])}else{this.removeCss(["no-default"])}return true},_onDefaultClick:function(a){this.input.focus()},_onFocusIn:function(a){this.addCss(["focus"])},_onFocusOut:function(a){this.removeCss(["focus"])},_onChange:function(a){this.setValue(this.input._dom.value)},_onClick:function(a){if(!this.input.hasFocus()){this.focus()}},blur:function(){this.input.blur()},focus:function(){this.input.focus()},isValid:function(){this._error=null;if(this._required&&isEmpty(this._value)){this._error=this._formatError(OjInput.REQUIRED_ERROR);return false}return true},redraw:function(){if(this._super(OjComponent,"redraw",arguments)){this._redrawDefault();return true}return false},validate:function(){if(this.isValid()){this.removeCss(["error"]);return true}this.addCss(["error"]);return false},setDefault:function(a){if(this._default==a){return}this._default=a;if(this.dflt){if(a){this.dflt.addEventListener(OjMouseEvent.CLICK,this,"_onDefaultClick")}else{this.dflt.removeEventListener(OjMouseEvent.CLICK,this,"_onDefaultClick")}this.dflt.setText(a);this._redrawDefault()}else{this.input.setAttr("placeholder",a)}},getErrors:function(){return this._errors},setLabel:function(a){this.label.setText(this._label=a);if(isEmpty(this._label)){this.addCss(["no-label"])}else{this.removeCss(["no-label"])}},setPrefix:function(a){if(isString(a)){this.prefix.setText(this._prefix=a)}else{if(this._prefix){if(isString(this._prefix)){this.removeAllChildren()}else{this.prefix.removeChild(this._prefix)}}this.prefix.addChild(this._prefix=a)}},setSuffix:function(a){if(isString(a)){this.suffix.setText(this._suffix=a)}else{if(this._suffix){if(isString(this._suffix)){this.removeAllChildren()}else{this.suffix.removeChild(this._suffix)}}this.suffix.addChild(this._suffix=a)}},setValidators:function(a){this._validators=Array.array(a)},getValue:function(){return this._value},setValue:function(a){if(a!=this._value){this._value=a;if(this.input._dom.value!=a){this.input._dom.value=String.string(a)}this._redrawDefault();if(this._ready){this.dispatchEvent(new OjEvent(OjEvent.CHANGE))}}}},{REQUIRED_ERROR:"[%INPUT] is required.",supportsInputType:function(b){var a=document.createElement("input");a.setAttribute("type",b);return a.type==b}});