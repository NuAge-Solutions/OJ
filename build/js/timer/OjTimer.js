OJ.importJs("oj.data.OjObject");OJ.importJs("oj.timer.OjTimerManager");"use strict";OJ.extendClass(OjActionable,"OjTimer",{_props_:{duration:0,repeatCount:0},_get_props_:{count:0,state:"stopped"},_last_tick:0,_constructor:function(){this._super("OjTimer","_constructor",[]);var a=arguments,b=a.length;if(b){this.setDuration(a[0]);if(b>1){this.setRepeatCount(a[1])}}},_destructor:function(){TimerManager.unregisterTimer(this);return this._super("OjTimer","_destructor",arguments)},_tick:function(){this.dispatchEvent(new OjEvent(OjTimer.TICK));if(this._repeatCount>0&&this._count++==this._repeatCount){this.stop();this.dispatchEvent(new OjEvent(OjTimer.COMPLETE))}},isPaused:function(){return this._state==OjTimer.PAUSED},isRunning:function(){return this._state==OjTimer.RUNNING},isStopped:function(){return this._state==OjTimer.STOPPED},pause:function(){this._state=OjTimer.PAUSED;TimerManager.unregisterTimer(this)},restart:function(){this.stop();this.start()},start:function(){if(!this.isRunning()){this._state=OjTimer.RUNNING;TimerManager.registerTimer(this)}},stop:function(){this.pause();this._count=0;this._state=OjTimer.STOPPED},setDuration:function(a){if(this._duration!=a){this._duration=Math.abs(a);TimerManager.updateTimer(this)}},setRepeatCount:function(a){this._repeatCount=Math.max(a,0);if(a>=this._count&&this.isRunning()){this.stop();this.dispatchEvent(new OjEvent(OjTimer.COMPLETE))}}},{TICK:"onTimerTick",COMPLETE:"onTimerComplete",PAUSED:"paused",RUNNING:"running",STOPPED:"stopped",SECOND:1000,MINUTE:60000,HOUR:3600000,DAY:86400000});