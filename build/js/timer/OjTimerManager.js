OJ.importJs("oj.events.OjActionable");OJ.importJs("oj.timer.OjTimer");"use strict";OJ.extendManager("TimerManager",OjActionable,"OjTimerManager",{_callback:null,_timers:{},_timer_count:0,_min_interval:999999,_interval:null,_constructor:function(){this._super("OjTimerManager","_constructor",arguments);this._callback=this._tick.bind(this)},_destructor:function(){this._callback=null;return this._super("OjTimerManager","_destructor",arguments)},_updateInterval:function(){if(this._timer_count){var a,b=this._min_interval;for(a in this._timers){b=Math.min(b,this._timers[a].getDuration())}if(this._min_interval!=b){this._min_interval=b;clearInterval(this._interval);this._interval=setInterval(this._callback,Math.max(this._min_interval/3,10));this._tick()}}else{clearInterval(this._interval);this._min_interval=999999}},_tick:function(){var b,a=Date.time(),c;for(b in this._timers){c=this._timers[b];if(c._duration<a-c._last_tick){c._last_tick=a;setTimeout('TimerManager._timerTick("'+b+'")',1)}}},_timerTick:function(a){if(TimerManager._timers[a]){TimerManager._timers[a]._tick()}},timer:function(){var a=arguments.length;if(!a){return new OjTimer()}if(a==1){return new OjTimer(arguments[0])}return new OjTimer(arguments[0],arguments[1])},registerTimer:function(b){var a=b.id();if(this._timers[a]!=b){this._timers[a]=b;b._last_tick=Date.time();this._timer_count++;this._updateInterval()}},updateTimer:function(a){if(this._timers[a.id()]){this._updateInterval()}},unregisterTimer:function(b){var a=b.id();if(this._timers[a]){delete this._timers[a];this._timer_count--;this._updateInterval()}}});