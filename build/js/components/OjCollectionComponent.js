OJ.importJs("oj.data.OjCollection");OJ.importJs("oj.components.OjComponent");OJ.importJs("oj.events.OjCollectionEvent");"use strict";window.OjICollectionComponent={_props_:{itemRenderer:null},_getContainer:function(){return this._items},_setElmFuncs:function(a){return this._elm_funcs={addElm:"addItem",addElmAt:"addItemAt",getElmAt:"getItemAt",getElms:"getItems",hasElm:"hasItem",indexOfElm:"indexOfItem",moveElm:"moveItem",numElms:"numItems",removeAllElms:"removeAllItems",removeElm:"removeItem",removeElmAt:"removeItemAt",replaceElm:"replaceItem",replaceElmAt:"replaceItemAt",setElms:"setItems"}},_setup:function(){var a=(this._items=new OjCollection());a.addEventListener(OjCollectionEvent.ITEM_ADD,this,"_onItemAdd");a.addEventListener(OjCollectionEvent.ITEM_MOVE,this,"_onItemMove");a.addEventListener(OjCollectionEvent.ITEM_REMOVE,this,"_onItemRemove");a.addEventListener(OjCollectionEvent.ITEM_REPLACE,this,"_onItemReplace");this._rendered={};this._item_events={}},_teardown:function(){var a;for(a in this._item_events){this._removeItemListener(this._item_events[a])}this._unset("_items");this._rendered=null;this._item_events=null},_addItemListener:function(c){if(!this._item_events[c]){var a=this._convertItemEventType(c),b;if(a){for(b in this._rendered){this._rendered[b].addEventListener(a[0],this,a[1])}this._item_events[c]=a[0]}}},_convertItemEventType:function(a){if(a==OjCollectionEvent.ITEM_CLICK){return[OjMouseEvent.CLICK,"_onItemClick"]}if(a==OjCollectionEvent.ITEM_OVER){return[OjMouseEvent.OVER,"_onItemOver"]}if(a==OjCollectionEvent.ITEM_OUT){return[OjMouseEvent.OUT,"_onItemOut"]}return null},_dispatchItemEvent:function(b,a){var c=a.getCurrentTarget();if(this._itemRenderer){c=c.getData()}this.dispatchEvent(new OjCollectionEvent(b,c,this._items.indexOfItem(c)))},_removeItemListener:function(c){if(!this.hasEventListener(c)){var a=this._convertItemEventType(c),b;if(a){for(b in this._rendered){this._rendered[b].removeEventListener(a[0],this,a[1])}delete this._item_events[c]}}},_onItemAdd:function(a){},_onItemClick:function(a){this._dispatchItemEvent(OjCollectionEvent.ITEM_CLICK,a)},_onItemOut:function(a){this._dispatchItemEvent(OjCollectionEvent.ITEM_OUT,a)},_onItemOver:function(a){this._dispatchItemEvent(OjCollectionEvent.ITEM_OVER,a)},_onItemMove:function(a){},_onItemRemove:function(a){delete this._rendered[a.getItem().id()]},_onItemReplace:function(a){delete this._rendered[a.getOldItem().id()]},renderItem:function(c){if(!c){return null}var b,a,d=c.id();if(this._rendered[d]){return this._rendered[d]}c=this._itemRenderer?new this._itemRenderer(this,c):c;for(b in this._item_events){a=this._convertItemEventType(b);c.addEventListener(a[0],this,a[1])}return this._rendered[d]=c},renderItemAt:function(a){return this.renderItem(this._items.getItemAt(a))},setItemRenderer:function(a){a=isString(a)?OJ.stringToClass(a):a;if(a==this._itemRenderer){return}this._itemRenderer=a}};OJ.extendComponent("OjCollectionComponent",[OjComponent],OJ.implementInterface(OjICollectionComponent,{_constructor:function(){this._super(OjComponent,"_constructor",arguments);this._setup()},_destructor:function(){this._teardown();this._super(OjComponent,"_destructor",arguments)},addEventListener:function(a,c,b){this._super(OjComponent,"addEventListener",arguments);this._addItemListener(a)},removeEventListener:function(a,c,b){this._super(OjComponent,"removeEventListener",arguments);this._removeItemListener(a)}}));