OJ.importJs("oj.components.OjComponent");OJ.importJs("oj.fx.OjResize");OJ.importCss("oj.components.OjFieldset");"use strict";OJ.extendComponent("OjFieldset",[OjComponent],{_props_:{collapsedIcon:null,collapsedText:"show",collapsable:false,expandedIcon:null,expandedText:"hide",isCollapsed:false,icon:null,title:null},_template:"oj.components.OjFieldset",_constructor:function(){var a=arguments,b=a.length;this._super(OjComponent,"_constructor",[]);this.actuator.addEventListener(OjMouseEvent.CLICK,this,"_onActuatorClick");this.removeChild(this.actuator);if(b){this.setTitle(a[0])}},_processDomSourceChild:function(b,c){var a=b.tagName;if(a&&a.toLowerCase()=="legend"){var d=b.childNodes.length,e;for(;d--;){e=b.childNodes[d];if(OjElement.isTextNode(e)){this.setTitle(e.nodeValue)}}return null}return this._processChild(b,c)},_redrawActuator:function(){if(this._is_displayed){if(this._collapsable){this.actuator.setHeight(this.legend.getHeight());if(this._isCollapsed){if(this._collapsedIcon||this._collapsedText){this.actuator.setIcon(this._collapsedIcon);this.actuator.setText(this._collapsedText);this.addChildAt(this.actuator,1)}else{this.removeChild(this.actuator)}}else{if(this._expandedIcon||this._expandedText){this.actuator.setIcon(this._expandedIcon);this.actuator.setText(this._expandedText);this.addChildAt(this.actuator,1)}else{this.removeChild(this.actuator)}}}else{this.removeChild(this.actuator)}return true}return false},_redrawLegend:function(){if(this._is_displayed){if(!this.title&&this._title){this.legend.addChild(this.title=new OjLabel(this._title))}else{if(this.title){this.title.setText(this._title)}}if(!this.icon&&this._icon){this.legend.addChild(this.icon=new OjImage(this._icon))}else{if(this.icon){this.icon.setSource(this._icon)}}return true}return false},_onActuatorClick:function(a){if(this._isCollapsed){this.expand()}else{this.collapse()}},_onExpand:function(a){this.removeCss(["collapsed"]);this.setHeight(OjStyleElement.AUTO);OJ.destroy(a)},collapse:function(){var a;if(this._isCollapsed){return}this.setIsCollapsed(true);a=new OjResize(this,OjResize.HEIGHT,this.legend.getHeight(),250,OjEasing.OUT);a.start();this._redrawActuator()},expand:function(){var a;if(!this._isCollapsed){return}this.setIsCollapsed(false);a=new OjResize(this,OjResize.HEIGHT,this.legend.getHeight()+this.container.getHeight(),250,OjEasing.OUT);a.addEventListener(OjTweenEvent.COMPLETE,this,"_onExpand");a.start();this._redrawActuator()},redraw:function(){if(this._super(OjComponent,"redraw",arguments)){this._redrawActuator();this._redrawLegend();return true}return false},setCollapsable:function(a){if(this._collapsable==a){return}this._collapsable=a;this._redrawActuator()},setCollapsedIcon:function(a){if(this._collapsedIcon==a){return}this._collapsedIcon=a;this._redrawActuator()},setCollapsedText:function(a){if(this._collapsedText==a){return}this._collapsedText=a;this._redrawActuator()},setExpandedIcon:function(a){if(this._expandedIcon==a){return}this._expandedIcon=a;this._redrawActuator()},setExpandedText:function(a){if(this._expandedText==a){return}this._expandedText=a;this._redrawActuator()},setIcon:function(a){if(this._icon==a){return}this._icon=a;this._redrawLegend()},setIsCollapsed:function(a){if(this._isCollapsed==a){return}if(this._isCollapsed=a){this.addCss(["collapsed"]);this.dispatchEvent(new OjEvent(this._static.COLLAPSE))}else{this.removeCss(["collapsed"]);this.dispatchEvent(new OjEvent(this._static.EXPAND))}},setTitle:function(a){if(this._title==a){return}this._title=a;this._redrawLegend()}},{_TAGS:["fieldset"],COLLAPSE:"onCollapse",EXPAND:"onExpand"});