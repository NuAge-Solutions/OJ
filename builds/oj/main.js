"use strict";function isAlien(a){return isObject(a)&&!isFunction(a.constructor)}function isArray(a){return Array.isArray(a)}function isBoolean(a){return typeof a==="boolean"}function isDate(a){return isObject(a)&&a.getMonth}function isDefined(a){return !isUndefined(a)}function isDomElement(a){return a&&(!isUndefined(a.childNodes)||a.nodeType)}function isEvent(a){return a&&typeof Event!="undefined"&&a.eventPhase}function isHash(a){return isObject(a)&&isUndefined(a.prototype)}function isInt(b){var a=parseInt(b);if(isNaN(a)){return false}return b==a&&b.toString()==b.toString()}function isNull(a){return a===null}function isFunction(a){return isSet(a)&&typeof a==="function"}function isNumber(a){return isSet(a)&&typeof a==="number"&&isFinite(a)}function isObject(a){return isSet(a)&&a instanceof Object&&!isArray(a)}function isString(a){return isSet(a)&&(typeof a==="string"||a.constructor.toString()==="string")}function isUndefined(a){return typeof a==="undefined"}function isObjective(b,a){return isObject(b)&&isSet(b.oj_id)&&isFunction(b._c)&&(!a||b.is(a))}function isElement(a){return isObjective(a)&&isSet(a._dom)}function isComponent(a){return isElement(a)&&isSet(a._t)}function isXml(b){var a=(b?b.ownerDocument||b:0).documentElement;return a?a.nodeName!=="HTML":false}function toXml(b){if(isString(b)){if(window.DOMParser){return(new DOMParser()).parseFromString(b,"text/xml")}var a=new ActiveXObject("Microsoft.XMLDOM");a.async=false;a.loadXML(b);return a}return isXml(b)?b:null}function isEmpty(a){return isUnset(a)||a===false||(isString(a)&&a.trim()=="")||(isArray(a)&&a.length==0)||(isObject(a)&&isEmptyObject(a))||(isObjective(a)&&a.is("OjArray")&&!a.length)}function isEmptyObject(b){var a,c;if(isArray(b)){return b.length==0}else{if(isObject(b)){for(a in b){c=b[a];if(!isUndefined(c)&&!isFunction(c)){return false}}}}return true}function isFalse(a){return isNull(a)||a===false||a===0||(isString(a)&&(a.toLowerCase()=="false"||a=="0"))}function isNumeric(a){return isSet(a)&&isFinite(parseFloat(a))}function isSet(a){return !isUnset(a)}function isTrue(a){return !isFalse(a)}function isUnset(a){return isNull(a)||isUndefined(a)}function print(d){if(OJ.mode==OJ.PROD){return}var c=arguments.length,b;if(c<2){console.log(d)}else{var a=[];for(b=0;b<c;b++){a.push(arguments[b])}console.log(a)}}function printGroup(b,a){if(OJ.mode==OJ.PROD){return}if(arguments.length){if(a&&!isUndefined(console.groupCollapsed)){console.groupCollapsed(b)}else{console.group(b)}}else{console.groupEnd()}}if(!isSet(window.console)||!isObject(window.console)){window.console={}}if(!isSet(console.log)||!isFunction(console.log)){console.log=function(){}}if(!isSet(console.group)||!isFunction(console.group)){console.group=console.groupCollapsed=console.groupEnd=console.log}window.OJ=function Oj(){var obj={_events:[],_guid:8,_loaded:{},_is_landscape:true,_is_mobile:false,_is_ready:false,_is_supported:true,_is_tablet:false,_is_touch_capable:false,_is_webview:false,_protocol:"http",_os_version:"",_settings:{css_ext:".css",css_path:null,dim_unit:"px",font_unit:"px",init:null,js_ext:".js",js_path:null,mode:"loading",support_message:'Your browser is currently not supported. Please try again with a more recent version of <a href="https://www.google.com/intl/en/chrome/browser/">Chrome</a>, <a href="http://www.mozilla.org/en-US/firefox/new/">Firefox</a>, <a href="http://www.apple.com/safari/">Safari</a> or <a href="http://windows.microsoft.com/en-us/internet-explorer/downloads/ie-10/worldwide-languages">Internet Explorer</a>. You can easily download the latest version by clicking on the name of the browser you wish to use.',target:"#OJ",theme:null,tpl_ext:"html",tpl_path:null,version:"0.0.0",wait_for_css:true},_viewport:{top:0,left:0,bottom:0,right:0,width:0,height:0},DEV:"development",LOADING:"loading",PROD:"production",FILE:"file",HTTP:"http",HTTPS:"https",CHROME:"Chrome",FIREFOX:"Firefox",IE:"Internet Explorer",IN_APP:"in-app",MOZILLA:"Mozilla",OPERA:"Opera",SAFARI:"Safari",GECKO:"Gecko",KHTML:"KHTML",TRIDENT:"Trident",WEBKIT:"WebKit",CHROME_OS:"Chrome OS",LINUX:"Linux",OSX:"OS X",WINDOWS:"Windows",ANDROID:"Android",BADA:"Bada",BLACKBERRY:"BlackBerry OS",BREW:"Brew",GRID:"Grid OS",IOS:"iOS",MEEGO:"MeeGo",PALM:"Palm",QNX:"QNX",SYMBIAN:"Symbian",WEBOS:"Web OS",WIN_MOBILE:"Windows Mobile",WIN_PHONE:"Windows Phone",_getClassPath:function(type,cls,ext){var parts=cls.split(".");return parts.shift()+"/"+(type?type+"/":"")+parts.join("/")+ext},_getCssImportPath:function(path){var self=this;if(path.indexOf("/")!=-1){return path}return self.root+self._getClassPath(self.css_path,path,self.css_ext)+self.version_query},_getJsImportPath:function(path){var self=this;if(path.indexOf("/")!=-1){return path}return self.root+self._getClassPath(self.js_path,path,self.js_ext)+self.version_query},_getModeSuffix:function(){return this.mode==this.DEV?"-dev":""},_getTemplateImportPath:function(path){var self=this;if(path.indexOf("/")!=-1){return path}return self.root+self._getClassPath(self.tpl_path,path,this.tpl_ext)+this.version_query},_getThemePath:function(path){if(!path||path.indexOf("/")!=-1){return path}var self=this,parts=path.split(".");if(parts.length==1){parts.push(path)}parts.splice(1,0,"themes");return self.root+parts.join("/")+self._getModeSuffix()+self.css_ext+self.version_query},addEventListener:function(type,context,func){this._events.push(arguments)},assetPath:function(path,file){var self=this,parts=path.split("."),pkg=parts[0];return self.root+pkg+"/assets/"+(file?file+self.version_query:"")},loadCss:function(css){var self=this,elm,head;if(arguments.length>1&&arguments[1]){elm=document.createElement("link");elm.setAttribute("rel","stylesheet");elm.setAttribute("type","text/css");elm.setAttribute("href",css)}else{if(css){elm=document.createElement("style");elm.type="text/css";if(elm.styleSheet){elm.styleSheet.cssText=css}else{elm.appendChild(document.createTextNode(css))}}else{return null}}head=document.getElementsByTagName("head")[0];if(self._theme_elm){head.insertBefore(elm,self._theme_elm)}else{head.appendChild(elm)}return elm},loadJs:function(js,is_path,is_async){var ln=arguments.length;if(ln<3){is_async=true;if(ln<2){is_path=true}}if(this.mode!=this.LOADING||is_async){var elm=document.createElement("script");elm.setAttribute("type","text/javascript");elm.setAttribute("language","javascript");if(is_async){elm.setAttribute("async","true")}if(is_path){elm.setAttribute("src",js)}else{elm.appendChild(document.createTextNode(js))}document.getElementsByTagName("head")[0].appendChild(elm);return elm}if(is_path){document.write('<script type="text/javascript" language="javascript" src="'+js+'"><\/script>')}else{eval(js)}},async:function(context,func){setTimeout(func.apply(context,Array.array(arguments).slice(2)),1)},attributeToFunc:function(attr){var parts=attr.split("-"),ln=parts.length;for(;ln--;){if(ln){parts[ln]=parts[ln].ucFirst()}}return parts.join("")},attributeToProp:function(attr){return attr.replace("-","_")},byId:function(id){if(id.charAt(0)=="#"){id=id.substr(1)}return document.getElementById(id)},classToString:function(obj){if(obj&&obj.prototype){if(obj.prototype._class_name_){return obj.prototype._class_name_}if(obj.prototype.constructor&&obj.prototype.constructor.toString){var arr=obj.prototype.constructor.toString().match(/function\s*(\w+)/);if(arr&&arr.length==2){return arr[1]}}}return undefined},copy:function(val){if(isArray(val)||isObjective(val)){return val.clone()}if(isObject(val)){return Object.clone(val)}return val},destroy:function(obj){if(obj&&isFunction(obj._d)){if(!obj._destroyed_){var args=arguments;obj._d(args.length>1?args[1]:0)}else{print("Called destroy multiple times on: "+obj.oj_id)}}return obj=null},elm:function(elm){return OjElement.element(elm)},defineClass:function(ns,def,static_def){eval("window[ns] = function "+ns+"(){"+(def._c?"this._c.apply(this, arguments);":"")+"};");def._class_name_=ns;if(def._supers){def._supers=def._supers.slice(0)}else{def._supers=[]}window[ns].prototype=def;if(static_def){var key;for(key in static_def){window[ns][key]=static_def[key]}}return window[ns]},definePackage:function(ns,def,parents){var cls=this.extendClass(ns,parents||[OjPackage],def),pkg=new cls();window[ns.toUpperCase()]=pkg;OJ.addEventListener(OjEvent.LOAD,pkg,"_onOjLoad");OJ.addEventListener(OjEvent.READY,pkg,"_onOjReady")},extendClass:function(ns,parents,def,static_def){var key,parent,ln2,names,name,supers,spr,props={_g_p_:null,_s_p_:null,_p_:null},ln=parents.length,proto=Object.create(parents[0].prototype),c=OJ.defineClass(ns,proto);proto._supers.push(parents[0]);for(;ln--;){parent=parents[ln];for(key in parent){c[key]=parent[key]}}if(static_def){for(key in static_def){c[key]=static_def[key]}}for(ln=parents.length;ln-->1;){parent=parents[ln].prototype;names=Object.getOwnPropertyNames(parent);for(ln2=names.length;ln2--;){name=names[ln2];if(name=="_class_name_"){continue}if(name=="_supers"){supers=proto[name];for(var ln3=parent[name].length;ln3--;){spr=parent[name][ln3];if(supers.indexOf(spr)==-1){supers.push(spr)}}proto[name].push(parents[ln])}else{if(name=="_post_compile_"){proto[name]=parent[name].slice(0).concat(proto[name]||[])}else{if(name in props){def[name]=Object.concat({},parent[name],def[name]||{})}else{if(!(name in proto)){try{Object.defineProperty(proto,name,Object.getOwnPropertyDescriptor(parent,name))}catch(e){}}}}}}}proto._class_name_=ns;for(key in props){if(!def[key]){continue}proto._propCompile_(def,key)}proto.$=c;for(key in def){if(key.charAt(0)=="_"&&key.slice(-1)=="_"){continue}proto[key]=def[key]}if(isFunction(def._compile_)){def._compile_.call(proto,def)}var post_compile=proto._post_compile_;if(post_compile){var def_post=def._post_compile_;if(isFunction(def_post)){proto._post_compile_=post_compile=post_compile.slice(0);post_compile.unshift(def_post)}for(ln=post_compile.length;ln--;){post_compile[ln](c,proto)}}return c.prototype.constructor=c},extendComponent:function(ns,parents,def){var args=arguments,tags=arguments.length>3?args[3]._TAGS:null,ln=tags?tags.length:0,cls=this.extendClass.apply(this,args);OjStyleElement.registerComponentTag(ns.toLowerCase(),ns);for(;ln--;){OjStyleElement.registerComponentTag(tags[ln],ns)}return cls},extendManager:function(manager_ns){var prev_manager=window[manager_ns],cls=OJ.extendClass.apply(this,Array.slice(arguments,1));return window[manager_ns]=new cls(prev_manager)},guid:function(){return(arguments.length?"OJ":"func")+"_"+this._guid++},implementInterface:function(){var key,intrfc,i=0,ln=arguments.length-1,def=arguments[ln];for(;i<ln;i++){intrfc=arguments[i];if(isString(intrfc)){var cls=OJ.stringToClass(intrfc);cls._interface_=intrfc;intrfc=cls}for(key in intrfc){if(isUndefined(def[key])){def[key]=intrfc[key]}else{if(key=="_p_"||key=="_g_p_"||key=="_s_p_"){OJ.implementInterface(intrfc[key],def[key])}}}}return def},importCss:function(path){return this.loadCss(this._getCssImportPath(path),true,false)},importJs:function(path){return this.loadJs(this._getJsImportPath(path),true,false)},merge:function(obj,obj2){var args=Array.array(arguments);args.unshift({});return Object.concat.apply(Object,args)},meta:function(){var ln,meta,name;if(!this._metadata){var metas=document.getElementsByTagName("meta");this._metadata={};this._metas={};for(ln=metas.length;ln--;){meta=metas[ln];if(meta.parentNode!=document.head){continue}name=meta.getAttribute("name");if(!name){name=meta.getAttribute("http-equiv")}if(name){name=name.toLowerCase();this._metadata[name]=meta.getAttribute("content");this._metas[name]=meta}}}var ln=arguments.length;if(ln){name=arguments[0].toLowerCase();if(ln>1){if(meta=this._metas[name]){meta.setAttribute("content",this._metadata[name]=arguments[1])}else{this._metas[name]=meta=document.createElement("meta");meta.setAttribute("name",arguments[0]);meta.setAttribute("content",this._metadata[name]=arguments[1]);document.head.appendChild(meta)}}return this._metadata[name]}return OJ.merge({},this._metadata)},pageTitle:function(){var d=document;return d?d.title:null},pageDescription:function(){return this.meta("description")},pluralize:function(str){var c=str.slice(-1),c2=str.slice(-2),c3=str.slice(-3);if(c=="s"){return str+"'"}else{if(c2=="ey"){return str.slice(0,-2)+"ies"}else{if(c3=="elf"){return str.slice(0,-3)+"elvs"}}}return str+"s"},removeEventListener:function(type,context,func){var ln=this._events.length,evt;for(;ln--;){evt=this._events[ln];if(evt[0]==type&&evt[1]==context&&evt[2]==func){this._events.splice(ln,1);break}}},render:function(elm){if(this.renderer){this.renderer.dom.appendChild(elm=isObjective(elm)?elm.dom:elm)}},settings:function(settings){var key;for(key in settings){this[key]=settings[key]}},stringToClass:function(str){return window[str]},stringToVar:function(obj){var parts=isArray(obj)?obj:obj.split("."),ln=parts.length,i;obj=window;for(i=0;i<ln;i++){if(!obj[parts[i]]){obj[parts[i]]={}}obj=obj[parts[i]]}return obj},toClass:function(obj){return isString(obj)?this.stringToClass(obj):obj},tokenReplace:function(source,token,value){return source.replace(new RegExp("\\[%"+token+"\\]","g"),value)},tokensReplace:function(source,key_vals){var key;for(key in key_vals){source=this.tokenReplace(source,key,key_vals[key])}return source},unset:function(context,args){var ln=args.length,prop=args[0],props;if(isArray(args[0])){for(ln=(props=args[0]).length;ln--;){args[0]=props[ln];context._u.apply(context,args)}return}context[prop]=OJ.destroy(context[prop],ln>1?args[1]:0)}},get_props={browser:null,browser_version:null,css_prefix:null,engine:null,is_computer:function(){return !this.is_mobile&&!this.is_tablet},is_landscape:null,is_mobile:null,is_portrait:function(){return !this.is_landscape},is_ready:null,is_supported:null,is_tablet:null,is_touch_capable:null,is_webview:null,os:null,os_version:null,pixel_ratio:function(){return window.devicePixelRatio||1},protocol:null,root:null,screen:function(){var rect={top:isSet(window.screenY)?window.screenY:window.screenTop,left:isSet(window.screenX)?window.screenX:window.screenLeft,width:window.screen.availWidth,height:window.screen.availHeight};rect.bottom=rect.top+rect.height;rect.right=rect.left+rect.width;return rect},scroll_left:function(){return document.body.scrollLeft},scroll_top:function(){return document.body.scrollTop},version_query:function(){var self=this,v;if(self.mode==self.LOADING||self.protocol==self.FILE||isEmpty(v=self.version)){return""}return"?v="+v},viewport:function(){var rect={top:window.pageYOffset?window.pageYOffset:document.body.scrollTop,left:window.pageXOffset?window.pageXOffset:document.body.scrollLeft,bottom:0,right:0,width:window.innerWidth?window.innerWidth:document.body.clientWidth,height:window.innerHeight?window.innerHeight:document.body.clientHeight};rect.bottom=rect.top+rect.height;rect.right=rect.left+rect.width;return rect}},set_props={root:function(val){var self=this;self._root=isEmpty(val)&&self.protocol==self.FILE?"":(val+"/")},scroll_left:function(val){document.body.scrollLeft=val},scroll_top:function(val){document.body.scrollTop=val},theme:function(val){var self=this,old_path=self._compiled_theme_path,path=self._getThemePath(val),ln,elms;if(!path||path.indexOf(old_path)>-1){return}elms=document.getElementsByTagName("link");self._compiled_theme_path=path;for(ln=elms.length;ln--;){if(elms[ln].getAttribute("href").indexOf(old_path)>-1){elms[ln].setAttribute("href",path);return}}self._settings.theme=val;self._theme_elm=self.loadCss(path,true)},viewport:function(val){}},key;function makeProperty(key,is_setting){var get_func=is_setting?function(){return this._settings[key]}:function(){return this["_"+key]},set_func=is_setting?function(val){return this._settings[key]=val}:function(val){return this["_"+key]=val};Object.defineProperty(obj,key,{get:get_props[key]||get_func,set:set_props[key]||(is_setting?set_func:function(){throw'Property "'+key+'" cannot be set.'}),enumerable:true,configurable:false})}for(key in obj._settings){makeProperty(key,true)}for(key in get_props){makeProperty(key)}return obj}();(function(){var c=document.getElementsByTagName("script"),a=c[c.length-1].getAttribute("src"),f=a.indexOf("://"),d=0,k,g,b;if(f>0){k=a;OJ._protocol=a.substring(0,f)}else{k=window.location.href.split("/");if(a.charAt(0)=="/"){k=k.slice(0,3)}else{k.pop();k.push("")}k=k.join("/")+a;OJ._protocol=window.location.protocol.substring(-1)}k=k.split("/");k.pop();k.pop();OJ.root=k.join("/");var e={search:function(n){var l=n.length;for(;l--;){var i=n[l].s,m=n[l].p;this.v=n[l].v||n[l].id;if(i){if(i.indexOf(n[l].sub)!=-1){return n[l].id}}else{if(m){return n[l].id}}}},version:function(l){var i=l?l.indexOf(this.v):-1;if(i==-1){return}return l.substring(i+this.v.length+1).split(" ")[0]}};OJ._browser=e.search([{s:navigator.userAgent,sub:"Mozilla",id:"Netscape",v:"Mozilla"},{s:navigator.userAgent,sub:"OmniWeb",v:"OmniWeb/",id:"OmniWeb"},{p:window.opera,id:"Opera",v:"Version"},{s:navigator.vendor,sub:"iCab",id:"iCab"},{s:navigator.vendor,sub:"KDE",id:"Konqueror"},{s:navigator.vendor,sub:"Camino",id:"Camino"},{s:navigator.userAgent,sub:"Netscape",id:"Netscape"},{s:navigator.userAgent,sub:"Gecko",id:"Mozilla",v:"rv"},{s:navigator.userAgent,sub:"MSIE",id:"Internet Explorer",v:"MSIE"},{s:navigator.vendor,sub:"Apple",id:"Safari",v:"Version"},{s:navigator.userAgent,sub:"Firefox",id:"Firefox"},{s:navigator.userAgent,sub:"Chrome",id:"Chrome"}])||null;OJ._browser_version=e.version(navigator.userAgent)||e.version(navigator.appVersion)||e.version(navigator.user_agent);var j=navigator.userAgent.toLowerCase();if(j.indexOf("android")>-1){OJ._os=OJ.ANDROID;OJ._is_tablet=!(OJ._is_mobile=(j.indexOf("mobile")>-1));OJ._is_touch_capable=true}else{if(/(iphone|ipod|ipad)/i.test(j)){var h=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);OJ._os=OJ.IOS;OJ._is_tablet=!(OJ._is_mobile=(j.indexOf("ipad")==-1));OJ._is_webview=/(iphone|ipod|ipad).*applewebkit(?!.*safari)/i.test(j);OJ._os_version=[parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3]||0,10)].join(".");if(!OJ._browser_version){OJ._browser_version=OJ.IN_APP}}else{OJ._os=e.search([{s:navigator.platform,sub:"Win",id:"Windows"},{s:navigator.platform,sub:"Mac",id:"OS X"},{s:navigator.platform,sub:"Linux",id:"Linux"}])||null}}if(!OJ._is_touch_capable){OJ._is_touch_capable="ontouchstart" in window}switch(OJ._browser){case OJ.FIREFOX:OJ._engine=OJ.GECKO;OJ._css_prefix="-moz-";break;case OJ.IE:OJ._engine=OJ.TRIDENT;OJ._css_prefix="-ms-";break;case OJ.CHROME:case OJ.SAFARI:OJ._engine=OJ.WEBKIT;OJ._css_prefix="-webkit-"}OJ._onOjResize=function(){if(isFunction(OJ.dispatchEvent)&&isFunction(OJ.addCss)){var l=OJ._viewport,i=window.innerWidth?window.innerWidth:document.body.clientWidth,m=window.innerHeight?window.innerHeight:document.body.clientHeight,o=i-l.width,n=m-l.height;l.width=i;l.height=m;l.bottom=l.top+l.height;l.right=l.left+l.width;if(l.width>l.height){OJ._is_landscape=true;OJ.addCss("is-landscape");OJ.removeCss("is-portrait")}else{OJ._is_landscape=false;OJ.addCss("is-portrait");OJ.removeCss("is-landscape")}OJ.dispatchEvent(new OjTransformEvent(OjTransformEvent.RESIZE,l.top,l.left,o,n))}};OJ._onOjScroll=function(i){var l=OJ._viewport;l.top=window.pageYOffset?window.pageYOffset:document.body.scrollTop;l.left=window.pageXOffset?window.pageXOffset:document.body.scrollLeft;l.bottom=l.top+l.height;l.right=l.left+l.width};OJ._onOjOrientationChange=function(i){if(isFunction(OJ.dispatchEvent)){OJ.dispatchEvent(OjOrientationEvent.convertDomEvent(i))}};if(window.addEventListener){window.addEventListener("resize",OJ._onOjResize,false);window.addEventListener("scroll",OJ._onOjScroll,false);window.addEventListener("orientationchange",OJ._onOjOrientationChange,false)}else{window.attachEvent("onresize",OJ._onOjResize,false);window.attachEvent("onscroll",OJ._onOjScroll,false);window.attachEvent("onorientationchange",OJ._onOjOrientationChange,false)}})();printGroup("Picking the oranges.",true);function onDomReady(){var n,j=OJ.byId(OJ.target);if(j){var o=j.attributes,k,m=["mode","version"],l=m.length;for(;l--;){if((k=m[l])&&o[k]){OJ[k]=o[k].value;j.removeAttribute(k)}}l=o.length;for(;l--;){k=o[l].nodeName;if(k=="id"||k=="class"||k.substr(0,3)=="on-"){continue}OJ[OJ.attributeToProp(k)]=o[l].value;j.removeAttribute(k)}OJ._target=j}if(!OJ._theme_elm){OJ.theme=OJ.theme}if(OJ.mode==OJ.LOADING){OJ.mode=OJ.PROD}for(n in OJ._loaded){OJ._loaded[n+OJ.version_query]=true}var d=new OjView();d.alpha=0;d.appendChild(d.renderer=new OjStyleElement('<div class="renderer"></div>'));var p,c=0,l=OJ._events.length;for(;c<l;c++){p=OJ._events[c];d.addEventListener.apply(d,p)}delete OJ._events;delete OJ.addEventListener;delete OJ.removeEventListener;d.bulkSet(OJ);d.addCss("OJ");window.OJ=d;OJ._setProxy(document.body);OJ.dispatchEvent(new OjEvent(OjEvent.LOAD));var b=OJ.os,a=OJ.pixel_ratio;if(b==OJ.IOS){d.dom.onclick=function(){}}OJ._onOjResize(null);OJ._onOjScroll(null);if(OJ.is_mobile){OJ.addCss("is-mobile");if(b==OJ.IOS){OJ.addCss("is-ios")}else{if(b==OJ.ANDROID){OJ.addCss("is-android")}}}if(OJ.is_tablet){OJ.addCss("is-tablet")}if(a<=0.75){OJ.addCss("ld")}else{if(a>=1.5){OJ.addCss("hd")}else{OJ.addCss("sd")}}OJ._setIsDisplayed(true);try{var f=OJ.browser,h=OJ.browser_version;OJ._is_supported=!OJ.is_computer||h==OJ.IN_APP||(f==OJ.IE&&h.compareVersion("9.0")>=0)||(f==OJ.FIREFOX&&h.compareVersion("2.0")>=0)||(f==OJ.CHROME&&h.compareVersion("4.0")>=0)||(f==OJ.SAFARI&&h.compareVersion("5.0")>=0)||(f==OJ.OPERA&&h.compareVersion("10.5")>=0)}catch(g){OJ._is_supported=false}OJ._interval=setInterval(window.onOjReady,100)}function onOjReady(){if(isEmpty(OjStyleElement.getStyle(document.body,"minWidth"))){return}clearInterval(OJ._interval);printGroup();printGroup("Juicing the oranges.",true);if(OJ._target){OJ._setDomSource(OJ._target,OJ);OJ._target=null}else{document.body.appendChild(OJ.dom)}var b=OJ.init;if(b){b()}printGroup();printGroup("Your OJ is ready. Enjoy!",true);OJ._is_ready=true;OJ.fadeIn();OJ.dispatchEvent(new OjEvent(OjEvent.READY));if(!OJ.is_supported){var a=WindowManager.makeAlert(OJsupport_message,"Unsupported Browser");a.hideButtons();a.paneWidth=425;WindowManager.show(a);return}printGroup()}if(!Date.time){Date.time=function(){return(new Date()).getTime()}}if(!Date.prototype.isEqual){Date.prototype.isEqual=function(a){return isDate(a)&&this.getTime()==a.getTime()}}var proto=Function.prototype;if(!proto.bind){proto.bind=function(b){if(!isFunction(this)){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var f=Array.array(arguments).slice(1),e=this,c=function(){},d=function a(){return e.apply(this instanceof c&&b?this:b,f.concat(Array.array(arguments)))};c.prototype=this.prototype;d.prototype=new c();return d}}Date.prototype.toJson=function(a){return isFinite(this.valueOf())?this.getUTCFullYear().toFormattedString(2,0)+"-"+(this.getUTCMonth()+1).toFormattedString(2,0)+"-"+this.getUTCDate().toFormattedString(2,0)+"T"+this.getUTCHours().toFormattedString(2,0)+":"+this.getUTCMinutes().toFormattedString(2,0)+":"+this.getUTCSeconds().toFormattedString(2,0)+"Z":null};Array.prototype.toJson=function(){return JSON.stringify(this)};String.prototype.toJson=Number.prototype.toJson=Boolean.prototype.toJson=function(a){return this.valueOf()};String.prototype.parseJson=function(){return JSON.parse(this,function(c,d){if(isString(d)&&d.substr(-1)=="Z"){var b=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(d);if(b){return new Date(Date.UTC(+b[1],+b[2]-1,+b[3],+b[4],+b[5],+b[6]))}}return d})};window.toJson=function(a){return JSON.stringify(a)};if(!Math.signedCeil){Math.signedCeil=function(a){if(a<0){return Math.floor(a)}return Math.ceil(a)}}if(!Math.signedFloor){Math.signedFloor=function(a){if(a<0){return Math.ceil(a)}return Math.floor(a)}}if(!Math.bounds){Math.bounds=function(b,c,a){return Math.min(Math.max(c,b),a)}}var proto=Number.prototype;proto.oldToString=proto.toString();if(!proto.toFormattedString){proto.toFormattedString=function(a,d){var c="",b=this.valueOf().split(".");if(a){for(;b[0].length<a;){b[0]="0"+b[0]}c=b[0]}if(d){c+=".";for(;b[1].length<d;){b[1]+="0"}c+=b[1]}return c}}if(!Object.create){Object.create=function(b){if(arguments.length>1){throw new Error("Object.create implementation only accepts the first parameter.")}function a(){}a.prototype=b;return new a()}}if(!Object.keys){Object.keys=function(c){if(c!==Object(c)){throw new TypeError("Object.keys called on non-object")}if(c.__count__){return c.__count__}var b,a=[];for(b in c){if(Object.prototype.hasOwnProperty.call(c,b)){a.append(b)}}b=null;return a}}Object.numKeys=function(a){return isSet(a)?Object.keys(a).length:0};Object.toJson=function(a){};Object.clone=function(c){var a={},b;for(b in c){a[b]=c[b]}return a};Object.concat=function(e,d){var b,a,c=arguments.length;for(a=1;a<c;a++){for(b in arguments[a]){e[b]=arguments[a][b]}}return e};window.OjObject=function(){};OjObject.prototype={_post_compile_:[],_propCompile_:function(b,c){var a,g,e,c=b[c],f=c!="_s_p_",d=c!="_g_p_";if(isFunction(b._processProp_)){this._processProp_=b._processProp_}for(a in c){g="_"+a;e=c[a];if(isSet(e)){this[g]=e}this._processProp_(a,g,f?"."+a:null,d?"="+a:null)}},_processProp_:function(b,d,a,c){Object.defineProperty(this,b,{configurable:true,enumerable:false,get:function(){if(!a){throw'Property "'+b+'" get not allowed.'}var e=this[a];if(e){return e.call(this)}return this[d]},set:function(f){if(!c){throw'Property "'+b+'" set not allowed.'}var e=this[c];if(e){e.call(this,f)}else{this[d]=f}return f}})},_c:function(a){this._id_=OJ.guid(this);if(a){this.bulkSet(a)}return this},_s:function(b,c,a){if(!b||!b.prototype||!b.prototype[c]){print(arguments);}return b.prototype[c].apply(this,a||[])},_d:function(){var a;for(a in this){delete this[a]}this._destroyed_=true},_processArguments:function(h,b){var g=h.length,f=0,j,d,k,c,a,e;for(j in b){d=b[j];if(g>f){d=h[f]}if(!isUndefined(d)){k=this;c=j.split(".");if((a=c.length)>1){for(e=0;e<a;e++){if(e){k=k[j]}j=c[e]}}if(isFunction(k[j])){k[j](d)}else{k[j]=d}}f++}},_u:function(a){OJ.unset(this,arguments)}};OJ.extendClass("OjObject",[OjObject],{_destroyed_:false,_g_p_:{oj_class_name:null,oj_class:null,oj_id:null},bulkGet:function(b){var a,c,d={};for(a in b){if(isFunction(this[a])){d[a]=this[a]()}else{d[a]=b[a]}}return d},bulkSet:function(b){var a;for(a in b){this[a]=b[a]}},clone:function(){var a=this.$;return new a()},exportData:function(){return{_class:this.oj_class_name}},importData:function(a){return a},is:function(a){if(isString(a)){a=OJ.stringToClass(a)}return a==this.$||this._supers.contains(a)},isEqualTo:function(a){return this==a},toJson:function(){return JSON.stringify(this)},toQueryString:function(){return Object.toQueryString(this)},toString:function(){var a=this;return a.oj_class_name+" : "+a.oj_id},".oj_class":function(){return this.$},".oj_class_name":function(){return this._class_name_},".oj_id":function(){return this._id_}},{_u:function(a){OJ.unset(this,arguments)},importData:function(e){var d,g,f,b,a;if(isArray(e)){for(d=e.length;d--;){e[d]=OjObject.importData(e[d])}}else{if(isObject(e)){a=e._class;if(a){g=OJ.stringToClass(a);if(!g&&a.indexPath(".")>-1){g=OJ.stringToClass(a.split(".").last)}if(g){f=new g();f.importData(e);return f}}for(b in e){e[b]=OjObject.importData(e[b])}}}return e},exportData:function(c){var b,a;if(isArray(c)){for(b=c.length;b--;){c[b]=OjObject.exportData(c[b])}}else{if(isObject(c)){if(isFunction(c.exportData)){return c.exportData()}for(a in c){c[a]=OjObject.exportData(c[a])}}}return c},makeNew:function(a){var b=this;function c(){return b.apply(this,a)}c.prototype=b.prototype;return new c()}});OjObject.prototype._supers=[];OJ.extendClass("OjActionable",[OjObject],{_prevent_dispatch:false,_c:function(){this._actionable=this;this._s(OjObject,"_c",arguments)},_d:function(){if(this._actionable){this.dispatchEvent(new OjEvent(OjEvent.DESTROY));this.removeAllListeners();this._actionable=null}return this._s(OjObject,"_d",arguments)},_listeners:function(a){return null},_updateListeners:function(e,b){var d=e=="add"?"addEventListener":"removeEventListener",a=this._listeners(b),c=a?a.length:0,f;if(c){if((f=a[0])&&f[d]){b=b.ucFirst();if(c>1){f[d](a[1],this,"_on"+b+"Success")}if(c>2){f[d](a[2],this,"_on"+b+"Fail")}}}},addEventListener:function(b,a,c){EventManager.addEventListener(this._actionable,b,a,c)},hasEventListener:function(a){return EventManager.hasEventListener(this._actionable,a)},hasEventListeners:function(b){var a=arguments,c=a.length;if(c==1){if(isArray(a[0])){a=a[0];c=a.length}else{a=[a[0]];c=1}}for(;c--;){if(!EventManager.hasEventListener(this._actionable,a[c])){return false}}return true},removeAllListeners:function(){return EventManager.removeAllListeners(this._actionable)},removeEventListener:function(b,a,c){EventManager.removeEventListener(this._actionable,b,a,c)},dispatchEvent:function(a){if(this._prevent_dispatch||a.isCanceled){return}if(this._actionable){EventManager.dispatchEvent(this._actionable,a)}}},{ADD:"add",REMOVE:"remove"});OJ.extendClass("OjPackage",[OjActionable],{_onOjLoad:function(a){OJ.removeEventListener(OjEvent.LOAD,this,"_onOjLoad")},_onOjReady:function(a){OJ.removeEventListener(OjEvent.READY,this,"_onOjReady")}});String.string=function(a){if(isSet(a)){return isObject(a)?a.toString():String(a)}return""};var proto=String.prototype;if(!proto.chunk){proto.chunk=function(c,f){var a=Math.ceil(this.length/c),e=new Array(a),b=0,d=0;for(;b<a;++b,d+=c){e[b]=this.substr(d,c);if(f){f(e[b])}}return e}}if(!proto.lcFirst){proto.lcFirst=function(){return this.charAt(0).toLowerCase()+this.slice(1)}}if(!proto.ucFirst){proto.ucFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)}}if(!proto.capitalize){proto.capitalize=function(){var c="",b=this.split(" "),a=b.length;for(;a--;){if(c!=""){c=" "+c}c=b[a].ucFirst()+c}return c}}if(!proto.compareVersion){proto.compareVersion=function(a){var c=0,b=0,h=this.split("."),g=a.split("."),f=Math.max(h.length,g.length);for(;c<f;c++){var e=(c<h.length)?parseInt(h[c],10):0,d=(c<g.length)?parseInt(g[c],10):0;if(isNaN(e)){e=0}if(isNaN(d)){d=0}if(e!=d){b=(e>d)?1:-1;break}}return b}}if(!proto.count){proto.count=function(a){return(this.match(new RegExp(a.regexEscape(),"g"))||[]).length}}if(!proto.decodeUri){proto.decodeUri=function(){return decodeURIComponent(this)}}if(!proto.encodeUri){proto.encodeUri=function(){return encodeURIComponent(this)}}if(!proto.html){proto.html=function(){return this.replaceAll(["\n","\t"],["<br />","&nbsp;&nbsp;&nbsp;&nbsp;"])}}if(!proto.isEmpty){proto.isEmpty=function(){return this.trim()!=""}}if(!proto.trim){proto.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}if(!proto.ltrim){proto.ltrim=function(){return this.replace(/^\s+/,"")}}if(!proto.rtrim){proto.rtrim=function(){return this.replace(/\s+$/,"")}}if(!proto.fulltrim){proto.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")}}if(!proto.clean){proto.clean=function(a){return a.replace(/\r/g,"")}}if(!proto.regexSpecialChars){proto.regexSpecialChars=new RegExp("[.*+?|()\\[\\]{}\\\\]","g")}if(!proto.regexEscape){proto.regexEscape=function(){return this.replace(String.prototype.regexSpecialChars,"\\$&")}}if(!proto.replaceAll){proto.replaceAll=function(e,b){if(Array.isArray(e)){var d=this,a,c=e.length;b=e.equalize(b);for(a=0;a<c;a++){d=d.replace(new RegExp(e[a].regexEscape(),"g"),b[a])}return d}else{return this.replace(new RegExp(e.regexEscape(),"g"),b)}}}OJ.extendClass("OjArray",[OjActionable],{_p_:{allowDuplicate:true,first:null,last:null,length:null},_c:function(b){var a=this;a._s(OjActionable,"_c",[]);a._items=[];if(b){if(isObject(b)){var d=[],c;for(c in b){d.append(b[c])}b=d}a._updateIndexProperties(b.length);a._items=b}},_addIndexProperty:function(a){Object.defineProperty(this,a,{configurable:true,enumerable:true,get:function(){return this._getIndex.call(this,a)},set:function(b){return this._setIndex.call(this,a,b)}})},_callArrayFunc:function(c,b){var a=this._items;return a[c].apply(a,b)},_checkDuplicate:function(a){if(!this.allowDuplicates&&this.contains(a)){throw"Duplicate value not allowed."}},_checkDuplicates:function(b){var a=this;b.forEachReverse(function(c){a._checkDuplicate(c)})},_dispatchAdd:function(a,b){var c=OjCollectionEvent;this.dispatchEvent(new c(c.ITEM_ADD,a,b))},_getIndex:function(a){return this._items[a]},_processIndex:function(a){return a>=0?a:this.length+a},_removeIndexProperty:function(a){delete this[a]},_setIndex:function(c,d){var b=this,e=OjCollectionEvent,a=b._items;if(a[c]==d){return}this._checkDuplicate(d);a[c]=d;b.dispatchEvent(new e(e.ITEM_REPLACE,[d],c));return d},_updateIndexProperties:function(b){var a=this.length,c=b-a;if(c>0){for(;c--;){this._addIndexProperty(a+c)}}else{if(c<0){for(;c++<0;){this._removeIndexProperty(a+c)}}}},append:function(){var b=this,d=Array.array(arguments),a=b._checkDuplicates(d),f=b.length,c=b._updateIndexProperties(f+d.length),e=b._callArrayFunc("append",d);b._dispatchAdd(d,f);return e},clone:function(){var a=this,b=new a.$(a._items.clone());b.allowDuplicates=a.allowDuplicates;return b},contains:function(){return this._callArrayFunc("contains",arguments)},dispatchEvent:function(a){var c=OjCollectionEvent,b=this;b._s(OjActionable,"dispatchEvent",arguments);if(c.isChangeEvent(a)){b.dispatchEvent(new c(c.ITEM_CHANGE,a.items,a.index,a.oldItems))}},equalize:function(){return this._callArrayFunc("equalize",arguments)},forEach:function(){return this._callArrayFunc("forEach",arguments)},forEachReverse:function(){return this._callArrayFunc("forEachReverse",arguments)},getAt:function(a){return this[a]},indexOf:function(){return this._callArrayFunc("indexOf",arguments)},insertAt:function(){var b=this,d=Array.array(arguments),a=b._checkDuplicates(d),c=b._updateIndexProperties(b.length+d.length-1),e=b._callArrayFunc("insertAt",d);b._dispatchAdd(d.slice(0,-1),d.last);return e},join:function(){return this._callArrayFunc("join",arguments)},move:function(e,c){var b=this,a=b._checkDuplicate(e),f=OjCollectionEvent,d=this._callArrayFunc("move",arguments);b.dispatchEvent(new f(f.ITEM_MOVE,[e],c));return d},prepend:function(){var b=this,d=Array.array(arguments),a=b._checkDuplicates(d),c=b._updateIndexProperties(b.length+d.length),e=b._callArrayFunc("prepend",d);b._dispatchAdd(d,0);return e},remove:function(){var a=this,c=Array.array(arguments),b=a._updateIndexProperties(a.length-c.length),e=OjCollectionEvent;c.forEachReverse(function(g,f){f=a.indexOf(g);if(isUnset(b)||f<b){b=f>-1?f:b}});var d=a._callArrayFunc("remove",c);a.dispatchEvent(new e(e.ITEM_REMOVE,c,b));return d},removeAll:function(){var b=this,a=b._items,c=OjCollectionEvent;b._items=[];b._updateIndexProperties(0);b.dispatchEvent(new c(c.ITEM_REMOVE,a,0));return a},removeAt:function(){var a=this,c=Array.array(arguments),b=a._updateIndexProperties(a.length-c.length),e=OjCollectionEvent;c.forEachReverse(function(g,f){if(isUnset(b)||f<b){b=f}});var d=a._callArrayFunc("removeAt",c);a.dispatchEvent(new e(e.ITEM_REMOVE,d,b));return d},removeFirst:function(){var a=this,c=OjCollectionEvent;a._updateIndexProperties(a.length-1);var b=a._callArrayFunc("removeFirst",arguments);a.dispatchEvent(new c(c.ITEM_REMOVE,[b],0));return b},removeLast:function(){var a=this;a._updateIndexProperties(a.length-1);return a._callArrayFunc("removeLast",arguments)},replace:function(){return this._callArrayFunc("replace",arguments)},replaceAll:function(){return this._callArrayFunc("replaceAll",arguments)},reverse:function(){return this._callArrayFunc("reverse",arguments)},setAt:function(a,b){return this[a]=b},sort:function(){var b=this,a=b.$;return new a(b._callArrayFunc("sort",arguments))},unique:function(){return this._callArrayFunc("unique",arguments)},".first":function(){return this._items.first},"=first":function(a){this._items.first=a},".last":function(){return this._items.last},"=last":function(a){this._items.last=a},".length":function(){return this._items.length},"=length":function(a){return this._items.length=a}},{array:function(a){if(isObjective(a,OjArray)){return a}if(!isArray(a)){a=[a]}return new OjArray(a)}});Array.array=function(a){if(isNull(a)){return[]}else{if(isArray(a)){return a}else{if((isObject(a)||isFunction(a))&&!isUndefined(a.length)){return[].slice.call(a,0)}}}return[a]};if(!Array.isArray){Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"||(window.OjArray&&isObjective(a,OjArray))}}if(!Array.slice){Array.slice=function(b,c){var a=Array.array(arguments);b=Array.array(b);return b.slice.apply(b,a.slice(1))}}var proto=Array.prototype;if(!proto.append){proto.append=proto.push}if(!proto.clone){proto.clone=function(){return this.slice(0)}}if(!proto.contains){proto.contains=function(a){return this.indexOf(a)!=-1}}if(!proto.equalize){proto.equalize=function(d){var c=this.length,a,b=null;if(!Array.isArray(d)){b=d;d=[d]}a=d.length;for(;a-->c;){d.push(b)}return d}}if(!proto.first){Object.defineProperty(proto,"first",{configurable:false,enumerable:false,get:function(){var a=this;return a.length?a[0]:null},set:function(b){var a=this;if(a.length){a[0]=val}else{a.append(b)}}})}proto.oldForEach=proto.forEach;proto.forEach=function(e,c){var a=this,d=a.length,b=0;c=c||a;for(;b<d;b++){if(e.call(c,a[b],b,a)===false){break}}return b==d};if(!proto.forEachReverse){proto.forEachReverse=function(d,b){var a=this,c=a.length;b=b||a;for(;c--;){if(d.call(b,a[c],c,a)===false){break}}return c==0}}if(!proto.indexOf){proto.indexOf=function(c,d){var a=this,b=a.length,d=Number(d)||0;d=(d<0)?Math.ceil(d):Math.floor(d);if(d<0){d+=b}for(;d<b;d++){if(d in a&&a[d]===c){return d}}return -1}}if(!proto.insertAt){proto.insertAt=function(){var b=Array.array(arguments),c=b.slice(0,-1),a=this;c.splice(0,0,b.last,0);return a.splice.apply(a,c)}}if(!proto.last){Object.defineProperty(proto,"last",{configurable:false,enumerable:false,get:function(){var a=this.length;return a?this[a-1]:null},set:function(b){var a=this.length;if(a){this[a-1]=val}else{this.append(b)}}})}if(!proto.move){proto.move=function(d,a){var c=this.length;if(a>=c){var b=a-c;for(;(b--)+1;){this.push(undefined)}}this.splice(a,0,this.splice(d,1)[0]);return this}}if(!proto.prepend){proto.prepend=proto.unshift}if(!proto.remove){proto.remove=function(g){var f,c,b=arguments,d=b.length,e=[];for(;d--&&this.length;){f=b[d];for(;(c=this.indexOf(f))>-1;){e.append(this.splice(c,1))}}return e}}if(!proto.removeAll){proto.removeAll=function(){var a=this.clone();this.length=0;return a}}if(!proto.removeAt){proto.removeAt=function(b){var d=[],a=arguments,c=a.length;for(;c--;){d.append(this.splice(a[c],1))}return d}}if(!proto.removeFirst){proto.removeFirst=proto.shift}if(!proto.removeLast){proto.removeLast=proto.pop}proto.origReplace=proto.replace;proto.replace=function(e,c){var a,b,d;if(Array.isArray(e)){a=this.clone();d=e.length;c=e.equalize(c);for(b=0;b<d;b++){a=a.origReplace(e[b],c[b])}return a}else{return this.origReplace(e,c)}};if(!proto.replaceAll){proto.replaceAll=function(d,b,c){var k=[],f=0,h=this.length,e,a,g;if(Array.isArray(d)){a=d.length;b=d.equalize(b);for(f;f<h;f++){g=this[f];for(e=0;e<a;e++){if(d[e]==g){k.push(b[e])}else{if(c&&Array.isArray(g)){k.push(g.replaceAll(d[e],b[e],true))}else{k.push(g)}}}}}else{for(f;f<h;f++){g=this[f];if(d==g){k.push(b)}else{if(c&&Array.isArray(g)){k.push(g.replaceAll(d,b,true))}else{k.push(g)}}}}return k}}if(!proto.replaceAt){proto.replaceAt=function(b,a){return this.splice(a,1,b)}}if(!proto.unique){proto.unique=function(){var b=[],a=this,d=a.length,c;for(;d--;){c=a[d];if(b.indexOf(c)<0){b.unshift(c)}}return b}}Array.prototype.toQueryString=function(){var e="",a,d,b=this.length,c=arguments.length?arguments[0]:null;for(a=0;a<b;a++){if(isFunction(this[a])){continue}if(e!=""){e+="&"}d=c?c+"["+a+"]":a+"";if(isObject(this[a])){e+=this[a].toQueryString?this[a].toQueryString(d):Object.toQueryString(this[a],d)}else{e+=d+"="+encodeURI(this[a])}}return e};Object.toQueryString=function(d){var a,e="",c,b=arguments.length>1?arguments[1]:null;for(a in d){if(isFunction(d[a])||d[a]==d){continue}if(e!=""){e+="&"}c=b?b+"["+encodeURI(a)+"]":encodeURI(a);if(d[a]){if(isFunction(d[a].toQueryString)){e+=d[a].toQueryString(c)}else{e+=Object.toQueryString(d[a],c)}}else{e+=c+"="}}return e};String.prototype.toQueryString=Number.prototype.toQueryString=Boolean.prototype.toQueryString=function(a){return a+"="+encodeURI(this.valueOf())};String.prototype.parseQueryString=function(){var h=this,g={},f,d,e,c,a,b;if(h[0]=="?"){h=h.substring(1)}f=h.split("&");d=f.length;while(d-->0){e=f[d].split("=");e[0]=e[0].replaceAll("]","").split("[");a=e[0].length;if(a>1){if(!g[e[0][0]]){g[e[0][0]]={}}g[e[0][0]][e[0][1]]=e[1]}else{g[e[0][0]]=e[1]}}return g};window.toQueryString=function(a){if(a){if(a.toQueryString){return a.toQueryString()}else{if(isObject(a)){return Object.toQueryString(a)}}}return""};OJ.extendClass("OjEvent",[OjObject],{_g_p_:{bubbles:null,cancelable:null,currentTarget:null,isCanceled:false,phase:0,target:null,type:null},_c:function(a){this._s(OjObject,"_c",[]);this._processArguments(arguments,{_type:a,_bubbles:false,_cancelable:false})},cancel:function(){if(this._cancelable){this._isCanceled=true}},clone:function(){var a=this._s(OjObject,"clone",arguments);a._bubbles=this.bubbles;a._cancelable=this.cancelable;a._type=this.type;return a},cloneWithChanges:function(c){var b=this.clone(),a;for(a in c){if(a!="currentTarget"||a!="phase"||a!="target"){b["_"+a]=c[a]}}return b}},{ADDED:"onAdded",OPEN:"onOpen",CANCEL:"onCancel",CHANGE:"onChange",CLOSE:"onClose",COMPLETE:"onComplete",DESTROY:"onDestroy",FAIL:"onFail",HIDE:"onHide",INIT:"onInit",LOAD:"onLoad",OK:"onOk",READY:"onReady",REMOVED:"onRemoved",SHOW:"onShow",SUBMIT:"onSubmit",UNLOAD:"onUnload",ADDED_TO_DISPLAY:"onAddToDisplay",REMOVED_FROM_DISPLAY:"onRemovedFromDisplay"});OJ.extendManager("EventManager","OjEventManager",[OjObject],{_events:{},_index:{},_c:function(){this._s(OjObject,"_c",[]);var c,d,b=function(f){if(f&&f.type=="DOMContentLoaded"){a()}else{if(f&&f.type=="load"){a()}else{if(document.readyState){if((/loaded|complete/).test(document.readyState)){a()}else{if(!!document.documentElement.doScroll){try{c||document.documentElement.doScroll("left")}catch(f){return}a()}}}}}},a=function(){if(!c){c=true;if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",b,false)}clearInterval(d);document.onreadystatechange=window.onload=d=null;window.onDomReady()}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,false)}document.onreadystatechange=b;d=setInterval(b,5);window.onload=b;return this},_dispatchEvents:function(a,f,h){if(a.isCanceled){return}if(h==window){h=OJ}var d=this._events,c=h.oj_id,g,e,b;a._currentTarget=h;if(d[f]&&d[f][c]){e=d[f][c];for(b in e){g=e[b];if(g&&isFunction(g.callback)){g.callback.call(g.context,a)}}}},_getIndex:function(b,c){var a=this._index;if(!a[b]){a[b]={}}a[b][c[0]+":"+c[1]+":"+c[3]]=c},addEventListener:function(g,e,d,h){h=isString(h)?d[h]:h;var c=this._events,b=g.oj_id,f=d==window?"window":d.oj_id,a=f+":"+(h.guid?h.guid:h.guid=OJ.guid());if(!c[e]){c[e]={}}if(!c[e][b]){c[e][g.oj_id]={}}if(!c[e][b][a]){c[e][b][a]={callback:h,context:d};this._getIndex(b,[b,e,f,a]);this._getIndex(f,[b,e,f,a])}},dispatchEvent:function(d,a){var c=a.type,b;a._target=a._target?a._target:d;a._currentTarget=d;this._dispatchEvents(a,c,d);if(a._bubbles){b=d;while(b&&(b=b.parent)){this._dispatchEvents(a,c,b)}if(b&&b!=OJ){this._dispatchEvents(a,c,OJ)}}},hasEventListener:function(c,b){var a=this._events[b];return a&&a[c.oj_id]},hasEventListeners:function(a){return this._events[a]?true:false},_removeEventListener:function(e,f,g,b){var d=this._events,a=this._index,c=e+":"+f+":"+b;if(d[f]&&d[f][e]&&d[f][e][b]){delete d[f][e][b];if(isEmptyObject(d[f][e])){delete d[f][e];if(isEmptyObject(d[f])){delete d[f]}}}if(a[e]&&a[e][c]){delete a[e][c];if(isEmptyObject(a[e])){delete a[e]}}if(a[g]&&a[g][c]){delete a[g][a];if(isEmptyObject(a[g])){delete a[g]}}},removeAllListeners:function(d){var c=d.oj_id,b,a;if(b=this._index[c]){for(a in b){this._removeEventListener.apply(this,b[a])}delete this._index[c]}},removeEventListener:function(g,e,d,h){var c=this._events,b=g.oj_id,f=d.oj_id,a;if(c[e]){if(c[e][b]){if(h=isString(h)?d[h]:h){a=f+":"+h.guid;if(c[e][b][a]){this._removeEventListener(b,e,f,a)}}}}}});OJ.extendClass("OjTextEvent",[OjEvent],{_g_p_:{text:""},_c:function(c){var b,a=b=false,d=arguments.length;if(d>1){this._text=arguments[1];if(d>2){a=arguments[2];if(d>3){b=arguments[3]}}}this._s(OjEvent,"_c",[c,a,b])}},{TEXT:"onText"});OJ.extendClass("OjErrorEvent",[OjTextEvent],{_g_p_:{code:0},_c:function(b){var a=Array.array(arguments),c=a.length;if(c>2){this._code=a[2];a.removeAt(2)}this._s(OjTextEvent,"_c",a)}},{ERROR:"onError"});OJ.extendClass("OjUrl",[OjObject],{_p_:{protocol:null,hashParams:null,host:null,port:null,path:null,query:null,queryParams:null,hash:null,source:null},_setter:function(e,c,b,d){var a=arguments;if(!this._cache[e]||this["_"+e]!=b){this["_"+e]=b;this._cache[e]="";if(isEmpty(b)){this["_"+e]=a.length>4?a[4]:null}else{this._cache[e]=c+b+d}}},_refresh:function(a){if(a===false){this._dirty.query=true;this._dirty.hash=true}this.query;this.hash},_c:function(a){this._s(OjObject,"_c",[]);this._dirty={};this._cache={};this.source=a?a:""},clone:function(){return new OjUrl(this.toString())},toString:function(){this._refresh();return this._cache.protocol+this._cache.host+this._cache.port+this._cache.path+this._cache.query+this._cache.hash},"=protocol":function(a){this._setter("protocol","",a.replaceAll([":","/"],""),"://","http")},"=host":function(a){this._setter("host","",a,"")},"=port":function(a){this._setter("port",":",a,"")},"=path":function(a){if(a&&a.charAt(0)!="/"){a="/"+a}this._setter("path","",a,"","/")},".query":function(){if(this._dirty.query){this._query=Object.toQueryString(this._queryParams);delete this._dirty.query;delete this._dirty.queryParams}return this._query},"=query":function(a){if(isString(a)&&a.charAt(0)=="?"){a=a.substr(1)}this._setter("query","?",a,"");this._dirty.queryParams=true;this.queryParams},".queryParams":function(){if(this._dirty.queryParams){this._queryParams=this._query?this._query.parseQueryString():{};delete this._dirty.queryParams}return this._queryParams},"=queryParams":function(a){this._queryParams=a;this._dirty.query=true},getQueryParam:function(a){this.queryParams;return this._queryParams[a]},setQueryParam:function(a,b){this.queryParams;if(isSet(b)){this._queryParams[a]=b}else{delete this._queryParams[a]}this._dirty.query=true},".hash":function(){if(this._dirty.hash){this._hash=Object.toQueryString(this.hashParams);delete this._dirty.hash}return this._hash},"=hash":function(a){if(a&&a.charAt(0)=="#"){a=a.substr(1)}this._setter("hash","#",a,"");delete this._dirty.hash;this._dirty.hashParams=true;this.hashParams},".hashParams":function(){if(this._dirty.hashParams){this._hashParams={};if(this._hash){this._hashParams=this._hash.parseQueryString()}delete this._dirty.hashParams}return this._hashParams},"=hashParams":function(a){this._hashParams=a;this._dirty.hash=true;delete this._dirty.hash_params},getHashParam:function(a){this.hashParams;return this._hashParams[a]},setHashParam:function(a,b){this.hashParams;if(isSet(b)){this._hashParams[a]=b}else{delete this._hashParams[a]}this._dirty.hash=true},".source":function(){return this.toString()},"=source":function(c){if(isObjective(c)){c=c.toString()}this._queryParams={};this._hashParams={};this._cache={};this._dirty={};var b=document.createElement("a");b.href=c;this.protocol=b.protocol;this.host=b.hostname;this.port=b.port;this.path=b.pathname;this.query=b.search;this.hash=b.hash;this._refresh()}},{url:function(a){if(a){if(isString(a)){return new OjUrl(a)}if(isObject(a)&&a.is("OjUrl")){return a}return new OjUrl()}return null}});OJ.extendClass("OjUrlRequest",[OjUrl],{_p_:{contentType:null,data:null,headers:null,method:"get"},_ignores_cache:false,_is_multipart:false,_c:function(){this._s(OjUrl,"_c",[]);this._headers={};this._processArguments(arguments,{source:undefined,data:undefined,contentType:undefined,method:undefined})},_search_for_files:function(b){var a;if(isObject(b)){if(b instanceof File){this._is_multipart=true}else{for(a in b){if(this._search_for_files(b[a])){break}}}}else{if(isArray(b)){for(a=b.length;a--;){if(this._search_for_files(b[a])){break}}}}return this._is_multipart},ignoresCache:function(){if(arguments.length){this._ignores_cache=arguments[0]}return this._ignores_cache&&!this._headers["cache-control"]},isDelete:function(){return this._method==OjUrlRequest.DELETE},isGet:function(){return this._method==OjUrlRequest.GET},isHead:function(){return this._method==OjUrlRequest.HEAD},isMultiPart:function(){return this._is_multipart||this.contentType.indexOf(OjUrlRequest.MULTIPART)>-1},isOptions:function(){return this._method==OjUrlRequest.OPTIONS},isPost:function(){return this._method==OjUrlRequest.POST},isPut:function(){return this._method==OjUrlRequest.PUT},isSafe:function(){return this.isGet()||this.isHead()||this.isOptions()},isUnsafe:function(){return !this.isSafe()},getHeader:function(a){return this._headers[a]},setHeader:function(a,b){if(a.toLowerCase()=="content-type"){this.contentType=b}else{this._headers[a]=b}},unsetHeader:function(a){if(this._headers){delete this._headers[a]}},".contentType":function(){return this._headers["Content-Type"]?this._headers["Content-Type"]:OjUrlRequest.TEXT},"=contentType":function(a){if(this._is_multipart||a==OjUrlRequest.MULTIPART){a=OjUrlRequest.MULTIPART;this.setMethod(this.method)}this._headers["Content-Type"]=a},".headers":function(){return Object.clone(this._headers)},"=headers":function(b){this._headers={};if(b){var a;for(a in b){this.setHeader(a,b[a])}}},"=data":function(a){this._data=a;if(!this._headers["Content-Type"]){this.contentType=OjUrlRequest.QUERY_STRING}this._is_multipart=false;if(a&&this._search_for_files(a)){this.contentType=this.contentType}},"=Method":function(a){if(this.isMultiPart()&&!(a==OjUrlRequest.POST||a==OjUrlRequest.PUT)){a=OjUrlRequest.POST}this._method=a}},{urlRequest:function(a){if(isString(a)){return new OjUrlRequest(a)}if(isObject(a)&&a.is("OjUrlRequest")){return a}return new OjUrlRequest()},DELETE:"delete",GET:"get",HEAD:"head",OPTIONS:"options",POST:"post",PUT:"put",CSS:"text/css",QUERY_STRING:"application/x-www-form-urlencoded",HTML:"text/html",JS:"text/javascript",JSON:"application/json",MULTIPART:"multipart/form-data",TEXT:"text/plain",XML:"text/xml"});OJ.extendClass("OjXml",[OjObject],{_p_:{xml:null},_c:function(a){this._s(OjObject,"_c",[]);this.xml=a},attr:function(a){var b=arguments;if(b.length>1){this.xml.setAttribute(a,b[1]);return val}return this.xml.getAttribute(a)},query:function(c){var d=arguments,f=0,g,h,b=d.length>1?d[1]:0,a,e=[];if(!window.DOMParser){e=this._xml.selectNodes(c);g=e.length;for(;f<g&&(!b||f<b);f++){e[f]=new OjXml(e[f])}return b==1?(g?e[0]:null):e.slice(0,b)}h=(this._xml.ownerDocument?this._xml.ownerDocument:this._xml).evaluate("."+c,this._xml,null,XPathResult.ANY_TYPE,null);if(h.resultType==XPathResult.ORDERED_NODE_ITERATOR_TYPE||h.resultType==XPathResult.UNORDERED_NODE_ITERATOR_TYPE){for(;(a=h.iterateNext())&&(!b||f++<b);){e.append(new OjXml(a))}return b==1?(e.length?e[0]:null):e}if(h.resultType==XPathResult.STRING_TYPE){return h.stringValue}if(h.resultType==XPathResult.NUMBER_TYPE){return h.numberValue}if(h.resultType==XPathResult.BOOLEAN_TYPE){return h.booleanValue}return null},value:function(){var b=arguments,a;if(b.length){a=this.query("/"+b[0],1);return a?a.value():null}return this._xml.textContent},"=xml":function(a){this._xml=toXml(a)}},{xml:function(a){if(isXml(a)){return new OjXml(a)}if(isString(a)){return new OjXml(toXml(a))}return isObjective(a)&&a.is("OjXml")?a:null}});OJ.extendClass("OjHttpStatusEvent",[OjEvent],{_g_p_:{status:null},_c:function(d){var b=false,a=false,c=arguments,e=c.length;if(e>1){this._status=c[1];if(e>2){b=c[2];if(e>3){a=c[3]}}}this._s(OjEvent,"_c",[d,b,a])}},{HTTP_STATUS:"onHttpStatus"});OJ.extendClass("OjIoErrorEvent",[OjErrorEvent],{},{IO_ERROR:"onIoError",IO_TIMEOUT:"onIoTimeout"});OJ.extendClass("OjProgressEvent",[OjEvent],{_g_p_:{progress:0},_c:function(c){var b,a=b=false,d=arguments.length;if(d>1){this._progress=arguments[1];if(d>2){a=arguments[2];if(d>3){b=arguments[3]}}}this._s(OjEvent,"_c",[c,a,b])}},{PROGRESS:"onProgress"});OJ.extendClass("OjCacheObject",[OjObject],{_p_:{created:null,data:null,expiration:null},_c:function(){this._s(OjObject,"_c",[]);this.created=new Date();var a=arguments,b=a.length;if(b){this.data=a[0];if(b>1){this.expiration=a[1]}}},exportData:function(){var a=this._s(OjObject,"exportData",arguments);a.created=this.created;a.data=this.data?OjObject.exportData(this.data):null;a.expiration=this.expiration;return a},importData:function(a){if(!a){a={created:null,data:null,expiration:null}}this.created=a.created;this.data=OjObject.importData(a.data);this.expiration=a.expiration},"=expiration":function(a){if(this._expiration==a){return}if(!isDate(a)){this._expiration=new Date();this._expiration.setSeconds(this._expiration.getSeconds()+a)}else{this._expiration=a}}});OJ.extendClass("OjCachePolicy",[OjObject],{_g_p_:{action:1,lifespan:null,url:null},_c:function(b){this._s(OjObject,"_c",arguments);var a=arguments,c=a.length;this._url=b;if(c>1){this._action=a[1];if(c>2){this._lifespan=a[2]}}}},{ALWAYS:1,NEVER:0,OFFLINE:2});OJ.extendManager("CacheManager","OjCacheManager",[OjActionable],{MINUTE:60,HOUR:3600,DAY:86400,WEEK:604800,MONTH:2419200,YEAR:29030400,FOREVER:0,_cache_size:0,_localStorage:null,_policies:null,_getCached:null,_setCached:null,_unsetCached:null,_c:function(){this._s(OjActionable,"_c",[]);try{this._localStorage="localStorage" in window&&!isNull(window.localStorage)?window.localStorage:null}catch(a){}if(this._localStorage){this.getData=this.getLocalData;this.setData=this.setLocalData;this.unsetData=this.unsetLocalData}else{this.getData=this.getCookie;this.setData=this.setCookie;this.unsetData=this.unsetCookie}this._policies={}},_getCookie:function(b){var c=";"+document.cookie;var a=c.indexOf(";"+b+"=");if(a==-1||isEmpty(b)){return undefined}var d=c.indexOf(";",a+1);if(d==-1){d=theCookie.length}return this._getData(decodeURIComponent(c.substring(a+b.length+2,d)))},_getData:function(c){var b;if(!c||!(b=c.parseJson())){return null}if(isObject(b)){var a=b._class_name;if(isUndefined(a)||(!isNull(a)&&a!="undefined"&&a!="boolean"&&a!="number"&&a!="string")){return OjObject.importData(b)}if(!a){return null}if(a=="undefined"){return undefined}return b.value}return b},_getLocalData:function(a){return this._getData(this._localStorage.getItem(a))},_isDataExpired:function(a){var b;if(isObjective(a)&&a.is(OjCacheObject)&&(b=a.expiration)&&b<new Date()){return true}return false},_processDefault:function(a){return a.length>1?a[1]:null},_setCookie:function(b,c){var a=new Date();var d=arguments.length>2?arguments[2]:this.FOREVER;if(isNull(d)||d==0){d=this.YEAR}a.setTime((new Date()).getTime()+d);document.cookie=b+"="+encodeURIComponent(this._setData(c))+";expires="+a.toGMTString()},_setData:function(a){if(isObject(a)){a=isObjective(a)?a.exportData():OjObject.exportData(a)}else{a={_class_name:typeof a,value:a}}return toJson(a)},_setLocalData:function(a,b){this._localStorage[a]=this._setData(b)},getCacheUrlRequestData:function(a){if(isEmpty(a=a.toString())){return null}return this.getData(a)},getCacheUrlRequestPolicy:function(a){if(isEmpty(a=a.toString())){return null}var b;for(b in this._policies){if(a.match(b)){return this._policies[b]}}return null},setCacheUrlRequestData:function(a,b){if(isEmpty(a=a.toString())){return null}var c=arguments.length>2?arguments[2]:this.getCacheUrlRequestPolicy(a);CacheManager.setData(a,b,c?c.lifespan:null)},setCacheUrlRequestPolicy:function(a){this._policies[a.url.replace(/\*/g,"[^ ]*")]=a},unsetCacheUrlRequestPolicy:function(c){var a;if(isObjective(c)&&c.is("OjCachePolicy")){a=c.url.toString()}else{a=c.toString()}try{delete this._policies[a.replace(/\*/g,"[^ ]*")]}catch(b){}},unsetCacheUrlRequestData:function(a){CacheManager.unsetData(a)},getData:function(a){throw new Error("No getData() defined.");return},setData:function(a,b){throw new Error("No setData() defined.");return;this._setCachedData(a,this._setData.apply(this,[].slice.call(arguments,1)))},unsetData:function(a){throw new Error("No unsetData() defined.")},getCookie:function(a){var b=this._getCookie(a);return b?b.data:this._processDefault(arguments)},setCookie:function(a,c){var b=arguments.length;this._setCookie(a,new OjCacheObject(c,b>2?arguments[2]:null))},unsetCookie:function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},getLocalData:function(a){var b=this._getLocalData(a);if(this._isDataExpired(b)){this.unsetLocalData(a);return null}return b?b.data:this._processDefault(arguments)},setLocalData:function(b,d){var a=arguments,c=a.length;this._setLocalData(b,new OjCacheObject(d,c>2?a[2]:null))},unsetLocalData:function(a){delete this._localStorage[a]}});OJ.extendClass("OjUrlLoader",[OjActionable],{_p_:{async:false,data:null,callback:null,contentType:OjUrlRequest.QUERY_STRING,request:null,timeout:30000},_is_xdomain:false,_policy:null,_url:null,_xhr:null,_c:function(){this._s(OjActionable,"_c",[]);this._processArguments(arguments,{request:undefined,async:undefined})},_d:function(){if(this._xhr){if(this._is_xdomain){this._xhr.onload=null;this._xhr.onerror=null}else{this._xhr.onreadystatechange=null}this._xhr.ontimeout=null}this._xhr=null;this._request=null;return this._s(OjActionable,"_d",arguments)},_calc_form_namespace:function(b,a){return isEmpty(b)?a:b+"["+a+"]"},_load:function(){var c,d=this._request.method;this._url=this._request.clone();if(d==OjUrlRequest.GET&&(c=this._request.data)){var b;for(b in c){this._url.setQueryParam(b,c[b])}}this._request.source=this._url;if(!this._request.ignoresCache()){var a=this._url.toString();this._policy=CacheManager.getCacheUrlRequestPolicy(a);if(this._policy&&this._policy.action==OjCachePolicy.ALWAYS&&(this._data=CacheManager.getCacheUrlRequestData(a,this._policy))){this.dispatchEvent(new OjEvent(OjEvent.COMPLETE));return}}if(this.$.USE_ACTIVEX&&this._request.host!=HistoryManager.get().host){this._xhr=new window.XDomainRequest();this._is_xdomain=true}else{this._xhr=new window.XMLHttpRequest();this._is_xdomain=false}this._xhrOpen();this._xhrFormat();this._xhrEvents();this._xhrSend()},_process_data:function(a){return a},_process_form_data:function(d,e,b){if(isArray(e)||e instanceof FileList){for(var c=e.length;c--;){this._process_form_data(d,e[c],this._calc_form_namespace(b,c))}}else{if(!(e instanceof File)&&isObject(e)){var a;for(a in e){this._process_form_data(d,e[a],this._calc_form_namespace(b,a))}}else{d.append(b,e)}}return d},_process_json_data:function(a){return toJson(a)},_process_multipart_data:function(a){if(a instanceof FormData){return a}return this._process_form_data(new FormData(),a)},_process_query_data:function(a){return toQueryString(a)},_process_xml_data:function(a){return toXml(a)},_xhrEvents:function(){this.dispatchEvent(new OjEvent(OjEvent.OPEN));if(this._is_xdomain){this._xhr.onload=this._onLoad.bind(this);this._xhr.onerror=this._onError.bind(this)}else{this._xhr.onreadystatechange=this._onReadyStateChange.bind(this)}this._xhr.ontimeout=this._onTimeout.bind(this)},_xhrFormat:function(){var a,c=this._request.headers;if(c&&!this._is_xdomain){for(a in c){if(a.toLowerCase()=="content-type"&&(this._request.isSafe()||this._request.isMultiPart())){continue}this._xhr.setRequestHeader(a,c[a])}}if(this._policy&&!this._is_xdomain){if(this._policy.action==OjCachePolicy.ALWAYS){var b=this._policy.lifespan;if(!b){b=CacheManager.YEAR}this._xhr.setRequestHeader("cache-control","max-age="+b)}else{this._xhr.setRequestHeader("cache-control","no-cache")}}},_xhrOpen:function(){this._xhr.open(this._request.method,this._url,this._async);if(this._async&&!this._is_xdomain){this._xhr.timeout=this._timeout}else{}},_xhrSend:function(){var b;if(this._request.method!=OjUrlRequest.GET){if(b=this._request.data){var a=this._request.contentType;if(a==OjUrlRequest.JSON){b=this._process_json_data(b)}else{if(a==OjUrlRequest.XML){b=this._process_xml_data(b)}else{if(a==OjUrlRequest.QUERY_STRING){b=this._process_query_data(b)}else{if(a==OjUrlRequest.MULTIPART){b=this._process_multipart_data(b)}else{b=this._process_data(b)}}}}}}if(this._is_xdomain){var c=this._xhr;setTimeout(function(){c.send(b)},0)}else{this._xhr.send(b)}},_onError:function(){if(!this._xhr){return}OJ.destroy(this._timer);var a=new OjIoErrorEvent(OjIoErrorEvent.IO_ERROR,this._xhr.statusText,status);this.dispatchEvent(a);this.dispatchEvent(new OjEvent(OjEvent.FAIL));if(this._callback){this._callback(null,a)}},_onLoad:function(){if(!this._xhr){return}OJ.destroy(this._timer);if(this._is_xdomain){this._contentType=this._xhr.contentType}if(this._contentType){this._contentType=this._contentType.toLowerCase()}else{this._contentType=OjUrlRequest.TEXT}if(this._contentType.indexOf("/xml")!=-1){this._contentType=OjUrlRequest.XML;this.data=this._xhr.responseXML}else{if(this._contentType.indexOf("/json")!=-1){this._contentType=OjUrlRequest.JSON}else{if(this._contentType==OjUrlRequest.QUERY_STRING){this._contentType=OjUrlRequest.QUERY_STRING}else{this._contentType=OjUrlRequest.TEXT}}this.data=this._xhr.responseText}this.dispatchEvent(new OjEvent(OjEvent.COMPLETE));if(this._callback){this._callback(this.data,null)}},_onReadyStateChange:function(){if(!this._xhr){return}var a=this._xhr.status,b=this._xhr.readyState;this.dispatchEvent(new OjHttpStatusEvent(OjHttpStatusEvent.HTTP_STATUS,a));if(a>199&&a<300&&b==4){this._contentType=this.getResponseHeader("Content-Type");this._onLoad()}else{if((!a&&b==4)||a>399){this._onError()}else{this.dispatchEvent(new OjProgressEvent(OjProgressEvent.PROGRESS))}}},_onTimeout:function(a){if(this._xhr){this._xhr.abort()}this.dispatchEvent(new OjIoErrorEvent(OjIoErrorEvent.IO_TIMEOUT));this.dispatchEvent(new OjEvent(OjEvent.FAIL))},cancel:function(){if(this._xhr){this._xhr.abort();this._xhr=null}},load:function(a){if(a){this.callback=a}this._load();return this._data},"=data":function(a){this._data=null;if(a){if(this._contentType.indexOf("/json")>-1){this._data=a.parseJson()}else{if(this._contentType.indexOf("/xml")>-1){this._data=OjXml.xml(a)}else{if(this._contentType==OjUrlRequest.QUERY_STRING){this._data=a.parseQueryString()}else{this._data=a}}}}if(this.policy&&this.policy.action!=OjCachePolicy.NEVER){CacheManager.setCacheUrlRequestData(this.request,this.data,this.policy)}},getResponseHeader:function(a){return this._xhr.getResponseHeader(a)}},{USE_ACTIVEX:(window.XDomainRequest||window.ActiveXObject)});OJ.extendClass("OjElmArray",[OjArray],{push:function(){throw"OjElmArray is immutable."},splice:function(){throw"OjElmArray is immutable."},getItemAt:function(a){return OjElement.element(this._items[a])},indexOf:function(b){if(isObjective(b)&&b.is("OjElement")){b=b.dom}for(var a in this._items){if(this._items[a]==b){return parseInt(a)}}return -1},move:function(b,a){throw"OjElmArray is immutable."},removeAt:function(a){throw"OjElmArray is immutable."},replaceAt:function(a,b){throw"OjElmArray is immutable."},reverse:function(){},setItemAt:function(b,a){throw"OjElmArray is immutable."},sort:function(){},"=items":function(a){this._items=a?a:[]}});OJ.extendClass("OjElement",[OjActionable],{_p_:{parent:null},_get_props:{dom:null,inDom:false},_draggable:false,_dragX:0,_dragY:0,_did_drag:false,_c:function(b,a){this._s(OjActionable,"_c",[]);this._setDom(b?b:OjElement.elm("div"),a);OjElement.register(this)},_d:function(){OjElement.unregister(this);this.parent=null;if(this._dom){delete this._dom.ojProxy;this._dom=this._proxy=null}return this._s(OjActionable,"_d",arguments)},_setDom:function(a){this._setProxy(this._dom=a);this._dom.id=this.id},_setProxy:function(a){if(this._proxy){this._proxy.ojProxy=null}(this._proxy=a).ojProxy=this.id},_getEventProxy:function(){if(this._proxy==document.body){return window}return this._proxy},_setIsDisplayed:function(d){var b=this,c=b.dispatchEvent,a=OjEvent;if(b._is_displayed==d){return}if(b._is_displayed=d){b.dispatchEvent(new a(a.ADDED_TO_DISPLAY))}else{b.dispatchEvent(new a(a.REMOVED_FROM_DISPLAY))}},hasDomElement:function(a){return OjElement.hasDomElement(this._dom,a)},query:function(a){return new OjElmArray(this._dom.querySelectorAll(a))},".dom":function(){return this._dom},".inDom":function(){var a=this._dom;return a.ownerDocument&&isObject(a.ownerDocument)&&a.parentNode?true:false},".parent":function(){return this._dom?OjElement.element(this._dom.parentNode):null},"=parent":function(a){if(a){a.appendChild(this)}else{if(a=this.parent){a.removeChild(this)}}},".parentComponent":function(){if(!this._parentComponent){this._parentComponent=OjElement.parentComponent(this._dom.parentNode)}return this._parentComponent}},{_elms:{},byId:function(c){var a=this._elms,b;if(a[c]){return a[c]}return(b=document.getElementById(c))?a[b.id]:null},byPoint:function(a,c){var b=document.elementFromPoint(a,c);return b?this.element(b):null},elm:function(a){return document.createElement(a)},element:function(a){if(!a){return null}if(isDomElement(a)){return this.isTextNode(a)?new OjTextElement(a):this.byId(a.id)}if(isObjective(a)){return a}return a==window?OJ:new OjStyleElement(a)},hasDomElement:function(a,b){if(a==b){return true}while((b=b.parentNode)){if(b==a){return true}}return false},isCommentNode:function(a){return a.nodeName.toLowerCase()=="#comment"},isTextNode:function(a){return a.nodeName.toLowerCase()=="#text"},parentComponent:function(b){if(isElement(b)){b=b._dom}var a;while(b){a=b.parentNode;if(a&&(b=this.element(a))&&isComponent(b)){return b}b=a}return null},register:function(a){this._elms[a.id]=a},unregister:function(a){delete this._elms[a.id]}});OJ.extendClass("OjRect",[OjObject],{_p_:{top:0,left:0,width:0,height:0},_g_p_:{bottom:0,right:0},_c:function(){this._s(OjObject,"_c",[]);this._processArguments(arguments,{left:0,top:0,width:0,height:0})},hitTestPoint:function(a,b){return a>=this._left&&a<=this._right&&b>=this._top&&b<=this._bottom},hitTestRect:function(a){return(a._top>=this._top&&a._top<=this._bottom&&a._left>=this._left&&a._left<=this._right)||(a._top>=this._top&&a._top<=this._bottom&&a._right>=this._left&&a._right<=this._right)||(a._bottom>=this._top&&a._bottom<=this._bottom&&a._left>=this._left&&a._left<=this._right)||(a._bottom>=this._top&&a._bottom<=this._bottom&&a._right>=this._left&&a._right<=this._right)},"=top":function(a){this._bottom=(this._top=a)+this._height},"=left":function(a){this._right=(this._left=a)+this._width},"=width":function(a){this._right=(this._width=a)+this._left},"=height":function(a){this._bottom=(this._height=a)+this._top}});OJ.extendClass("OjCssTranslate",[OjObject],{_p_:{x:0,unitX:OJ.dim_unit,unitY:OJ.dim_unit,y:0},_c:function(){var a=arguments,b=a.length;this._s(OjObject,"_c",[]);if(b){this.x=a[0];if(b>1){this.y=a[1];if(b>2){this.unitX=a[2];if(b>3){this.unitY=a[3]}}}}},clone:function(){var a=this._s(OjObject,"clone",arguments);a._x=this._x;a._unitX=this._unitX;a._unitY=this._unitY;a._y=this._y;return a},isEqualTo:function(a){return a&&a._x==this._x&&a._unitX==this._unitX&&a._unitY==this._unitY&&a._y==this._y},toString:function(){return !this._x&&!this._y?"":String(this._x)+this._unitX+", "+String(this._y)+this._unitY}});OJ.extendClass("OjDomEvent",[OjEvent],{},{normalizeDomEvent:function(a){if(!a){a=window.event}a=OJ.merge({},a);if(a.clientX||a.clientY){a.pageX=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;a.pageY=a.clientY+document.body.scrollTop+document.documentElement.scrollTop}if(a.which){a.rightClick=a.which==3}else{if(a.button){a.rightClick=a.button==2}}return a},convertDomEvent:function(a){a=OjDomEvent.normalizeDomEvent(a);return new OjDomEvent(a.type,true,true)},PRESS:"click",DOUBLE_PRESS:"dblclick",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_UP:"mouseup",MOUSE_WHEEL:"mousewheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",FOCUS_IN:"focus",FOCUS_OUT:"blur",CHANGE:"change",SCROLL:"scroll",TOUCH_CANCEL:"touchcancel",TOUCH_END:"touchend",TOUCH_LEAVE:"touchleave",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",ORIENTATION_CHANGE:"orientationchange"});OJ.extendClass("OjUiEvent",[OjDomEvent],{_g_p_:{pageX:NaN,pageY:NaN},_c:function(b){var a=Array.array(arguments),c=a.length;if(c>1){this._pageX=a.removeAt(1)[0];if(c>2){this._pageY=a.removeAt(1)[0]}}this._s(OjDomEvent,"_c",a)},clone:function(){var a=this._s(OjDomEvent,"clone",arguments);a._pageX=this._pageX;a._pageY=this._pageY;return a}},{_evt_map:{click:"onPress",dblclick:"onDoublePress",mousedown:"onDown",mousemove:"onMove",mouseover:"onOver",mouseout:"onOut",mouseup:"onUp",mousewheel:"onWheel"},convertDomEvent:function(a){a=OjDomEvent.normalizeDomEvent(a);var c=this._evt_map[a.type];if(c==OjUiEvent.PRESS){}var b=new OjUiEvent(c,a.pageX,a.pageY,a.bubbles,a.cancelable);b._target=OjElement.element(a.target);b._currentTarget=OjElement.element(a.currentTarget);return b},isMouseEvent:function(b){var a;for(a in this._evt_map){if(b==this._evt_map[a]){return true}}return false},isMouseDomEvent:function(b){var a;for(a in this._evt_map){if(b==a){return true}}return false},PRESS:"onPress",DOUBLE_PRESS:"onDoublePress",DOWN:"onDown",MIDDLE_PRESS:"onMiddlePress",MOVE:"onMove",OVER:"onOver",OUT:"onOut",RIGHT_PRESS:"onRightPress",RIGHT_UP:"onRightUp",RIGHT_DOWN:"onRightDown",UP:"onUp",UP_OUTSIDE:"onUpOutside",WHEEL:"onWheel"});OJ.extendClass("OjDragEvent",[OjUiEvent],{_g_p_:{deltaX:0,deltaY:0,originX:0,originY:0},_c:function(d,b,a,e){var c=[].slice.call(arguments,4);c.unshift(d);this._s(OjUiEvent,"_c",c);this._deltaX=b;this._deltaY=a;this._pageX=e._pageX;this._pageY=e._pageY},clone:function(){var a=this._s(OjUiEvent,"clone",arguments);a._deltaX=this._deltaX;a._deltaY=this._deltaY;return a}},{isDragEvent:function(a){return a==OjDragEvent.DRAG||a==OjDragEvent.END||a==OjDragEvent.START},END:"onDragEnd",DRAG:"onDrag",START:"onDragStart"});OJ.extendClass("OjFocusEvent",[OjDomEvent],{},{convertDomEvent:function(a){var b;a=OjDomEvent.normalizeDomEvent(a);if(a.type==OjDomEvent.FOCUS_IN){b=OjFocusEvent.IN}else{if(a.type==OjDomEvent.FOCUS_OUT){b=OjFocusEvent.OUT}}return new OjFocusEvent(b,true,true)},isFocusEvent:function(a){return a==OjFocusEvent.IN||a==OjFocusEvent.OUT},isFocusDomEvent:function(a){return a==OjDomEvent.FOCUS_IN||a==OjDomEvent.FOCUS_OUT},IN:"onFocusIn",OUT:"onFocusOut"});OJ.extendClass("OjKeyboardEvent",[OjDomEvent],{},{convertDomEvent:function(a){var b;a=OjDomEvent.normalizeDomEvent(a);if(a.type==OjDomEvent.KEY_DOWN){b=OjKeyboardEvent.DOWN}else{if(a.type==OjDomEvent.KEY_PRESS){b=OjKeyboardEvent.PRESS}else{if(a.type==OjDomEvent.KEY_UP){b=OjKeyboardEvent.UP}}}return new OjKeyboardEvent(b,true,true)},isKeyboardEvent:function(a){return a==OjKeyboardEvent.DOWN||a==OjKeyboardEvent.PRESS||a==OjKeyboardEvent.UP},isKeyboardDomEvent:function(a){return a==OjDomEvent.KEY_DOWN||a==OjDomEvent.KEY_PRESS||a==OjDomEvent.KEY_UP},DOWN:"onKeyDown",PRESS:"onKeyPress",UP:"onKeyUp"});OJ.extendClass("OjScrollEvent",[OjDomEvent],{_g_p_:{scrollX:NaN,scrollY:NaN},_c:function(b,d,c){var a=Array.array(arguments).slice(3);a.unshift(b);this._s(OjDomEvent,"_c",a);this._scrollX=d;this._scrollY=c},clone:function(){var a=this._s(OjDomEvent,"clone",arguments);a._scrollX=this._scrollX;a._scrollY=this._scrollY;return a}},{convertDomEvent:function(a){var b;a=OjDomEvent.normalizeDomEvent(a);if(a.type=="scroll"){b="onScroll"}return new OjScrollEvent(b,a.target.scrollLeft,a.target.scrollTop,false,false)},isScrollEvent:function(a){return a=="onScroll"},isScrollDomEvent:function(a){return a=="scroll"},SCROLL:"onScroll"});OJ.extendClass("OjTouchEvent",[OjDomEvent],{_g_p_:{pageX:NaN,pageY:NaN},_c:function(b){var a=Array.array(arguments),c=a.length;if(c>1){this._pageX=a.removeAt(1)[0];if(c>2){this._pageY=a.removeAt(1)[0]}}this._s(OjDomEvent,"_c",a)},clone:function(){var a=this._s(OjDomEvent,"clone",arguments);a._pageX=this._pageX;a._pageY=this._pageY;return a}},{convertDomEvent:function(a){var c;a=OjDomEvent.normalizeDomEvent(a);if(a.type==OjDomEvent.TOUCH_MOVE){c=OjTouchEvent.MOVE}else{if(a.type==OjDomEvent.TOUCH_START){c=OjTouchEvent.START}else{if(a.type==OjDomEvent.TOUCH_END||a.type==OjDomEvent.TOUCH_CANCEL||a.type==OjDomEvent.TOUCH_LEAVE){c=OjTouchEvent.END}}}var b=new OjTouchEvent(c,a.changedTouches[0].pageX,a.changedTouches[0].pageY,a.bubbles,a.cancelable);b._target=OjElement.element(a.target);b._currentTarget=OjElement.element(a.currentTarget);return b},isTouchEvent:function(a){return a==OjTouchEvent.END||a==OjTouchEvent.MOVE||a==OjTouchEvent.START},isTouchDomEvent:function(a){return a==OjDomEvent.TOUCH_END||a==OjDomEvent.TOUCH_MOVE||a==OjDomEvent.TOUCH_START},START:"onTouchStart",MOVE:"onTouchMove",END:"onTouchEnd"});OJ.extendClass("OjTransformEvent",[OjEvent],{_g_p_:{deltaX:0,deltaY:0,pageX:0,pageY:0},_c:function(f,e,d,b,a){var c=[].slice.call(arguments,4);c.unshift(f);this._s(OjEvent,"_c",c);this._deltaX=b;this._deltaY=a;this._pageX=e;this._pageY=d},clone:function(){var a=this._s(OjEvent,"clone",arguments);a._deltaX=this._deltaX;a._deltaY=this._deltaY;a._pageX=this._pageX;a._pageY=this._pageY;return a}},{isTransformEvent:function(a){return a==OjTransformEvent.MOVE||a==OjTransformEvent.RESIZE},MOVE:"onMove",RESIZE:"onResize"});OJ.extendClass("OjStyleElement",[OjElement],{_p_:{alpha:null,backgroundColor:null,children:null,css:null,cssList:null,depth:null,hAlign:"l",height:null,id:null,innerHeight:null,innerWidth:null,name:null,origin:null,outerHeight:null,outerWidth:null,overflow:null,owner:null,pageRect:null,pageX:null,pageY:null,rect:null,rotation:null,scrollHeight:null,scrollWidth:null,scrollX:null,scrollY:null,text:null,translate:null,vAlign:"t",width:null,x:null,y:null},_g_p_:{dom:null,isVisible:null,numChildren:null},_alpha:1,_depth:0,_scrollable:false,_origin:"0px, 0px",_rotation:0,_translate:"0px, 0px",_compile_:function(b){var a=OjStyleElement;if(a.STYLE_MODE==a.STYLE_IE){this._getStyle=this._getStyleIe}else{if(a.STYLE_MODE==a.STYLE_BACKUP){this._getStyle=this._getStyleBackup}}b._style_funcs_.call(this,"margin","Margin");b._style_funcs_.call(this,"padding","Padding")},_style_funcs_:function(e,a){var f="get",d="set",b="Bottom",i="Left",c="Right",h="Top";this[f+a]=function(){return this._getStyler(e,arguments)};this[d+a]=function(g){this._setStyler(e,arguments)};this[f+a+b]=function(){return this[f+a](2)};this[d+a+b]=function(g){this[d+a](null,null,g,null)};this[f+a+i]=function(){return this[f+a](3)};this[d+a+i]=function(g){this[d+a](null,null,null,g)};this[f+a+c]=function(){return this[f+a](1)};this[d+a+c]=function(g){this[d+a](null,g,null,null)};this[f+a+h]=function(){return this[f+a](0)};this[d+a+h]=function(g){this[d+a](g,null,null,null)}},_c:function(e,d){if(e&&!e.nodeType){if(e==="body"||e==document||e==document.body){e=document.body}else{if(isString(e)){e=e.trim();if(e.charAt(0)=="<"&&e.slice(-1)==">"&&e.length>=5){var a=e.substr(0,6).toLowerCase(),b=a.substr(0,3),c;if(a=="<thead"||a=="<tbody"||a=="<tfoot"){c=OjElement.elm("table")}else{if(b=="<tr"){c=OjElement.elm("tbody")}else{if(b=="<td"||b=="<th"){c=OjElement.elm("tr")}else{c=OjElement.elm("div")}}}c.innerHTML=e;if(c.childNodes.length){c.removeChild(e=c.childNodes[0])}else{e=null}}else{}}}}this._s(OjElement,"_c",[e,d]);this.hAlign=this._hAlign;this.vAlign=this._vAlign},_d:function(){this._u("_move_timer","_scroll_timer");var a=arguments,c=a.length?a[0]:0,b=this.numChildren;for(;b--;){OJ.destroy(this.getChildAt(b),c)}this._owner=null;return this._s(OjElement,"_d",arguments)},_processAttribute:function(d,i,a){var c,j,h,f,k=i.nodeName,b=i.value;if(k.substr(0,3)=="on-"){c=b.split(".");j=c.length==1;h=a;if(!j){switch(c[0]){case"this":h=this;break;case"window":h=window;break}}this.addEventListener(OJ.attributeToFunc(k),h,j?c[0]:c[1]);return true}else{if(k=="id"){if(!isEmpty(b)&&b!="null"){this.id=b}}else{if(k=="var"){if(!isEmpty(b)&&a){(a[b]=this).addCss(b);this.owner=a}return true}else{if(k!="class"){c=OJ.attributeToProp(k);if(c in this){try{if(b==""){b=null}else{if(isNumeric(b)){b=parseFloat(b)}else{if((f=b.toLowerCase())=="true"){b=true}else{if(f=="false"){b=false}else{b=this._processReferenceValue(b,a)}}}}this[c]=b}catch(g){if(!a._t_vars_){a._t_vars_=[]}a._t_vars_.unshift({context:this,func:this[c],value:b})}return k.indexOf("-align")==-1}}}}}return false},_processAttributes:function(f,d){var b=f.attributes,c=["var","id"],e=c.length,a;for(;e--;){if((a=f.attributes[c[e]])&&this._processAttribute(f,a,d)){f.removeAttribute(c[e])}}f.removeAttribute("class-name");f.removeAttribute("class-path");for(e=b.length;e--;){a=b[e];if(this._processAttribute(f,a,d)){f.removeAttribute(a.nodeName)}}},_processChildren:function(d,b){if(!d){return}var a=d.childNodes,c=a.length;for(;c--;){if(!this._processChild(a[c],b)&&a[c]){d.removeChild(a[c])}}},_processChild:function(e,c){if(!e){return}var a=e.tagName;if(!a||OjElement.isTextNode(e)){return isEmpty(e.nodeValue)?null:new OjTextElement(e)}var f,d,b=e.getAttribute("class-name");a=a.toLowerCase();if(a=="script"||a=="link"){return false}if(!window[b]&&(d=e.getAttribute("class-path"))){}if(OjStyleElement.isComponentTag(a)){b=OjStyleElement.getTagComponent(a)}if(b){if(isFunction(b)){f=b(e)}else{f=new window[b]()}f._setDomSource(e,c)}else{f=new OjStyleElement(e,c)}return f},_processReferenceValue:function(g,c){var b=g.split("."),f=null,e=b.length,a=1,d;if(e>1){switch(b[0]){case"this":f=this;break;case"window":f=window;break;case"$":f=c;if(this!=c){throw"Template Reference Value Processing Deferred"}break}if(f){g=f;for(;a<e;a++){d=b[a];if(d.length>2&&d.slice(-2)=="()"){g=g[d.slice(0,-2)]()}else{g=g[d]}}}}return g},_processTemplateVars:function(){if(this._t_vars_){var c=this._t_vars_.length,b,a;for(;c--;){b=this._t_vars_[c];a=b.context;b.func.call(a,this._processReferenceValue(b.value,this))}this._u("_template_vars_")}},_setDom:function(b,a){this._s(OjElement,"_setDom",[b]);this._processAttributes(b,a);this._processChildren(b,a);this._processTemplateVars();if(!this._id){this.id=this._id_}},_setIsDisplayed:function(b){var c,d,a=this;if(a._is_displayed==b){return}a._s(OjElement,"_setIsDisplayed",arguments);for(c=a.numChildren;c--;){if(d=a.getChildAt(c)){d._setIsDisplayed(b)}}},_processEvent:function(a){if(OjElement.element(a.currentTarget)!=this||a.dispatched){return false}a.dispatched=true;return true},_onOjDomEvent:function(a){var b=OjElement.element(this);if(b&&b._processEvent(a)){b._onEvent(OjDomEvent.convertDomEvent(a))}},_onDomOjUiEvent:function(a){var b=OjElement.element(this);if(b&&b._processEvent(a)){a=OjUiEvent.convertDomEvent(a);b._onEvent(a);if(a.type==OjUiEvent.DOWN&&b.hasEventListener(OjUiEvent.UP_OUTSIDE)){OJ.addEventListener(OjUiEvent.UP,b,"_onOjMouseUp")}}},_onDomOjKeyboardEvent:function(a){var b=OjElement.element(this);if(b&&b._processEvent(a)){b._onEvent(OjKeyboardEvent.convertDomEvent(a))}},_onDomOjFocusEvent:function(a){var b=OjElement.element(this);if(b&&b._processEvent(a)){b._onEvent(OjFocusEvent.convertDomEvent(a))}},_onDomScrollEvent:function(a){var b=OjElement.element(this);if(b&&b._processEvent(a)){b._onScroll(OjScrollEvent.convertDomEvent(a))}},_onDomTouchEvent:function(a){var b=OjElement.element(this);if(b&&b._processEvent(a)){return b._onTouch(OjTouchEvent.convertDomEvent(a))}return true},_onDrag:function(a){var c=a.pageX,b=a.pageY;this.dispatchEvent(new OjDragEvent(OjDragEvent.DRAG,c-this._dragX,b-this._dragY,a,false,false));this._dragX=c;this._dragY=b},_onDragEnd:function(a){OJ.removeEventListener(OjUiEvent.MOVE,this,"_onDrag");OJ.removeEventListener(OjUiEvent.UP,this,"_onDragEnd");this.dispatchEvent(new OjDragEvent(OjDragEvent.END,a.pageX-this._dragX,a.pageY-this._dragY,a,false,false));this._dragX=this._dragY=null},_onDragStart:function(a){this._dragX=a.pageX;this._dragY=a.pageY;if(this.hasEventListener(OjDragEvent.DRAG)){OJ.addEventListener(OjUiEvent.MOVE,this,"_onDrag")}OJ.addEventListener(OjUiEvent.UP,this,"_onDragEnd");this.dispatchEvent(new OjDragEvent(OjDragEvent.START,0,0,a,false,false))},_onEvent:function(a){this.dispatchEvent(a);return false},_onMoveTick:function(a){var c=this.pageX,b=this.pageY,e=this._page_x-c,d=this._page_y-b;if(e||d){this.dispatchEvent(new OjTransformEvent(OjTransformEvent.MOVE,c,b,e,d))}this._page_x=c;this._page_y=b},_onOjMouseUp:function(a){OJ.removeEventListener(OjUiEvent.UP,this,"_onOjMouseUp");if(this.hitTestPoint(a.pageX,a.pageY)){return}this.dispatchEvent(a)},_onScroll:function(b){var a,c;if(b.is("OjScrollEvent")){if(this._prev_x==(a=b.scrollX)&&this._prev_y==(c=b.scrollY)){return}this._prev_x=a;this._prev_y=c;return this._onEvent(b)}if(this._prev_x==(a=this.scrollX)&&this._prev_y==(c=this.scrollY)){return}return this._onEvent(new OjScrollEvent(OjScrollEvent.SCROLL,this._prev_x=a,this._prev_y=c))},_onTouch:function(b){var c=b.type,a=b.pageX,d=b.pageY;if(c==OjTouchEvent.END){c=OjUiEvent.UP}else{if(c==OjTouchEvent.START){c=OjUiEvent.DOWN;this._dragX=a;this._dragY=d}else{if(c==OjTouchEvent.MOVE){c=OjUiEvent.MOVE}}}if(c){this._onEvent(new OjUiEvent(c,a,d,true,true));if(c==OjUiEvent.UP&&!this.hasEventListener(OjDragEvent.START)&&this.hitTestPoint(a,d)){this._onEvent(new OjUiEvent(OjUiEvent.PRESS,a,d,true,true));this._dragX=this._dragY=null}}return true},_updateTouchStartListeners:function(){if(!this.hasEventListeners(OjUiEvent.DOWN,OjUiEvent.PRESS,OjDragEvent.START,OjDragEvent.DRAG,OjDragEvent.END)){this._getEventProxy().ontouchstart=null}},_updateTouchMoveListeners:function(){if(!this.hasEventListeners(OjUiEvent.MOVE,OjDragEvent.START,OjDragEvent.DRAG,OjDragEvent.END)){this._getEventProxy().ontouchmove=null}},_updateTouchEndListeners:function(){if(!this.hasEventListeners(OjUiEvent.UP,OjUiEvent.UP_OUTSIDE,OjUiEvent.PRESS,OjDragEvent.END)){var a=this._getEventProxy();a.ontouchcancel=a.ontouchend=a.ontouchleave=null}},addEventListener:function(c){var b=OJ.is_touch_capable,a=this._getEventProxy();this._s(OjElement,"addEventListener",arguments);if(c==OjScrollEvent.SCROLL){this._scrollable=true;a.onscroll=this._onDomScrollEvent}else{if(c==OjUiEvent.PRESS){if(b){a.ontouchstart=a.ontouchcancel=a.ontouchend=a.ontouchleave=this._onDomTouchEvent}else{a.onclick=this._onDomOjUiEvent}}else{if(c==OjUiEvent.DOUBLE_PRESS){a.ondblclick=this._onDomOjUiEvent}else{if(c==OjUiEvent.DOWN){if(b){a.ontouchstart=this._onDomTouchEvent}else{a.onmousedown=this._onDomOjUiEvent}}else{if(c==OjUiEvent.MOVE){if(b){a.ontouchmove=this._onDomTouchEvent}else{a.onmousemove=this._onDomOjUiEvent}}else{if(c==OjUiEvent.OUT){a.onmouseout=this._onDomOjUiEvent}else{if(c==OjUiEvent.OVER){a.onmouseover=this._onDomOjUiEvent}else{if(c==OjUiEvent.UP){if(b){a.ontouchcancel=a.ontouchend=a.ontouchleave=this._onDomTouchEvent}else{a.onmouseup=this._onDomOjUiEvent}}else{if(c==OjUiEvent.UP_OUTSIDE){if(b){a.ontouchcancel=a.ontouchend=a.ontouchleave=this._onDomTouchEvent}else{a.onmousedown=this._onDomOjUiEvent}}else{if(OjDragEvent.isDragEvent(c)){this._draggable=true;this.addEventListener(OjUiEvent.DOWN,this,"_onDragStart")}else{if(c==OjKeyboardEvent.DOWN){a.onkeydown=this._onDomOjKeyboardEvent}else{if(c==OjKeyboardEvent.PRESS){a.onkeypress=this._onDomOjKeyboardEvent}else{if(c==OjKeyboardEvent.UP){a.onkeyup=this._onDomOjKeyboardEvent}else{if(c==OjFocusEvent.IN){a.onfocus=this._onDomOjFocusEvent}else{if(c==OjFocusEvent.OUT){a.onblur=this._onDomOjFocusEvent}else{if(c==OjTransformEvent.MOVE){if(!this._move_timer){this._move_timer=new OjTimer(250,0);this._move_timer.addEventListener(OjTimer.TICK,this,"_onMoveTick");this._page_x=this.pageX;this._page_y=this.pageY;this._move_timer.start()}}else{if(c==OjTransformEvent.RESIZE&&this._proxy!=document.body){a.onresize=this._onOjDomEvent}else{if(c==OjDomEvent.CHANGE){a.onchange=this._onOjDomEvent}}}}}}}}}}}}}}}}}}},removeEventListener:function(c,b,d){var a=this._getEventProxy();this._s(OjElement,"removeEventListener",arguments);if(c==OjScrollEvent.SCROLL){if(!this.hasEventListener(OjScrollEvent.SCROLL)){this._scrollable=false;a.onscroll=null}}else{if(c==OjUiEvent.PRESS){if(!this.hasEventListener(OjUiEvent.PRESS)){a.onclick=null;this._updateTouchStartListeners();this._updateTouchEndListeners()}}else{if(c==OjUiEvent.DOUBLE_PRESS){if(!this.hasEventListener(OjUiEvent.DOUBLE_PRESS)){a.ondblclick=null;this._updateTouchStartListeners();this._updateTouchEndListeners()}}else{if(c==OjUiEvent.DOWN){if(!this.hasEventListeners(OjUiEvent.DOWN,OjUiEvent.UP_OUTSIDE,OjDragEvent.DRAG)){a.onmousedown=null;this._updateTouchStartListeners()}}else{if(c==OjUiEvent.MOVE){if(!this.hasEventListener(OjUiEvent.MOVE)){a.onmousemove=null;this._updateTouchMoveListeners()}}else{if(c==OjUiEvent.OUT){if(!this.hasEventListener(OjUiEvent.OUT)){a.onmouseout=null}}else{if(c==OjUiEvent.OVER){if(!this.hasEventListener(OjUiEvent.OVER)){a.onmouseover=null}}else{if(c==OjUiEvent.UP){if(!this.hasEventListener(OjUiEvent.UP)){a.onmouseup=null;this._updateTouchEndListeners()}}else{if(c==OjUiEvent.UP_OUTSIDE){if(!this.hasEventListener(OjUiEvent.DOWN)){a.onmousedown=null;OJ.removeEventListener(OjUiEvent.UP,a,"_onOjMouseUp");this._updateTouchEndListeners()}}else{if(OjDragEvent.isDragEvent(c)){if(!this.hasEventListeners(OjDragEvent.DRAG,OjDragEvent.END,OjDragEvent.START)){this._draggable=false;this.removeEventListener(OjUiEvent.DOWN,this,"_onDragStart");OJ.removeEventListener(OjUiEvent.MOVE,this,"_onDrag");OJ.removeEventListener(OjUiEvent.UP,this,"_onDragEnd")}}else{if(c==OjKeyboardEvent.DOWN){if(!this.hasEventListener(OjKeyboardEvent.DOWN)){a.onkeydown=null}}else{if(c==OjKeyboardEvent.PRESS){if(!this.hasEventListener(OjKeyboardEvent.PRESS)){a.onkeypress=null}}else{if(c==OjKeyboardEvent.UP){if(!this.hasEventListener(OjKeyboardEvent.UP)){a.onkeyup=null}}else{if(c==OjFocusEvent.IN){if(!this.hasEventListener(OjFocusEvent.IN)){a.onfocus=null}}else{if(c==OjFocusEvent.OUT){if(!this.hasEventListener(OjFocusEvent.OUT)){a.onblur=null}}else{if(c==OjTransformEvent.MOVE){if(!this.hasEventListener(OjTransformEvent.MOVE)){this._u("_move_timer")}}else{if(c==OjTransformEvent.RESIZE){if(!this.hasEventListener(OjTransformEvent.RESIZE)){a.onresize=null}}else{if(c==OjDomEvent.CHANGE){if(!this.hasEventListener(OjDomEvent.CHANGE)){a.onchange=null}}}}}}}}}}}}}}}}}}}},appendChild:function(a){return this.insertChildAt(a,this.numChildren)},insertChildAt:function(c,a){var b=this.dom;if(!c){return c}if(a>=this.numChildren){b.appendChild(c.dom)}else{b.insertBefore(c.dom,b.childNodes[a])}c._setIsDisplayed(this._is_displayed);return c},forChild:function(f,a,d){var b=this,e=b.numChildren,c=0;d=d||b;for(;c<e;c++){f.call(d,c,b.getChildAt(c))}if(a){a.call(d)}},forChildReverse:function(e,a,c){var b=this,d=b.numChildren;c=c||b;for(;d--;){e.call(c,d,b.getChildAt(d))}if(a){a.call(c)}},getChildAt:function(a){return OjElement.element(this.dom.childNodes[a])},indexOfChild:function(a){return Array.array(this.dom.childNodes).indexOf(a.dom)},hasChild:function(a){return a.parent==this},moveChild:function(b,a){if(this.hasChild(b)){this.dom.insertBefore(b.dom,this.getChildAt(a).dom);return b}},prependChild:function(a){return this.insertChildAt(a,0)},removeAllChildren:function(){var b=this.numChildren,a=[];for(;b--;){a.unshift(this.removeChildAt(b))}return a},removeChild:function(a){if(a){if(a.is(OjStyleElement)){this.dom.removeChild(a.dom)}a._setIsDisplayed(false)}return a},removeChildAt:function(a){if(a<0||a>=this.numChildren){return null}return this.removeChild(this.getChildAt(a))},removeChildren:function(a){var b=a.length;for(;b--;){this.removeChild(a[b])}},replaceChild:function(b,a){return this.replaceChildAt(a,this.indexOfChild(b))},replaceChildAt:function(c,a){var b;if(a>=this.numChildren){this.appendChild(c)}else{b=this.removeChildAt(a);this.insertChildAt(c,a)}return b},".children":function(){var a=[],b=this.numChildren;for(;b--;){a.unshift(this.getChildAt(b))}return a},"=children":function(b){this.removeAllChildren();var a=0,c=b.length;for(;a<c;a++){this.appendChild(b[a])}},".numChildren":function(){return this.dom.childNodes.length},blur:function(){if(isFunction(this._dom.blur)){this._dom.blur()}},find:function(a){if(isElement(a)){a="#"+a.id}return OJ.query(a,this._dom)},focus:function(){if(isFunction(this._dom.focus)){this._dom.focus()}},hide:function(a){if(a===false){this.show()}else{this.addCss(["hidden"]);this.dispatchEvent(new OjEvent(OjEvent.HIDE))}},".isVisible":function(){var a=this;return a._getStyle("display")!=OjStyleElement.NONE&&a._getStyle("visibility")!="hidden"&&a.alpha>0&&a.width>0&&a.height>0},show:function(a){if(a===false){this.hide()}else{this.removeCss("hidden");this.dispatchEvent(new OjEvent(OjEvent.SHOW))}},_getStyleBackup:function(a){return this._proxy.style[a]},_getStyleIe:function(a){return this._proxy.currentStyle[a]},_getStyle:function(a){return document.defaultView.getComputedStyle(this._proxy,null)[a]},_setStyle:function(a,b){return this._proxy.style[a]=b},_getStyleNumber:function(b){var a=this._getStyle(b);if(!a||a==OjStyleElement.NONE){return 0}return parseFloat(a.replaceAll(["px","%","pt","em"],""))},_setStyleNumber:function(c,b){var a=arguments;this._setStyle(c,isSet(b)?b+(a.length>2?a[2]:this._getStyleUnit(c)):null)},_getStyler:function(c,a){var b=c=="font"||c=="line"?OJ.font_unit:OJ.dim_unit;if(!this["_"+c]){this["_"+c]=[this._getStyle(c+"Top").replaceAll(b,""),this._getStyle(c+"Right").replaceAll(b,""),this._getStyle(c+"Bottom").replaceAll(b,""),this._getStyle(c+"Left").replaceAll(b,"")]}return a&&a.length?this["_"+c][a[0]]:this["_"+c]},_setStyler:function(f,c){var e="",b=c.length,d=c[0],a=this._getStyleUnit(f);this._getStyler(f);if(b==1){c=[d,d,d,d]}else{if(b==2){c=[d,c[1],d,c[1]]}else{if(b==3){c=[d,c[1],c[2],c[1]]}}}for(b=4;b--;){d=c[b];if(isNull(d)){d=this["_"+f][b]}e=(b?" ":"")+d+a+e}this._setStyle(f,e)},_getStyleUnit:function(a){a=a.substr(0,4);if(a=="font"||a=="line"){return OJ.font_unit}return OJ.dim_unit},getAttr:function(a){if(isObject(a)){a=a.nodeName}return this._proxy.getAttribute(a)},setAttr:function(a,b){if(isObject(a)){a=a.nodeName}if(isUndefined(b)){b=""}if(isSet(b)){this._proxy.setAttribute(a,b)}else{this._proxy.removeAttribute(a)}},".id":function(){return this._id||this.oj_id},"=id":function(a){if(this._id==a){return}OjElement.unregister(this);this._proxy.ojProxy=this.dom.id=this._id=a;OjElement.register(this)},"=name":function(a){if(this._name==a){return}this.setAttr("name",this._name=a)},".text":function(){return this.dom.innerHTML},"=text":function(a){this.removeAllChildren();this.dom.innerHTML=String.string(a).html()},_makeCssList:function(a){if(isArray(a[0])){return a[0]}var b=a.length,c=[];for(;b--;){c=c.concat(a[b].trim().split(" "))}return c},_processCssList:function(c,g){var d=this.cssList,f=this._makeCssList(c),e=f.length,a,b;for(;e--;){b=d.indexOf(a=f[e]);if(b==-1){switch(g){case"has":return false;case"add":case"toggle":d.append(a)}}else{switch(g){case"remove":case"toggle":d.removeAt(b)}}}if(g=="has"){return true}return this.css=d},addCss:function(a){return this._processCssList(arguments,"add")},".css":function(){return this._proxy.className.trim()},".cssList":function(){return this.css.split(" ")},hasCss:function(a){return this._processCssList(arguments,"has")},removeCss:function(a){return this._processCssList(arguments,"remove")},"=css":function(a){return this._proxy.className=(isArray(a)?a.join(" "):a).trim()},swapCss:function(b,a){this.removeCss(b);this.addCss(a)},toggleCss:function(a){return this._processCssList(arguments,"toggle")},hasFocus:function(){return this._dom.hasFocus},hitTest:function(b,a){return this.hitTestRect(b.rect)},hitTestRect:function(b,a){return(a?this.rect:this.pageRect).hitTestRect(b)},hitTestPoint:function(a,c,b){return(b?this.rect:this.pageRect).hitTestPoint(a,c)},localPoint:function(a){},localX:function(a){return a-this.pageX},localY:function(a){return a-this.pageY},".innerWidth":function(){return this.width-this.getPaddingLeft()-this.getPaddingRight()},"=innerWidth":function(a){this._setWidth(Math.round(a)+OJ.dim_unit)},".outerWidth":function(){return this.width+this.getMarginLeft()+Math.abs(this.getMarginRight())},"=outerWidth":function(a){this.innerWidth=a-this.getPaddingLeft()-this.getPaddingRight()-this.getMarginLeft()-Math.abs(this.getMarginRight())},".width":function(){var b=arguments.length?arguments[0]:null;if(b==OjStyleElement.PERCENT){var a=this._proxy.offsetParent||this._proxy;return(this._proxy.offsetWidth/a.offsetWidth)*100}return this._proxy.offsetWidth||this._getStyleNumber("width")},_setWidth:function(a){this._setStyle("width",a)},"=width":function(c){var b=isArray(c)?c:[c],a=b[0];if(a==OjStyleElement.AUTO||!isSet(a)){this._setWidth(null)}else{if(b.length>1){this._setWidth(b.join(""))}else{this.innerWidth=a-this.getPaddingLeft()-this.getPaddingRight()}}},".innerHeight":function(){return this.height-this.getPaddingTop()-this.getPaddingBottom()},"=innerHeight":function(a){this._setHeight(Math.round(a)+OJ.dim_unit)},".outerHeight":function(){return this.height+this.getMarginTop()+Math.abs(this.getMarginBottom())},"=outerHeight":function(a){this.innerHeight=a-this.getPaddingTop()-this.getPaddingBottom()-this.getMarginTop()-Math.abs(this.getMarginBottom())},".height":function(){var b=arguments.length?arguments[0]:null;if(b==OjStyleElement.PERCENT){var a=this._proxy.offsetParent||this._proxy;return(this._proxy.offsetHeight/a.offsetHeight)*100}return this._proxy.offsetHeight||this._getStyleNumber("height")},_setHeight:function(a){this._setStyle("height",a)},"=height":function(c){var a=isArray(c)?c:[c],b=a[0];if(b==OjStyleElement.AUTO||!isSet(b)){this._setHeight(null)}else{if(a.length>1){this._setHeight(a.join(""))}else{this.innerHeight=b-this.getPaddingTop()-this.getPaddingBottom()}}},".x":function(){var b=arguments.length?arguments[0]:null;if(b==OjStyleElement.PERCENT){var a=this._proxy.offsetParent||this._proxy;return(this._proxy.offsetLeft/a.offsetWidth)*100}return this._proxy.offsetLeft},".pageX":function(){if(this._proxy.getBoundingClientRect){return this._proxy.getBoundingClientRect().left}},"=x":function(b){var a=isArray(b)?b:[b];this._setStyleNumber("left",a[0],a.length>1?a[1]:OJ.dim_unit)},"=pageX":function(a){this.x=this.parent.localX(a)},".y":function(){var b=arguments.length?arguments[0]:null;if(b==OjStyleElement.PERCENT){var a=this._proxy.offsetParent||this._proxy;return(this._proxy.offsetTop/a.offsetHeight)*100}return this._proxy.offsetTop},".pageY":function(){if(this._proxy.getBoundingClientRect){return this._proxy.getBoundingClientRect().top}},"=y":function(b){var a=isArray(b)?b:[b];this._setStyleNumber("top",a[0],a.length>1?a[1]:OJ.dim_unit)},"=pageY":function(a){this.y=this.parent.localY(a)},".alpha":function(){return this._alpha},"=alpha":function(b){var a=this._alpha;if(a==b){return}if((b=this._alpha=this._setStyle("opacity",b))&&a===0){}else{if(!b){}}},".backgroundColor":function(){return this._getStyle("background-color")},"=backgroundColor":function(a){this._setStyle("background-color",a)},".depth":function(){return this._depth},"=depth":function(a){this._depth=this._setStyle("zIndex",a)},".overflow":function(){return this._overflow},"=overflow":function(a){this._overflow=this._setStyle("overflow",a)},".rect":function(){return new OjRect(this.x,this.y,this.width,this.height)},"=rect":function(a){},".pageRect":function(){return new OjRect(this.pageX,this.pageY,this.width,this.height)},"=pageRect":function(a){},".scrollHeight":function(){return this._proxy.scrollHeight},"=scrollHeight":function(a){this._proxy.scrollHeight=a},".scrollWidth":function(){return this._proxy.scrollWidth},"=scrollWidth":function(a){this._proxy.scrollWidth=a},".scrollX":function(){return this._proxy.scrollLeft},"=scrollX":function(a){this._proxy.scrollLeft=a},".scrollY":function(){return this._proxy.scrollTop},"=scrollY":function(a){this._proxy.scrollTop=a},_getAlign:function(a,b){var c=this.getAttr(a+"-align");return c?c:b},_setAlign:function(a,c,b){if(c==b){c=null}this.setAttr(a+"-align",this["_"+a+"_align"]=c)},".hAlign":function(){return this._getAlign("h",OjStyleElement.LEFT)},"=hAlign":function(a){return this._setAlign("h",a,OjStyleElement.LEFT)},".vAlign":function(){return this._getAlign("v",OjStyleElement.TOP)},"=vAlign":function(a){return this._setAlign("v",a,OjStyleElement.TOP)},_updateTransform:function(){var b=this._rotation?"rotate("+this._rotation+"deg) ":"",d=this._translate?this._translate.toString():"",a=b+(isEmpty(d)?"":"translate("+d+")"),c=OJ.css_prefix;if(c=="-moz-"){this._setStyle("MozTransform",a)}else{this._setStyle(c+"transform",a)}this._setStyle("transform",a)},".origin":function(){return this._origin},"=origin":function(a){this._setStyle(OJ.css_prefix+"transform-origin",a);this._setStyle("transform-origin",this._origin=a)},".rotation":function(){return this._rotation},"=rotation":function(a){if(this._rotation==a){return}this._rotation=a;this._updateTransform()},".translate":function(){return this._translate},"=translate":function(a){if(a.isEqualTo(this._translate)){return}this._translate=a;this._updateTransform()}},{COMPONENT_TAGS:{},STYLE_BACKUP:"styleBackup",STYLE_DEFAULT:"styleDefault",STYLE_IE:"styleIE",STYLE_MODE:(function(){var a=OjElement.elm("div");if(a.currentStyle){return"styleIE"}if(!document.defaultView||!document.defaultView.getComputedStyle){return"styleBackup"}return"styleDefault"})(),AUTO:"auto",BLOCK:"block",HIDDEN:"hidden",NONE:"none",SCROLL:"scroll",VISIBLE:"visible",LEFT:"l",CENTER:"c",RIGHT:"r",TOP:"t",MIDDLE:"m",BOTTOM:"b",PERCENT:"%",PX:"px",EM:"em",getTagComponent:function(a){return this.COMPONENT_TAGS[a]},isComponentTag:function(a){return isSet(this.COMPONENT_TAGS[a])},registerComponentTag:function(a,b){this.COMPONENT_TAGS[a]=b;if(OJ.browser==OJ.IE&&OJ.browser_version.compareVersion("9.0.0")<0){document.createElement(a)}},getStyle:function(b,a){if(this.STYLE_MODE==this.STYLE_IE){return b.currentStyle[a]}if(this.STYLE_MODE==this.STYLE_BACKUP){return b.style[a]}return document.defaultView.getComputedStyle(b,null)[a]}});OJ.extendClass("OjTextElement",[OjElement],{_c:function(){var b=arguments,c=b.length,a=c&&isDomElement(b[0]);this._s(OjElement,"_c",a?[b[0]]:[]);if(c&&!a){this.text=b[0]}},_setDom:function(a,b){if(a.nodeName!="#text"){a=document.createTextNode(a.innerText)}this._s(OjElement,"_setDom",[a])},appendText:function(a){this.dom.nodeValue+=a.toString()},prependText:function(a){this.dom.nodeValue=a.toString()+this.dom.nodeValue},".text":function(){return this.dom.nodeValue},"=text":function(a){this.dom.nodeValue=String.string(a)}});OJ.extendClass("OjTimer",[OjActionable],{_p_:{duration:null,repeat_count:null},_g_p_:{count:0,paused:null,running:null,state:null,stopped:null},_elapsed:0,_c:function(){var a=this;a._s(OjActionable,"_c",[]);a._state=OjTimer.STOPPED;a._processArguments(arguments,{duration:0,repeat_count:1})},_setupInterval:function(){var b=this,a=b._interval;if(a){clearInterval(a)}b._interval=setInterval(function(){b._tick()},b.duration);b._updateLastTick()},_tick:function(){var a=this,b=a.repeat_count;a._updateLastTick();a.dispatchEvent(new OjEvent(OjTimer.TICK));if(b>0&&a._count++==b){a.stop();a.dispatchEvent(new OjEvent(OjTimer.COMPLETE))}},_updateLastTick:function(){self._last_tick=new Date();self._elapsed=0},pause:function(){var b=this,c=b._last_tick,a=b._interval;b._elapsed=c?(new Date()).getTime()-c.getTime():0;b._state=OjTimer.PAUSED;if(a){clearInterval(a)}},restart:function(){this.stop();this.start()},start:function(){var b=this,a=b._elapsed;if(!b._interval){b._elapsed=0;b._state=OjTimer.RUNNING;if(a&&a<b.duration){b._last_tick=new Date((new Date().getTime()-a));b._interval=setTimeout(function(){b._tick();b._setupInterval()},b.duration-a)}else{b._setupInterval()}}},stop:function(){var a=this;a.pause();a._count=0;a._elapsed=0;a._state=OjTimer.STOPPED},"=duration":function(c){var b=this,a;if(b._duration!=c){b._duration=Math.abs(c);b._elapsed=0;if(a){b._setupInterval()}}},".paused":function(){return this._state==OjTimer.PAUSED},"=repeat_count":function(b){var a=this;a._repeat_count=b=Math.max(b,0);if(b>=a.count&&a.running){a.stop();a.dispatchEvent(new OjEvent(OjTimer.COMPLETE))}},".running":function(){return this._state==OjTimer.RUNNING},".stopped":function(){return this._state==OjTimer.STOPPED}},{TICK:"onTimerTick",COMPLETE:"onTimerComplete",PAUSED:"paused",RUNNING:"running",STOPPED:"stopped",SECOND:1000,MINUTE:60000,HOUR:3600000,DAY:86400000});OJ.extendManager("HistoryManager","OjHistoryManager",[OjActionable],{_previous:null,_next:null,_current:0,_native:false,_timer:0,_ignore_next:false,_list:null,PREVIOUS:"previous",NEXT:"next",FORWARD:"historyForward",BACK:"historyBack",CHANGE:"historyChange",_c:function(){this._s(OjActionable,"_c",[]);this._list=[new OjUrl(window.location.href)];try{var a=window.history.previous;this._native=true;a=null}catch(b){}if("onhashchange" in window){window.onhashchange=function(c){HistoryManager._onChange(c)}}else{this._timer=new OjTimer(1000,0);this._timer.addEventListener(OjTimer.TICK,HistoryManager,"_onChange");this._timer.start()}},_d:function(){OJ.destroy(this._timer);return this._s(OjActionable,"_d",arguments)},_onChange:function(){var b=HistoryManager.get();if(b.toString()!=window.location.href){var a=new OjUrl(window.location.href);if(OJ.depth<0){if(a.toString()==this.get(-1).toString()){this._current--}else{if(a.toString()==this.get(this._current+1).toString()){this._current++}else{this._current=0;this._list.unshift(a)}}}else{if(this._current==0){this._list=[this._list[0]]}else{this._list=this._list.slice(0,this._current+1)}this._list.append(a);this._current=this._list.length-1}this._previous=this.get(-1);this._next=this.get(this._current+1);this._dispatchChange(b,a)}},_dispatchChange:function(b,a){this.dispatchEvent(new OjEvent(HistoryManager.CHANGE,true))},get:function(){var b,a=arguments.length?arguments[0]:this._current;if(this._native){if(window.history[a]){return new OjUrl(window.history[a])}b=this._list[a]}else{if(a<0){b=this._list[Math.max(this._current+a,0)]}else{if(a>=this._list.length){b=this._list[this._list.length-1]}else{b=this._list[a]}}}return b?b.clone():null},previous:function(){return this._previous},next:function(){return this._next},go:function(c){if(this._native){window.history.go(c);return}var a;if(isNaN(index)){var b=this._list.length;while(b-->0){if(this._list[b].toString()==c){a=c;break}}this._current=b}else{a=this.get(c);this._current=c}OJ.open(a)},forward:function(){if(this._native){window.history.forward();return}OJ.open(this.get(this._current+1))},back:function(){if(this._native){window.history.back();return}OJ.go(this.get(this._current-1))},length:function(){return this._list.length}});window.OjEasing={NONE:function(b,e,c,a){return((c*b)/a)+e},IN:function(b,e,c,a){return(-c*Math.cos((b/a)*(Math.PI/2)))+c+e},OUT:function(b,e,c,a){return(c*Math.sin((b/a)*(Math.PI/2)))+e},IN_OUT:function(b,e,c,a){return((-c/2)*(Math.cos((Math.PI*b)/a)-1))+e},STRONG_IN:function(b,e,c,a){return(b==0)?e:c*Math.pow(2,10*((b/a)-1))+e},STRONG_OUT:function(b,e,c,a){return(b==a)?e+c:c*(-Math.pow(2,-10*(b/a))+1)+e},STRONG_IN_OUT:function(b,e,c,a){if(b==0){return e}if(b==a){return e+c}b=b/(a/2);if(b<1){return(c/2)*Math.pow(2,10*(b-1))+e}return(c/2)*(-Math.pow(2,-10*--b)+2)+e},ELASTIC_IN:function(e,i,h,c,b,g){if(e==0){return i}e=e/c;if(e==1){return i+h}if(!g){g=c*0.3}var f;if(!b||b<Math.abs(h)){b=h;f=g/4}else{f=(g/(2*Math.PI))*Math.asin(h/b)}return(-(b*Math.pow(2,10*(e-=1))*Math.sin(((e*c)-f)*(2*Math.PI)/g)))+h},ELASTIC_OUT:function(e,i,h,c,b,g){if(e==0){return i}e=e/c;if(e==1){return i+h}if(!g){g=c*0.3}var f;if(!b||b<Math.abs(h)){b=h;f=g/4}else{f=(g/(2*Math.PI))*Math.asin(h/b)}return(b*Math.pow(2,-10*e)*Math.sin((e*c-f)*(2*Math.PI)/g)+h+i)},ELASTIC_IN_OUT:function(e,i,h,c,b,g){if(e==0){return i}e=e/(c/2);if(e==2){return i+h}if(!g){g=c*(0.3*1.5)}var f;if(!b||b<Math.abs(h)){b=h;f=g/4}else{f=(g/(2*Math.PI))*Math.asin(h/b)}if(e<1){return -0.5*(b*Math.pow(2,10*(e-=1))*Math.sin((e*c-f)*(2*Math.PI)/g))+i}return b*Math.pow(2,-10*(e-=1))*Math.sin((e*c-f)*(2*Math.PI)/g)*0.5+h+i}};OJ.extendClass("OjTweenEvent",[OjEvent],{_g_p_:{progress:0,value:0},_c:function(e,g,d){var d=0,b=false,a=false,c=arguments,f=c.length;this._value=g;this._progress=d;if(f>3){b=c[3];if(f>4){a=c[4]}}this._s(OjEvent,"_c",[e,b,a])}},{TICK:"onTweenTick",COMPLETE:"onTweenComplete"});(function(){var c=["o","ms","webkit","moz"],a=c.length,b;for(;a--&&!window.requestAnimationFrame;){b=c[a];window.requestAnimationFrame=window[b+"RequestAnimationFrame"];window.cancelAnimationFrame=window[b+"CancelAnimationFrame"]||window[b+"CancelRequestAnimationFrame"]}})();OJ.extendClass("OjTween",[OjActionable],{_p_:{duration:null,easing:null,from:null,quality:60,to:null},_delta:0,_progress:0,_c:function(){this._s(OjActionable,"_c",[]);this._processArguments(arguments,{from:undefined,to:undefined,duration:250,easing:OjEasing.NONE});this._onAnimationFrame=this._onTick.bind(this)},_d:function(){this.stop();this._u(["_timer","_onAnimationFrame"]);return this._s(OjActionable,"_d",arguments)},_calculateDelta:function(){this._delta=this._to-this._from},_tick:function(a){this.dispatchEvent(new OjTweenEvent(OjTweenEvent.TICK,this._easing(a,this._from,this._delta,this._duration,0,0),a/this._duration))},_onTick:function(a){var b=Math.min(Date.time()-this._start,this._duration);this._tick(b);if(b==this._duration){this.stop();this._onComplete(a)}else{if(this._animationFrame){this._animationFrame=window.requestAnimationFrame(this._onAnimationFrame)}}},_onComplete:function(a){this.dispatchEvent(new OjTweenEvent(OjTweenEvent.COMPLETE,this._to,1))},start:function(){if(isUnset(this._from)||isUnset(this._to)){return}this._calculateDelta();this._start=Date.time()-this._progress;if(OjTween.USE_RAF){this._animationFrame=window.requestAnimationFrame(this._onAnimationFrame)}else{this._interval=setInterval(this._onAnimationFrame,1000/this._quality)}},pause:function(){if(this._animationFrame){window.cancelAnimationFrame(this._animationFrame);return this._animationFrame=null}this._interval=clearInterval(this._interval);this._progress=Date.time()-this._start},stop:function(){this.pause();this._progress=this._start=0},restart:function(){this.stop();this.start()},reverse:function(){}},{USE_RAF:(OJ.os!=OJ.IOS||OJ.os_version.compareVersion("6.9")==1||!OJ.is_webview())&&window.requestAnimationFrame});OJ.extendClass("OjPropTween",[OjTween],{_p_:{mode:"Javascript",target:null,units:null},_c:function(){this._s(OjTween,"_c",[]);this._processArguments(arguments,{target:undefined,to:undefined,duration:250,easing:OjEasing.NONE,units:undefined})},_d:function(){this._callback=null;return this._s(OjTween,"_d",arguments)},_calculateDelta:function(){var a=this,d=a.target;a._from_cache={};a._delta={};var e=!isEmptyObject(a._from),b,c="";for(b in a._to){if(!e){a._from[b]=d[b]}a._from_cache[b]=parseFloat(a._from[b]);a._delta[b]=parseFloat(a._to[b])-a._from_cache[b];if(c!=""){c+=", "}c+=OjPropTween.PROPERTY_CSS_MAP[b]}},_isAnimating:function(a){if(this._target&&this._target.is("OjComponent")){this._target._setIsAnimating(a)}},_tick:function(a){var h,i=this,b=i.duration,g=i._delta,f=i.easing,c=i.target,d=i.units;for(h in g){var e=[Math.round(f(a,i._from_cache[h],g[h],b,0,0)*1000)/1000];if(d){e.append(d)}c[h]=e}},_onComplete:function(a){this._isAnimating(false);this._s(OjTween,"_onComplete",arguments)},_onTargetDestroy:function(a){this._s(OjTween,"stop",arguments);this.target=null},_onWebKitComplete:function(a){var b=this,c=b.target,d=OjPropTween.CSS_PROPERTY_MAP[a.propertyName];if(isUndefined(b._from[d])){return}c._setStyle("-webkit-transition-duration",null);c._setStyle("-webkit-transition-property",null);c.dom.removeEventListener("webkitTransitionEnd",b._callback,false);b._onComplete(a);b._callback=null},pause:function(){this._isAnimating(false);this._s(OjTween,"pause",arguments)},start:function(){if(!isSet(this._target)||!isSet(this._to)){return}if(!isSet(this._from)){this._from={}}this._isAnimating(true);if(this._mode==OjPropTween.WEBKIT){var a;this._calculateDelta();this._target._setStyle("-webkit-transition-duration",this._duration+"ms");this._target._setStyle("-webkit-transition-property",transition_properties);this._target.dom.addEventListener("webkitTransitionEnd",this._callback=this._onWebKitComplete.bind(this),false);for(a in this._delta){this._target[a](this._from_cache[a]+this._delta[a])}}else{this._s(OjTween,"start",arguments)}},stop:function(){this._isAnimating(false);this._s(OjTween,"stop",arguments)},"=mode":function(a){if(this._mode==a){return}this._mode=a;if(this._timer){OJ.destroy(this._timer)}},"=target":function(a){if(this._target==a){return}if(this._target){this._target.removeEventListener(OjEvent.DESTROY,this,"_onTargetDestroy")}if(this._target=a){this._target.addEventListener(OjEvent.DESTROY,this,"_onTargetDestroy")}}},{PROPERTY_CSS_MAP:{alpha:"opacity",x:"left",y:"top",width:"width",height:"height"},CSS_PROPERTY_MAP:{opacity:"alpha",left:"x",right:"y",width:"width",height:"height"},JS:"Javascript",WEBKIT:"WebKit"});OJ.extendClass("OjFade",[OjPropTween],{_p_:{direction:null,duration:null},_force:false,_c:function(){this._s(OjPropTween,"_c",[]);this._processArguments(arguments,{target:undefined,direction:OjFade.IN,duration:undefined,easing:undefined})},_onComplete:function(a){if(this.direction==OjFade.NONE){this.target.alpha=1;this.target.hide()}this._s(OjPropTween,"_onComplete",arguments)},start:function(){var a=this.target;if(!a){return}if(!this._to){this._to={}}if(this.direction==OjFade.IN){if(this._force||a.alpha==1){a.alpha=0}this._to.alpha=1}else{if(this._force||a.alpha==0){a.alpha=1}this._to.alpha=0}a.show();this._s(OjPropTween,"start",arguments)}},{IN:"fadeIn",NONE:"fadeNone",OUT:"fadeOut"});OJ.extendClass("OjComponent",[OjStyleElement],{_p_:{enabled:null,disabled:false,elms:null,isActive:false,isDisabled:false,numElms:0},_g_p_:{controller:null,isAnimating:false},_c:function(){var b=[null,this];if(this._t){if(this._t.charAt(0)=="<"){b[0]=this._t}else{}}this._s(OjStyleElement,"_c",b);var c=[this.oj_class_name],d=this._supers.length,a;for(;d--;){a=this._supers[d];c.append(OJ.classToString(a));if(a==OjComponent){break}}this.addCss(c);this._setContainer(this.container?this.container:this)},_processChild:function(b,a){return this._s(OjStyleElement,"_processChild",[b,a?a:this])},_processDomSourceAttributes:function(b,a){this._processAttributes(b,a)},_processDomSourceChild:function(a,b){if(OjElement.isCommentNode(a)){return null}return this._processChild(a,b)},_processDomSourceChildren:function(e,c){var f,b=e.childNodes,a=0,d=b.length;for(;a<d;a++){if(f=this._processDomSourceChild(b[a],c)){this.appendElm(f)}else{e.removeChild(b[a])}a--;d--}},_setContainer:function(a){if(this.container==a){return}if(this.container){this.container.removeCss("container")}if((this.container=a)!=this){this.container.addCss("container")}},_setDomSource:function(g,b){var c,e,l,d,k,h,f=(g==document.body),a=f?this._dom:g,j=f?g:this._dom;this._processDomSourceAttributes(g,b);k=(c=a.attributes).length;for(;k--;){h=c[k];l=h.nodeName;d=h.value;if(l=="class"){e=j.getAttribute(l);j.className=(String.string(e)+" "+d).trim()}else{if(l=="id"){j.id=d}else{j.setAttribute(l,d)}}}this._processDomSourceChildren(g,b);if(g.parentNode){if(f){k=(c=a.children).length;h=0;for(;h<k;h++){j.appendChild(c[0])}}else{a.parentNode.replaceChild(j,a)}}this._dom=j;this._processTemplateVars()},_setIsAnimating:function(a){if(this._isAnimating==a){return}if(this._isAnimating=a){this.addCss(["animating"])}else{this.removeCss(["animating"])}},_setIsDisplayed:function(a){this._s(OjStyleElement,"_setIsDisplayed",arguments);this.redraw()},_processEvent:function(a){if(this._isDisabled){return false}return this._s(OjStyleElement,"_processEvent",arguments)},_callElmFunc:function(b,a){return this._callElmProp(b).apply(this.container,a)},_callElmProp:function(e,d){var b=this.$,a=this.container,c;if(a!=this&&a.is(OjComponent)){c=e}else{c=b.ELM_FUNCS[e]}if(arguments.length>1){a[c]=d}return a[c]},appendElm:function(){return this._callElmFunc("appendElm",arguments)},".elms":function(){return this._callElmProp("elms")},"=elms":function(a){return this._callElmProp("elms",a)},forElm:function(){return this._callElmFunc("forElm",arguments)},forElmReverse:function(){return this._callElmFunc("forElmReverse",arguments)},getElmAt:function(){return this._callElmFunc("getElmAt",arguments)},hasElm:function(){return this._callElmFunc("hasElm",arguments)},indexOfElm:function(){return this._callElmFunc("indexOfElm",arguments)},insertElmAt:function(){return this._callElmFunc("insertElmAt",arguments)},moveElm:function(){return this._callElmFunc("moveElm",arguments)},".numElms":function(){return this._callElmProp("numElms")},prependElm:function(){return this._callElmFunc("prependElm",arguments)},removeAllElms:function(){return this._callElmFunc("removeAllElms",arguments)},removeElm:function(){return this._callElmFunc("removeElm",arguments)},removeElmAt:function(){return this._callElmFunc("removeElmAt",arguments)},replaceElm:function(){return this._callElmFunc("replaceElm",arguments)},replaceElmAt:function(){return this._callElmFunc("replaceElmAt",arguments)},_onFadeComplete:function(a){this.alpha=1;if(this._fader.direction==OjFade.OUT){this.hide()}else{this.show()}this._setIsAnimating(false);this._u("_fader")},fadeIn:function(b,c){if(this._fader){if(this._fader.direction==OjFade.IN){return}this._u("_fader")}else{if(this.isVisible){return}}this.show();var a=arguments.length;this._fader=new OjFade(this,OjFade.IN,a?b:250,a>1?c:OjEasing.NONE);this._fader.addEventListener(OjTweenEvent.COMPLETE,this,"_onFadeComplete");this._fader.start();this._setIsAnimating(true)},fadeOut:function(b,c){if(this._fader){if(this._fader.direction==OjFade.OUT){return}this._u("_fader")}else{if(!this.isVisible){return}}var a=arguments.length;this._fader=new OjFade(this,OjFade.OUT,a?b:250,a>1?c:OjEasing.NONE);this._fader.addEventListener(OjTweenEvent.COMPLETE,this,"_onFadeComplete");this._fader.start();this._setIsAnimating(true)},redraw:function(a){return this._is_displayed||a},".controller":function(){if(!this._controller){var a=this.parentComponent;if(a){this._controller=a.controller}}return this._controller},"=isActive":function(a){if(this._isActive!=a){if(this._isActive=a){this.addCss("active")}else{this.removeCss("active")}}},"=isDisabled":function(a){if(this._isDisabled!=a){if(this._isDisabled=a){this.addCss("disabled")}else{this.removeCss("disabled")}}},".isEnabled":function(){return !this.isDisabled},"=isEnabled":function(a){return this.isDisabled=!a}},{_TAGS:[],ELM_FUNCS:{appendElm:"appendChild",elms:"children",forElm:"forChild",forElmReverse:"forChildReverse",getElmAt:"getChildAt",hasElm:"hasChild",indexOfElm:"indexOfChild",insertElmAt:"insertChildAt",moveElm:"moveChild",numElms:"numChildren",prependElm:"prependChild",removeAllElms:"removeAllChildren",removeElm:"removeChild",removeElmAt:"removeChildAt",replaceElm:"replaceChild",replaceElmAt:"replaceChildAt"},load:function(a){}});OJ.extendComponent("OjSpinner",[OjComponent],{_p_:{numBlades:null,period:1,tint:"#FFFFFF"},_position:0,_t:"<div><div var=wrapper></div></div>",_c:function(){var a=arguments,b=a.length,c=13;this._s(OjComponent,"_c",[]);if(b){this.tint=a[0];if(b>1){this.period=a[1];if(b>2){c=a[2]}}}this._translate=new OjCssTranslate(70,0,"%");this._timer=new OjTimer(1000,0);this._timer.addEventListener(OjTimer.TICK,this,"_onTimer");this.numBlades=c;this.start()},_d:function(){this._u("_timer");return this._s(OjComponent,"_d",arguments)},_setIsDisplayed:function(){var a=this._timer;this._s(OjComponent,"_setIsDisplayed",arguments);if(a){a[this._is_displayed?"start":"stop"]()}},_updateTimer:function(){this._timer.duration=(this._period*1000)/this._numBlades},_onTimer:function(){if(this._position==0){this._position=this._numBlades}this._position--;this.redraw()},hide:function(){this._timer.pause();this._s(OjComponent,"hide",arguments)},redraw:function(){if(this._s(OjComponent,"redraw",arguments)){var a=this._numBlades,c,b;for(;a--;){c=this.wrapper.getChildAt(a);b=(a-this._position)%this._numBlades;if(b<0){b=b+this._numBlades}c.alpha=Math.max(1-(b/this._numBlades),0.2)}return true}return false},show:function(){if(this._running){this._timer.start()}this._s(OjComponent,"show",arguments)},start:function(){this._timer.start();this._running=true},stop:function(){this._timer.pause();this._running=false},"=alpha":function(a){if(this._running){if(a==0){this._timer.pause()}else{this._timer.start()}}this._s(OjComponent,"=alpha",arguments)},"=numBlades":function(c){var a,d,b;if(this._numBlades==c){return}this._numBlades=c;a=this._numBlades;b=360/a;this.wrapper.removeAllChildren();for(;a--;){d=new OjStyleElement();d.addCss("blade");d.rotation=b*a;d.translate=this._translate;d.backgroundColor=this._tint;this.wrapper.appendChild(d)}this.redraw();this._updateTimer()},"=period":function(a){if(this._period==a){return}this._period=a;this._updateTimer()},"=tint":function(b){var a;if(this._tint==b){return}this._tint=b;a=this._numBlades;for(;a--;){this.wrapper.getChildAt(a).backgroundColor=this._tint}}},{_TAGS:["spinner"]});OJ.extendClass("OjMedia",[OjComponent],{_p_:{preload:false,resizeBy:"none",source:null,showSpinner:false,spinnerTint:"#333"},_height:0,_loaded:false,_resize_vals:["none","fill","fit","hFill","wFill"],_width:0,_h_align:OjStyleElement.CENTER,_v_align:OjStyleElement.MIDDLE,_c:function(){this._s(OjComponent,"_c",[]);if(arguments.length){this.source=arguments[0]}},_d:function(){this._u("media");this._u("loading");return this._s(OjComponent,"_d",arguments)},_load:function(){},_makeMedia:function(){return new OjStyleElement('<div class="media"></div>')},_resize:function(){if(!this._media){return}if(this._source_is_css){this._media.width=OjStyleElement.AUTO;this._media.height=OjStyleElement.AUTO;return}var b=this._getStyleBackup("width"),c=this._getStyleBackup("height");if(!isEmpty(b)){this._media.width=["100","%"];if(c){this._media.height=["100","%"]}else{this._media.height=OjStyleElement.AUTO}}else{if(!isEmpty(c)){this._media.height=["100","%"];this._media.width=OjStyleElement.AUTO}else{if(this._resizeBy==this.$.WIDTH){this._media.width=["100","%"];this._media.height=OjStyleElement.AUTO}else{this._media.height=["100","%"];this._media.width=OjStyleElement.AUTO;var a=this.width;if(b>a){this._media.marginLeft=(a-b)/2}}}}},_setIsDisplayed:function(a){this._s(OjComponent,"_setIsDisplayed",arguments);if(a&&!this._loaded){this._load()}},_setSource:function(a){this._source=a},_unload:function(){this._source=null;this._loaded=false;if(this.loading){this._u("loading")}if(this._media){this._media.maxWidth=OjStyleElement.AUTO;this._media.maxHeight=OjStyleElement.AUTO}this.removeCss("is-loaded");this.dispatchEvent(new OjEvent(OjEvent.UNLOAD))},_onMediaLoad:function(a){this._u("loading");this._loaded=true;if(this._media){if(this._original_w){this._media.maxWidth=this._original_w}if(this._original_h){this._media.maxHeight=this._original_h}}this._resize();this.addCss("is-loaded");this.dispatchEvent(new OjEvent(OjEvent.LOAD))},clone:function(){var a=this._s(OjComponent,"clone",arguments);a.source=this._source;return a},isLoaded:function(){return this._loaded},load:function(){if(!this._loaded&&this._source){this._load()}},unload:function(){if(this._loaded&&this._source){this._unload()}},".originalHeight":function(){return this._original_h},".originalWidth":function(){return this._original_w},"=source":function(a){if(Array.isArray(a)){a=a.join(", ")}else{if(a){a=a.toString()}}if(this._source==a){return}this.unload();if(!this.loading&&this._showSpinner){this.appendElm(this.loading=new OjSpinner(this._spinnerTint))}this._setSource(a);if(this._preload||this._is_displayed){this._load()}},"=resizeBy":function(a){if(this._resizeBy==a){return}this._resizeBy=this._resize_vals.indexOf(a)>-1?a:this.$.NONE;this._resize()},_setHeight:function(a){this._s(OjComponent,"_setHeight",arguments);this._height=a},_setWidth:function(a){this._s(OjComponent,"_setWidth",arguments);this._width=a}},{NONE:"none",FILL:"fill",FIT:"fit",HEIGHT:"hFill",WIDTH:"wFill"});OJ.extendComponent("OjImage",[OjMedia],{_source_is_css:false,_d:function(){if(this._img){this._img.removeEventListener("load",this._callback)}this._callback=this._img=null;return this._s(OjMedia,"_d",arguments)},_load:function(){if(!this._source_is_css&&this._img){this._loaded=false;this._img.src=this._source}},_makeMedia:function(){return this._s(OjMedia,"_makeMedia",arguments)},_resize:function(){this.removeCss(this._resize_vals);if(this._resizeBy==this.$.NONE){return}this.addCss(this._resizeBy)},_onMediaLoad:function(a){if(this._source_is_css){this._media.addCss(this._source.substring(1));this._original_w=this._media.width;this._original_h=this._media.height}else{this._original_w=this._img.width;this._original_h=this._img.height;if(!this.width){this.width=this._original_w}if(!this.height){this.height=this._original_h}this._setStyle("backgroundImage","url("+this.source+")")}return this._s(OjMedia,"_onMediaLoad",arguments)},_setSource:function(a){this._s(OjMedia,"_setSource",arguments);if(a){if(this._source_is_css=(this._source.charAt(0)=="@")){this.appendElm(this._media=this._makeMedia());this._onMediaLoad(null)}else{if(!this._img){this._img=new Image();this._img.addEventListener("load",this._callback=this._onMediaLoad.bind(this))}}}},_unload:function(){if(!this._source_is_css){this._setStyle("backgroundImage",null)}this._u("_media");this._source_is_css=false;this._s(OjMedia,"_unload",arguments)}},{_TAGS:["img","image"],image:function(a){if(a){if(isString(a)){return new OjImage(a)}if(a.is("OjImage")){return arguments.length>1&&arguments[1]?a.clone():a}}return null}});OJ.extendComponent("OjFlash",[OjMedia],{_tag:"<object></object>"},{_TAGS:["flash"]});OJ.extendComponent("OjOverlay",[OjComponent],{_p_:{forceIcon:true,forceMessage:false,message:null,icon:null},_v_align:OjStyleElement.MIDDLE,_t:"<div><div class=box><div var=icn></div><label var=msg></label></div></div>",_c:function(){var a=arguments,c=arguments.length,b;this._s(OjComponent,"_c",[]);if(c){this.message=a[0];if(c>1){b=a[1]}}this.icon=b},_onFadeComplete:function(a){if(this._fader.direction==OjFade.OUT&&this.parent){this.parent.removeChild(this)}this._s(OjComponent,"_onFadeComplete",arguments)},hide:function(){if(!this.parent){return}this.fadeOut()},show:function(a){if(!a||this.parent==a){return}this.alpha=0;a.appendChild(this);this.fadeIn()},"=message":function(a){if(!a&&this._forceMessage){a="Loading"}if(isEmpty(a)){this.addCss("no-message")}else{this.removeCss("no-message")}this.msg.text=this._message=a},"=icon":function(a){this.icn.removeAllChildren();if(a||this._forceIcon){if(!a){a=new OjSpinner();a.width=40;a.height=40}this.removeCss("no-icon");this.icn.appendChild(a)}else{this.addCss("no-icon")}}},{_TAGS:["overlay"]});OJ.extendComponent("OjView",[OjComponent],{_p_:{controller:null,footer:null,header:null,icon:null,shortTitle:null,stack:null,title:null},_g_p_:{actionView:null,cancelView:null,titleView:null},_loading_msg:"Loading",_t:"<div><div var=container></div></div>",_loaded:false,_unloading_msg:"UnLoading",_c:function(){this._s(OjComponent,"_c",[]);this._load_checkpoints={};this._unload_checkpoints={};var a=arguments,b=a.length,d=this.$.SHORT_TITLE,c=this.$.TITLE;if(b){this.content=a[0];if(b>1){c=a[1];if(b>2){d=a[2]}}}this.title=c;if(d){this.shortTitle=d}if(this.$.ICON){this.icon=this.$.ICON}},_d:function(){this.unload();this._u(["_actionView","_cancelView","_titleView","_overlay"]);return this._s(OjComponent,"_d",arguments)},_checkpointsCompleted:function(b){for(var a in b){if(!b[a]){return false}}return true},_hideOverlay:function(a){if((a=a||this._overlay)){a.addEventListener(OjEvent.HIDE,this,"_onOverlayHide");a.hide()}},_load:function(){this._loaded=true;this.removeCss("loading");this.redraw();this._hideOverlay();this.dispatchEvent(new OjEvent(OjView.LOAD))},_loadCheckpoint:function(){var a=arguments;if(a.length){this._load_checkpoints[a[0]]=true}if(this._checkpointsCompleted(this._load_checkpoints)){this._load()}else{this._showOverlay(this._loading_msg,this._loading_icon)}},_resetCheckpoints:function(b){var a;for(a in b){b[a]=false}},_showOverlay:function(){var b=arguments,d=b.length,e=d?b[0]:null,c=d>1?b[1]:null,a=this._overlay;if(a){a.message=e;a.icon=c}else{a=this._overlay=new OjOverlay(e,c)}a.show(this);return a},_unload:function(){this._loaded=true;this._hideOverlay();this.dispatchEvent(new OjEvent(OjView.UNLOAD))},_unloadCheckpoint:function(){var a=arguments;if(a.length){this._unload_checkpoints[a[0]]=true}if(this._checkpointsCompleted(this._unload_checkpoints)){this._unload()}else{this._showOverlay(this._unloading_msg,this._unloading_icon)}},_onOverlayHide:function(a){this._u("_overlay")},load:function(){if((!arguments.length||!arguments[0])&&this._loaded){return false}this.addCss("loading");this._resetCheckpoints(this._load_checkpoints);this._loadCheckpoint();return true},unload:function(){if(this._loaded){this._resetCheckpoints(this._unload_checkpoints);this._unloadCheckpoint()}},".content":function(){return this.elms},"=content":function(b){this.removeAllElms();if(b){b=Array.array(b);var a=b.length;for(;a--;){this.insertElmAt(b[a],0)}}},"=footer":function(b){if(this._footer==b){return}if(this._footer=b){this.removeCss("no-footer");if(!this.ftr){var a=new OjStyleElement();a.addCss("footer");this.container.parent.insertChildAt(this.ftr=a,0)}this.ftr.removeAllChildren();this.ftr.appendChild(b)}else{this._u("ftr");this.addCss("no-footer")}},"=header":function(a){if(this._header==a){return}if(this._header=a){this.removeCss("no-header");if(!this.hdr){var b=new OjStyleElement();b.addCss("header");this.container.parent.insertChildAt(this.hdr=b,0)}this.hdr.removeAllChildren();this.hdr.appendChild(a)}else{this._u("hdr");this.addCss("no-header")}},".icon":function(){return OjImage.image(this._icon,true)},"=icon":function(a){if(this._icon==a){return}this._icon=a;this.dispatchEvent(new OjEvent(OjView.ICON_CHANGE,false))},"=title":function(a){if(this._title==a){return}this._title=a;if(!this._shortTitle){this._shortTitle=a}this.dispatchEvent(new OjEvent(OjView.TITLE_CHANGE,false))}},{SHORT_TITLE:null,TITLE:null,HORIZONTAL:"horizontal",VERTICAL:"vertical",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",ICON_CHANGE:"onTitleChange",LOAD:"onViewLoad",TITLE_CHANGE:"onTitleChange",UNLOAD:"onViewUnload",_TAGS:["view"]});OJ.extendComponent("OjIframe",[OjView],{_source:null,_interval:null,_timeout:60,_t:"<iframe></iframe>",_c:function(){this._s(OjView,"_c",[]);var a=arguments.length;if(a){this.source=arguments[0];if(a>1){this.target=arguments[1]}}this.setAttr("name",this.id)},_onLoad:function(){clearInterval(this._interval);this.dispatchEvent(new OjEvent(OjEvent.COMPLETE))},_onTimeout:function(){clearInterval(this._interval);this.dispatchEvent(new OjIoErrorEvent(OjIoErrorEvent.IO_ERROR))},".source":function(){return this._source},"=source":function(b){var a=this.dom;this._source=b.toString();if(a.src){a.src=this._source}else{if(a.contentWindow!==null&&a.contentWindow.location!==null){}else{this.setAttr("src",this._source)}}if(!isEmpty(this._source)){clearInterval(this._interval);this._interval=setInterval(this._onTimeout.bind(this),this._timeout*1000);var c=this._onLoad.bind(this);if(a.attachEvent){a.attachEvent("onload",c)}else{a.onload=c}}}},{_TAGS:["iframe"]});OJ.extendComponent("OjImageViewer",[OjView],{_images:null,_c:function(){this._images=[];this._s(OjView,"_c",arguments)},".content":function(){return this._images.clone()},"=content":function(b){this.removeAllElms();if(b){this._images=Array.array(b);var a=this._images.length;for(;a--;){this.insertElmAt(new OjImage(this._images[a]),0)}}}},{_TAGS:["imageviewer"]});OJ.defineClass("OjINavController",{_p_:{stack:null},_setupStack:function(){;this._stack.addEventListener(OjStackEvent.CHANGE,this,"_onStackChange");var a=this._stack.numElms;if(a){this._onStackChange(new OjStackEvent(OjStackEvent.CHANGE,this._stack.getElmAt(a-1),OjTransition.DEFAULT,a-1,0))}},_cleanupStack:function(){if(this._stack){this._stack.removeEventListener(OjStackEvent.CHANGE,this,"_onStackChange")}},_onStackChange:function(a){},addView:function(a){var b=this._stack;return b.appendElm.apply(b,arguments)},addViewAt:function(a,b){var c=this._stack;return c.insertElmAt.apply(c,arguments)},gotoView:function(){var c=arguments,e=c.length,b,a=e?c[0]:null,d=e>1?c[1]:true;if(!a||(b=this.indexOfView(a))>-1){return this.gotoViewAt(b,d)}if(b=this.activeIndex){this.replaceViewAt(0,a);return this.gotoViewAt(0)}this.replaceActive(a,d)},gotoViewAt:function(a){return this._stack.activeIndex=arguments},hasView:function(a){return this._stack.hasElm(a)},indexOfView:function(a){return this._stack.indexOfElm(a)},removeActive:function(){return this.removeViewAt(this._stack.activeIndex,arguments.length?arguments[0]:true)},removeView:function(a){var b=this._stack;return b.removeElm.apply(b,arguments)},removeViewAt:function(a,b){var c=this._stack;return c.removeElmAt.apply(c,arguments)},replaceActive:function(a){var c=this._stack,b=arguments;return c.replaceElmAt(this.activeIndex,a,b.length>1?b[0]:true)},replaceView:function(a,c){var b=this._stack;return b.replaceElm.apply(b,arguments)},replaceViewAt:function(a,c){var b=this._stack;return b.replaceElmAt.apply(b,arguments)},".activeView":function(){return this._stack.active},"=activeView":function(a){this._stack.active=a},".activeIndex":function(){return this._stack.activeIndex},"=activeIndex":function(a){this._stack.activeIndex=a},"=stack":function(a){if(this._stack){if(this._stack==a){return}this._cleanupStack()}this._stack=a;a.controller=this;this._setupStack()}});OJ.extendComponent("OjNavController",[OjComponent,OjINavController],{_c:function(){this._s(OjComponent,"_c",[]);if(arguments.length){this.stack=arguments[0]}},_d:function(){this._cleanupStack();return this._s(OjComponent,"_d",arguments)}},{_TAGS:["nav","navcontroller"]});OJ.extendComponent("OjLabel",[OjComponent],{_p_:{prefix:null,suffix:null},_t:"<label></label>",_c:function(a){this._s(OjComponent,"_c",[]);this.text=a},_processDomSourceChildren:function(b,c){var a=b.innerHTML;if(!isEmpty(a)){this.text=String.string(this.text)+String.string(a);return}return this._s(OjComponent,"_processDomSourceChildren",arguments)},_redrawText:function(){var a=this;a.dom.innerHTML=String.string(a.prefix).html()+String.string(a.text).html()+String.string(a.suffix).html()},appendText:function(a){this.text=String.string(this.text)+String.string(a)},prependText:function(a){this.text=String.string(a)+String.string(this.text)},redraw:function(){if(this._s(OjComponent,"redraw",arguments)){this._redrawText();return true}return false},"=prefix":function(a){if(this._prefix==a){return}this._prefix=a;this.redraw()},"=suffix":function(a){if(this._suffix==a){return}this._suffix=a;this.redraw()},".text":function(){return this._text},"=text":function(a){if(this._text==a){return}this._text=a;this.redraw()}},{_TAGS:["label"]});OJ.extendClass("OjStackEvent",[OjEvent],{_g_p_:{index:null,oldIndex:null,transition:null,view:null},_c:function(d,a,f,c){var b=[d,false,false],e=arguments.length;this._view=a;this._transition=f;this._index=c;if(e>4){this._oldIndex=arguments[4];if(e>5){b[1]=arguments[5];if(e>6){b[2]=arguments[6]}}}this._s(OjEvent,"_c",b)}},{ACTIVE:"onStackViewActive",ADD:"onStackViewAdd",CHANGE:"onStackChange",CHANGE_COMPLETE:"onStackChangeComplete",INACTIVE:"onStackViewInactive",MOVE:"onStackViewMove",REMOVE:"onStackViewRemove",REPLACE:"onStackViewReplace"});OJ.extendClass("OjDimTween",[OjPropTween],{_p_:{amount:null,direction:null},_c:function(){var a=this;a._s(OjPropTween,"_c",[]);a._to={};a._processArguments(arguments,{target:undefined,direction:a.$.BOTH,amount:undefined,duration:250,easing:OjEasing.NONE,units:OJ._("dimUnit")})}},{HORIZONTAL:"dimTweenHorizontal",VERTICAL:"dimTweenVertical",BOTH:"dimTweenBoth"});OJ.extendClass("OjMove",[OjDimTween],{"=amount":function(d){var b=this,c=b.direction,a=OjMove,e=b._to;if(b._amount==d){return}b._amount=d;if(c==a.BOTH){e.x=d[0];e.y=d[1]}else{if(c==a.X){e.x=d}else{e.y=d}}}},{X:OjDimTween.HORIZONTAL,Y:OjDimTween.VERTICAL,BOTH:OjDimTween.BOTH});OJ.extendClass("OjTweenSet",[OjActionable],{_p_:{tweens:null},_g_p_:{numTweens:null,isFinished:false},_c:function(){var a=this,b=arguments;a._completed=[];a._tweens=[];a._s(OjActionable,"_c",[]);if(b.length){if(isArray(b[0])){this.tweens=b[0]}else{this.tweens=Array.array(arguments)}}},_d:function(c){var a=this,b=a._tweens;this.stop();if(c){b.forEachReverse(function(d){OJ.destroy(d,c)})}else{b.forEachReverse(function(d){a.removeTween(d)})}return a._s(OjActionable,"_d",arguments)},_checkCompleted:function(){var b=this,a=OjTweenEvent;if(b._tweens.length==b._completed.length&&!b.isFinished){b.dispatchEvent(new a(a.COMPLETE))}},_onTweenComplete:function(a){var b=this,d=b._completed,c=a.target;if(!d.contains(c)){d.append(c)}b._checkCompleted()},_controlTweens:function(b,a){this._tweens.forEachReverse(function(c){c[b].apply(c,a)})},start:function(){this._controlTweens("start",arguments)},pause:function(){this._controlTweens("pause",arguments)},stop:function(){this._controlTweens("stop",arguments)},reverse:function(){this._controlTweens("reverse",arguments)},addTween:function(b){var a=this;if(a.hasTween(b)){return}a._isFinished=false;b.addEventListener(OjTweenEvent.COMPLETE,a,"_onTweenComplete");return a._tweens.append(b)},removeTween:function(c){var a=this,d=a._tweens,b=d.indexOf(c);if(b==-1){return}c.removeEventListener(OjTweenEvent.COMPLETE,a,"_onTweenComplete");d.removeAt(b);a._checkCompleted();return c},hasTween:function(a){return this._tweens.contains(a)},".numTweens":function(){return this._tweens.length},".tweens":function(){return this._tweens.clone()},"=tweens":function(b){var a=this;a._tweens.forEachReverse(function(c){a.removeTween(c)});if(b){b.forEachReverse(function(c){a.addTween(c)})}}});OJ.defineClass("OjIFlowNavController",{_p_:{cancelLabel:"Cancel",cancelVisible:false,title:null},_t:"<div class=flow-nav-controller><div var=bottom><div var=btmLeft class=left v-align=m></div><div var=btmTitle class=title v-align=m></div><div var=btmRight class=right v-align=m></div></div><div var=top><div var=topLeft class=left v-align=m></div><div var=topTitle class=title v-align=m></div><div var=topRight class=right v-align=m></div></div></div>",_makeBackButton:function(a){var b=new OjButton(a.shortTitle);b.addCss("back-button");return b},_makeCancelButton:function(b){var a=new OjButton(b);a.addCss("cancel-button");return a},_makeTitle:function(a){var b=new OjLabel(a);b.vAlign=OjStyleElement.MIDDLE;return b},_update:function(k,p,i,o){this._u("_tween");;if(!k){return}var l=this.top,g=this.topLeft,c=this.topTitle,d=this.topRight,w=this.bottom,f=this.btmLeft,s=this.btmTitle,y=this.btmRight,h=g.numChildren?this.topLeft.getChildAt(0):null,x=c.numChildren?c.getChildAt(0):null,u=d.numChildren?d.getChildAt(0):null,j=k.actionView,z=k.cancelView,r=k.titleView,A;if(!r&&(A=k.title)){r=this._makeTitle(A)}if(this._back_btn){this._back_btn.removeEventListener(OjUiEvent.PRESS,this,"_onBackClick")}else{if(this._cancel_btn){this._cancel_btn.removeEventListener(OjUiEvent.PRESS,this,"_onCancelClick")}}if(!z){if(i>0){z=this._makeBackButton(this._stack.getElmAt(i-1))}else{if(this._cancelVisible){z=this._cancel_btn=this._makeCancelButton(this._cancelLabel)}}}if(i>0){this._back_btn=z;z.addEventListener(OjUiEvent.PRESS,this,"_onBackClick")}else{if(this._cancelVisible){this._cancel_btn=z;z.addEventListener(OjUiEvent.PRESS,this,"_onCancelClick")}}if(h!=z){if(h){f.appendChild(h)}if(z){g.appendChild(z)}}if(u!=j){if(u){y.appendChild(u)}if(j){d.appendChild(j)}}if(x!=r){if(x){s.appendChild(x)}if(r){c.appendChild(r)}}l.x=0;l.alpha=1;w.x=0;w.alpha=1;var q=p&&p.effect?p.effect:OjTransition.DEFAULT;if(q==OjTransition.NONE){this.removeCss("animating");l.show();w.hide();f.removeAllChildren();s.removeAllChildren();y.removeAllChildren();return}this.addCss("animating");this._tween=new OjTweenSet();var v=0,a=p.duration,n=p.easing,m=this.width;if(o!=-1){if(o>i){v=m*-0.5}else{if(o<i){v=m*0.5}}}if(v&&q!=OjTransition.FADE){w.x=0;l.x=v;l.alpha=0;this._tween.addTween(new OjMove(w,OjMove.X,-1*v*0.5,a*0.5),n[1]);this._tween.addTween(new OjMove(l,OjMove.X,0,a,n[1]))}else{l.alpha=0}this._tween.addTween(new OjFade(w,OjFade.OUT,a,n[1]));this._tween.addTween(new OjFade(l,OjFade.IN,a,n[0]));this._tween.addEventListener(OjTweenEvent.COMPLETE,this,"_onTweenComplete");this._tween.start()},_onBackClick:function(a){this.back()},_onCancelClick:function(a){this.dispatchEvent(new OjEvent(OjEvent.CANCEL,false))},_onBackComplete:function(a){this._stack.removeItemAt(this._stack.length-1);this._stack.removeEventListener(OjStackEvent.CHANGE_COMPLETE,this,"_onBackComplete")},_onStackChange:function(a){this._update(a.view,a.transition,a.index,a.oldIndex)},_onTweenComplete:function(a){this._u("_tween");this.btmLeft.removeAllChildren();this.btmTitle.removeAllChildren();this.btmRight.removeAllChildren();this.removeCss("animating")},back:function(){this._stack.removeElm(this._stack.active);this.dispatchEvent(new OjEvent(OjFlowNavController.BACK))},"=title":function(b){var a=this;if(a._title==b){return}if(!a.titleLbl){a.titleLbl=a._makeTitle();a.topTitle.appendChild(a.titleLbl)}a.titleLbl.text=a._title=b},"=cancelLabel":function(a){if(this._cancelLabel==a){return}this._cancelLabel=a;if(this._cancel_btn){this._cancel_btn.label=a}},"=cancelVisible":function(a){if(!(this._cancelVisible=a)&&this._cancel_btn){this._u("_cancel_btn")}}});OJ.extendComponent("OjFlowNavController",[OjNavController,OjIFlowNavController],{_c:function(){this._s(OjNavController,"_c",[]);if(arguments.length){this.stack=arguments[0]}},_setupStack:function(){this._s(OjNavController,"_setupStack",arguments);this._stack.transition=new OjTransition(OjTransition.SLIDE_HORZ,250,[OjEasing.IN,OjEasing.OUT]);this._stack.addEventListener(OjStackEvent.ADD,this,"_onStackAdd")},_cleanupStack:function(){this._s(OjNavController,"_cleanupStack",arguments);if(this._stack){this._stack.removeEventListener(OjStackEvent.ADD,this,"_onStackAdd")}},_onStackAdd:function(a){this._stack.active=a.view}},{_TAGS:["flownav"],BACK:"onFlowNavBack"});OJ.extendClass("OjCollectionEvent",[OjEvent],{_g_p_:{items:null,index:null,oldItems:null},_c:function(f,d,e,g,b,a){var c=this,h=[f];c._items=d;c._index=e;c._oldItems=g;if(isSet(b)){h.append(b);if(isSet(a)){h.append(a)}}c._s(OjEvent,"_c",h)},clone:function(){var b=this,a=b._s(OjEvent,"clone",arguments);a._items=b._items;a._index=b._index;a._oldItems=b._oldItems;return a}},{ITEM_ADD:"onItemAdd",ITEM_CHANGE:"onItemChange",ITEM_PRESS:"onItemPress",ITEM_OVER:"onItemOver",ITEM_OUT:"onItemOut",ITEM_MOVE:"onItemMove",ITEM_REMOVE:"onItemRemove",ITEM_REPLACE:"onItemReplace",isChangeEvent:function(a){if(!a){return false}var b=this,c=a.type;return a.is(OjCollectionEvent)&&(c==b.ITEM_ADD||c==b.ITEM_MOVE||c==b.ITEM_REMOVE||c==b.ITEM_REPLACE)}});OJ.extendComponent("OjCollectionComponent",[OjComponent],{_p_:{itemRenderer:null},_c:function(b,a){this._s(OjComponent,"_c",arguments);this._item_events={};this._rendered={};if(a){this.itemRenderer=a}this.elms=b?b:new OjArray()},_d:function(){var b=this._rendered,a;for(a in b){OJ.destroy(b[a])}this._rendered=this._item_events=null;this._s(OjComponent,"_d",arguments)},_addItemListener:function(c){if(!this._item_events[c]){var a=this._convertItemEventType(c),b;if(a){for(b in this._rendered){this._rendered[b].addEventListener(a[0],this,a[1])}this._item_events[c]=a[0]}}},_convertItemEventType:function(b){var c=OjCollectionEvent,a=OjUiEvent;if(b==c.ITEM_PRESS){return[a.PRESS,"_onItemPress"]}if(b==c.ITEM_OVER){return[a.OVER,"_onItemOver"]}if(b==c.ITEM_OUT){return[a.OUT,"_onItemOut"]}return null},_dispatchItemEvent:function(b,a){var c=a.currentTarget;if(this._itemRenderer){c=c.data}this.dispatchEvent(new OjCollectionEvent(b,c,this._items.indexOf(c)))},_releaseItem:function(a){if(a){OJ.destroy(a);delete this._rendered[a.id]}},_removeItemListener:function(c){if(!this.hasEventListener(c)){var a=this._convertItemEventType(c),b;if(a){for(b in this._rendered){this._rendered[b].removeEventListener(a[0],this,a[1])}delete this._item_events[c]}}},_onItemAdd:function(a){this.dispatchEvent(a.clone())},_onItemChange:function(a){this.dispatchEvent(a.clone())},_onItemPress:function(a){this._dispatchItemEvent(OjCollectionEvent.ITEM_PRESS,a)},_onItemOut:function(a){this._dispatchItemEvent(OjCollectionEvent.ITEM_OUT,a)},_onItemOver:function(a){this._dispatchItemEvent(OjCollectionEvent.ITEM_OVER,a)},_onItemMove:function(a){this.dispatchEvent(a.clone())},_onItemRemove:function(a){this.dispatchEvent(a.clone())},_onItemReplace:function(a){this.dispatchEvent(a.clone())},_callElmFunc:function(b,a){return this._callElmProp(b).apply(this.elms,a)},_callElmProp:function(e,d){var b=this.$,a=this.elms,c;c=b.ELM_FUNCS[e];if(arguments.length>1){a[c]=d}return a[c]},addEventListener:function(a){this._s(OjComponent,"addEventListener",arguments);this._addItemListener(a)},removeEventListener:function(a){this._s(OjComponent,"removeEventListener",arguments);this._removeItemListener(a)},renderItem:function(e,c){if(!e){return null}var d,b,f=isObjective(e)?e.id:(isUnset(c)?e.toString():c);if(this._rendered[f]){return this._rendered[f]}var a=this.itemRenderer;e=a?new a(this,e):e;for(d in this._item_events){b=this._convertItemEventType(d);e.addEventListener(b[0],this,b[1])}return this._rendered[f]=e},renderItemAt:function(a){return this.renderItem(this._items[a])},".elms":function(){return this._elms},"=elms":function(t){var m=this,i=m._elms;t=OjArray.array(t);if(i==t){return}var b=OjCollectionEvent,h=b.ITEM_ADD,l="_onItemAdd",r=b.ITEM_CHANGE,p="_onItemChange",g=b.ITEM_MOVE,q="_onItemMove",j=b.ITEM_OUT,s="_onItemOut",e=b.ITEM_OVER,d="_onItemOver",c=b.ITEM_PRESS,o="_onItemPress",k=b.ITEM_REMOVE,n="_onItemRemove",f=b.ITEM_REPLACE,a="_onItemReplace";if(i){i.removeEventListener(h,m,l);i.removeEventListener(r,m,p);i.removeEventListener(g,m,q);i.removeEventListener(j,m,s);i.removeEventListener(e,m,d);i.removeEventListener(c,m,o);i.removeEventListener(k,m,n);i.removeEventListener(f,m,a)}this._elms=t;t.addEventListener(h,m,l);t.addEventListener(r,m,p);t.addEventListener(g,m,q);t.addEventListener(k,m,n);t.addEventListener(f,m,a);return true},"=itemRenderer":function(a){a=isString(a)?OJ.stringToClass(a):a;if(a==this._itemRenderer){return}this._itemRenderer=a}},{_TAGS:["collection"],ELM_FUNCS:{appendElm:"append",elms:"items",forElm:"for",forReverseElm:"forReverse",getElmAt:"getAt",hasElm:"contains",indexOfElm:"indexOf",insertElmAt:"insertAt",moveElm:"move",prependElm:"prepend",numElms:"length",removeAllElms:"removeAll",removeElm:"remove",removeElmAt:"removeAt",replaceElm:"replace",replaceElmAt:"setAt"}});OJ.extendClass("OjResize",[OjDimTween],{"=amount":function(a){this._s(OjDimTween,"=amount",arguments);if(this._direction==OjResize.BOTH){this._to.width=a[0];this._to.height=a[1]}else{if(this._direction==OjResize.WIDTH){this._to.width=a}else{this._to.height=a}}}},{WIDTH:OjDimTween.HORIZONTAL,HEIGHT:OjDimTween.VERTICAL,BOTH:OjDimTween.BOTH});OJ.extendClass("OjTransition",[OjObject],{_p_:{easing:null,effect:null,duration:null},_c:function(){this._s(OjObject,"_c",[]);this._processArguments(arguments,{effect:OjTransition.FADE,duration:250,easing:[OjEasing.NONE,OjEasing.NONE]})},_getEasing:function(b){var c=this.easing,a=c.length;if(a){if(a>1&&b==OjTransition.OUT){return c[1]}return c[0]}return null},_makeNone:function(b,a){return null},_makeFade:function(c,b,a){return new OjFade(c,a?OjFade.IN:OjFade.OUT,this.duration,this._getEasing(b))},_makeFlip:function(c,b,a){return new OjFlip(c,a,this.duration,this._getEasing(b))},_makeSlideHorz:function(c,b,a){return new OjMove(c,OjMove.X,a,this.duration,this._getEasing(b))},_makeSlideVert:function(c,b,a){return new OjMove(c,OjMove.Y,a,this.duration,this._getEasing(b))},_makeZoom:function(c,b,a){return null},make:function(c,b,a){return this["_make"+this.effect.ucFirst()].apply(this,arguments)},".easing":function(){var a=this._easing;return a?a.clone():null},"=easing":function(a){if(!isArray(a)){a=[a,a]}this._easing=a}},{DEFAULT:null,NONE:"none",FADE:"fade",FLIP:"flip",SLIDE_HORZ:"slideHorz",SLIDE_VERT:"slideVert",ZOOM:"zoom",transition:function(b){if(isObjective(b)&&b.is("OjTransition")){return b}var a=arguments,c=a.length;if(isString(b)){var d=c>1&&a[1]?a[1]:OjTransition.DEFAULT,e=d.easing;a=b.fulltrim(" ").split(",");c=a.length;return new OjTransition(c?a[0]:d.effect,c>1?a[1]:d.duration,[c>2?OjEasing[a[2]]:e[0],c>3?OjEasing[a[3]]:e[1]])}return new OjTransition(OjTransition.NONE,250)}});OjTransition.DEFAULT=new OjTransition(OjTransition.NONE,250);OJ.extendComponent("OjStack",[OjCollectionComponent],{_p_:{active:null,activeIndex:-1,allowLooping:false,alwaysTrans:false,autoSizeHeight:false,autoSizeWidth:false,transition:null},_current_index:0,_prev_index:-1,_c:function(c,d,a){var b=this;b._s(OjCollectionComponent,"_c",[]);if(a){b.itemRenderer=a}b.transition=d||OjTransition.NONE;b._items=OjArray.array(c||[])},_d:function(){var b,a=arguments,c=a.length&&a[0];this._u("_trans_in",true);this._u("_trans_out",true);if(this._prev_active){this._removeActive(this._prev_active);this._prev_active=null}if(this._active){this._removeActive();this._active=null}if(c>1){b=this.numElms;for(;b--;){OJ.destroy(this.renderItemAt(b),c)}}this._controller=this._transition=null;return this._s(OjCollectionComponent,"_d",a)},_callElmFunc:function(f,c){var a=this,e=a.transition,b=-1;switch(f){case"removeAllElms":b=0;break;case"removeElmAt":case"appendElm":case"removeElm":b=1;break;case"insertElmAt":case"replaceElmAt":case"moveElm":case"replaceElm":b=2;break}if(b>-1){if(c.length>b){this.transition=this._processTransParam(c[b]);c.removeLast()}}var d=a._callElmProp(f).apply(a.elms,c);if(b>-1){this.transition=e}return d},_processDomSourceChild:function(a,b){if(OjElement.isTextNode(a)){return false}return this._s(OjCollectionComponent,"_processDomSourceChild",arguments)},_processDomSourceChildren:function(a,d){var c=a.childNodes,e=c.length,b=0,f;for(;b<e;b++){if(f=this._processDomSourceChild(c[b],d)){f.parent=null;this.appendElm(f);b+=c.length-e;e=c.length}}},_addActive:function(b,a){this._active=b;this._activeIndex=a;this._addActiveElm(this.renderItem(b))},_addActiveElm:function(a){a.isActive=true;this.container.appendChild(a)},_animationDirection:function(b,a){return b<a?-1:1},_dispatchChangeComplete:function(){this.dispatchEvent(new OjStackEvent(OjStackEvent.CHANGE_COMPLETE,this._active,this._transition,this._activeIndex,this._prev_index))},_makeTransIn:function(c){var b=0,d,a=this.container;this._u("_trans_in");if(!c){return null}d=a.getChildAt(Math.bounds(a.numChildren-1,0,1));switch(this._transition.effect){case OjTransition.FADE:if(this._trans_out){return null}b=1;break;case OjTransition.SLIDE_HORZ:d.x=-1*c*a.width;break;case OjTransition.SLIDE_VERT:d.y=-1*c*a.height;break}if(this._trans_in=this._transition.make(d,OjTransition.IN,b)){this._trans_in.addEventListener(OjTweenEvent.COMPLETE,this,"_onTransIn");this._trans_in.start();this._setIsAnimating(true)}else{if(!this._trans_out){this._dispatchChangeComplete()}}return this._trans_in},_makeTransOut:function(c){var b=0,a=this.container,d=a.getChildAt(0);this._u("_trans_out");if(d){switch(this._transition.effect){case OjTransition.SLIDE_HORZ:b=d.x+(c*a.width);break;case OjTransition.SLIDE_VERT:b=d.y+(c*a.height);break}if(this._trans_out=this._transition.make(d,OjTransition.OUT,b)){d.addCss("prev-active");this._trans_out.addEventListener(OjTweenEvent.COMPLETE,this,"_onTransOut");this._trans_out.start();this._setIsAnimating(true)}else{this._removeActive(this._prev_active)}}return this._trans_out},_processIndex:function(a){var b=this.numElms;if(this._allowLooping){a=a%b;if(a<0){return b+a}return a}return Math.bounds(a,0,b-1)},_processTransParam:function(a){if(!a){return OjStack.NONE}if(a===true){return this._transition}return a},_removeActive:function(){var a=arguments,c,d,b=a.length?a[0]:this.getElmAt(this._activeIndex);if(b){d=b;if(this._itemRenderer){c=this.container.numChildren;for(;c--;){d=this.container.getChildAt(c);if(d.data==b){break}}}this._removeActiveElm(d)}},_removeActiveElm:function(a){this.container.removeChild(a);a.removeCss("prev-active");a.width=OjStyleElement.AUTO;a.height=OjStyleElement.AUTO;a.alpha=1;a.isActive=false},_onItemAdd:function(a){this._s(OjCollectionComponent,"_onItemAdd",arguments);var b=a.index,c=a.item;this.dispatchEvent(new OjStackEvent(OjStackEvent.ADD,c,this._transition,b));if(!this._active){this.activeIndex=b}else{this._activeIndex=this._current_index=this.indexOfElm(this._active)}},_onItemMove:function(a){this._s(OjCollectionComponent,"_onItemMove",arguments);this.dispatchEvent(new OjStackEvent(OjStackEvent.MOVE,a.item,this._transition,a.index));if(this._active==a.item){this._activeIndex=this._current_index=a.index}},_onItemRemove:function(a){this._s(OjCollectionComponent,"_onItemRemove",arguments);var d,c=a.item,b=a.index;this.dispatchEvent(new OjStackEvent(OjStackEvent.REMOVE,c,this._transition,b));if(this._active==c){if(this._current_index){this.activeIndex=this._current_index-1}else{if(d=this.numElms){this.activeIndex=d-1}else{this._active=null;this._activeIndex=this._current_index=-1}}}else{if(this._prev_active==c){this._prev_active=null}this._activeIndex=this._current_index=this.indexOfElm(this._active)}},_onItemReplace:function(a){this._s(OjCollectionComponent,"_onItemReplace",arguments);var c=a.item,b=a.index;this.dispatchEvent(new OjStackEvent(OjStackEvent.REPLACE,c,this._transition,b));if(this._activeIndex==b){this._removeActive(this._active);this._addActive(c,this._activeIndex)}},_onTransIn:function(a){this._u("_trans_in");if(!this._trans_out){this._setIsAnimating(false);this._dispatchChangeComplete()}if(!isNull(this._deferred_active)){this.activeIndex=this._deferred_active}},_onTransOut:function(a){this._u("_trans_out");this._removeActive(this._prev_active);if(!this._trans_in){this._setIsAnimating(false);this._dispatchChangeComplete()}this._prev_active=null;this._prev_index=null},next:function(){this.activeIndex=this._current_index+1},prev:function(){this.activeIndex=this._current_index-1},renderItemAt:function(a){return this._s(OjCollectionComponent,"renderItemAt",[this._processIndex(a)])},"=active":function(a){if((arguments[0]=this.indexOfElm(a))>-1){this.activeIndex=arguments}},"=activeIndex":function(f){var b,e,c,d,a;if(isArray(f)){e=f[1];f=f[0]}if(this._current_index==f&&this._active){return}if(this._trans_in){this._deferred_active=arguments;return}b=this._transition;if(e){this.transition=this._processTransParam(arguments[1])}this._deferred_active=null;d=this._alwaysTrans?1:0;this._current_index=f;this._prev_index=-1;if(this._active){this._prev_active=this._active;this._makeTransOut(d=this._animationDirection(this._prev_index=this._activeIndex,f))}if(!this.numElms){this._activeIndex=-1;this._current_index=-1;this._active=null;this.dispatchEvent(new OjStackEvent(OjStackEvent.CHANGE,null,this._transition,-1,this._prev_index));return}f=this._processIndex(f);a=new OjStackEvent(OjStackEvent.CHANGE,c=this.getElmAt(f),this._trans_out||this._alwaysTrans?this._transition:OjTransition.DEFAULT,f,this._prev_index);this._addActive(c,f);if(this._trans_out||this._alwaysTrans){this._makeTransIn(d)}if(e){this.transition=b}this.dispatchEvent(a);if(!this._trans_out&&!this._alwaysTrans){this._dispatchChangeComplete()}},"=allowLooping":function(a){if(this._allowLooping==a){return}if(!(this._allowLooping=a)){var b=this.numElms;if(this._current_index<0){this.activeIndex=(b-this._current_index)%b}else{if(this._current_index>=b){this.activeIndex=this._current_index%b}}}},"=transition":function(a){if(this._transition==a){return}this._transition=OjTransition.transition(a,this._transition)}},{_TAGS:["stack"]});OJ.extendComponent("OjNavStack",[OjStack],{_p_:{controller:null},_d:function(){if(this._active){}if(this._prev_active){this._unload(this._prev_active)}this._s(OjStack,"_d",arguments)},_addActiveElm:function(a){a.controller=this.controller;a.stack=this;a.load();this._s(OjStack,"_addActiveElm",arguments)},_removeActiveElm:function(a){a.unload();a.controller=null;a.stack=null;this._s(OjStack,"_removeActiveElm",arguments)},_onItemRemove:function(a){var d=a.item,b=a.index;this.dispatchEvent(new OjStackEvent(OjStackEvent.REMOVE,d,this._transition,b));if(this._active==d){var c;if(this._current_index){this.activeIndex=this._current_index-1}else{if(c=this.numElms){this.activeIndex=c-1}else{this.activeIndex=[-1,false]}}}else{if(this._prev_active==d){this._prev_active=null}this._current_index=this.indexOfElm(this._active)}},_onItemReplace:function(a){var c=a.item,b=a.index;this.dispatchEvent(new OjStackEvent(OjStackEvent.REPLACE,c,this._transition,b));if(this._activeIndex==b){this._removeActive();this._addActive(this._active=c)}},"=controller":function(a){if(this._controller==a){return}this._controller=a;this._controller.stack=this;if(this._active){this._active.controller=a}}},{_TAGS:["navstack"]});OJ.extendClass("OjAlertEvent",[OjEvent],{_g_p_:{buttonIndex:-1},_c:function(c){var b,a=b=false,d=arguments.length;if(d>1){this._buttonIndex=arguments[1];if(d>2){a=arguments[2];if(d>3){b=arguments[3]}}}this._s(OjEvent,"_c",[c,a,b])}},{BUTTON_PRESS:"onAlertButtonClick"});OJ.extendComponent("OjLink",[OjLabel],{_p_:{downIcon:null,icon:null,overIcon:null,target:"_self",targetHeight:null,targetWidth:null,url:null},_v_align:OjStyleElement.MIDDLE,_t:"<a><span var=icn v-align=m></span><span var=lbl v-align=m></span></a>",_c:function(){this._s(OjLabel,"_c",[]);this._processArguments(arguments,{text:undefined,url:undefined,target:undefined})},_d:function(){OJ.removeEventListener(OjUiEvent.MOVE,this,"_onMouseMove");this._s(OjLabel,"_d",arguments)},_processAttribute:function(c,a,b){if(a.nodeName=="href"){this.url=a.value;return true}return this._s(OjLabel,"_processAttribute",arguments)},_redrawText:function(){var a=this;a.lbl.text=(a.prefix||"")+(a.text||"")+(a.suffix||"")},_updateIcon:function(a){this.icn.removeAllChildren();if(a){this.icn.appendChild(a)}},_onClick:function(a){var b=this.url;if(b){WindowManager.open(b,this.target,{width:this.targetWidth,height:this.targetHeight})}},_onMouseOver:function(a){if(this._overIcon){OJ.addEventListener(OjUiEvent.MOVE,this,"_onMouseMove");this._updateIcon(this._overIcon)}},_onMouseMove:function(a){if(!this.hitTestPoint(a.pageX,a.pageY)){OJ.removeEventListener(OjUiEvent.MOVE,this,"_onMouseMove");this._updateIcon(this._icon)}},_onMouseDown:function(a){if(this._downIcon){this._updateIcon(this._downIcon);this.addEventListener(OjUiEvent.UP,this,"_onMouseUp")}},_onMouseUp:function(a){this.removeEventListener(OjUiEvent.UP,this,"_onMouseUp");this._updateIcon(this._icon)},"=downIcon":function(a){if(this._downIcon==(a=OjImage.image(a))){return}if(this._downIcon=a){this.addEventListener(OjUiEvent.DOWN,this,"_onMouseDown")}else{this.removeEventListener(OjUiEvent.DOWN,this,"_onMouseDown");this.removeEventListener(OjUiEvent.UP,this,"_onMouseUp")}},"=icon":function(a){if(this._icon==(a=OjImage.image(a))){return}this._updateIcon(this._icon=a)},"=overIcon":function(a){if(this._overIcon==(a=OjImage.image(a))){return}if(this._overIcon=a){this.addEventListener(OjUiEvent.OVER,this,"_onMouseOver")}else{this.removeEventListener(OjUiEvent.OVER,this,"_onMouseOver");OJ.removeEventListener(OjUiEvent.MOVE,this,"_onMouseMove")}},"=url":function(a){if(this._url=OjUrl.url(a)){this.addEventListener(OjUiEvent.PRESS,this,"_onClick")}else{this.removeEventListener(OjUiEvent.PRESS,this,"_onClick")}},"=target":function(a){if(isComponent(a)){a=a.id}this._target=a}},{_TAGS:["a"]});OJ.extendComponent("OjButton",[OjLink],{_p_:{label:null},_default_h_align:OjStyleElement.CENTER,_c:function(){this._s(OjLink,"_c",[]);this._processArguments(arguments,{text:undefined,icon:undefined})},redraw:function(){if(this._s(OjLink,"redraw",arguments)){if(OJ.engine==OJ.WEBKIT){this._setStyle("font-size","1px");this._setStyle("font-size",null)}return true}return false},".label":function(){return this.text},"=label":function(a){this.text=a},"=isActive":function(a){this._s(OjLink,"=isActive",arguments);if(this._icon){this._icon.isActive=a}}},{_TAGS:["button"]});OJ.extendClass("OjAlert",[OjComponent],{_p_:{buttons:null,content:null,paneHeight:null,paneWidth:null,selfDestruct:0,title:null},_t:"<div class=flexbox><div var=underlay></div><div var=pane><div var=bar v-align=m></div><div class=content v-align=m><label var=container></label></div><div var=btns></div></div></div>",_c:function(){this._s(OjComponent,"_c",[]);if(this.oj_class_name.indexOf("Alert")>-1){this.btns.appendChild(this.cancelBtn=new OjButton(OjAlert.OK));this.cancelBtn.addEventListener(OjUiEvent.PRESS,this,"_onCancelPress")}this._processArguments(arguments,{content:undefined,title:undefined,buttons:undefined,"cancelBtn.label":OjAlert.CANCEL})},_d:function(){var a=arguments,b=a.length?a[0]:0;if(!b){this.container.removeAllChildren()}return this._s(OjComponent,"_d",arguments)},_onButtonClick:function(a){this.dispatchEvent(new OjAlertEvent(OjAlertEvent.BUTTON_PRESS,this.btns.indexOfChild(a.currentTarget)));WindowManager.hide(this)},_onCancelPress:function(a){this.cancel()},cancel:function(){this.dispatchEvent(new OjEvent(OjEvent.CANCEL));WindowManager.hide(this)},hideButtons:function(){this.addCss("no-buttons");this.btns.hide()},present:function(){WindowManager.show(this)},showButtons:function(){this.removeCss("no-buttons");this.btns.show()},".buttons":function(){return this._buttons?this._buttons.clone():[]},"=buttons":function(d){this._buttons=d=d?d.clone():[];var a=d.length,c=this.btns.numChildren-1,e=a-c,b;if(e>0){for(;e>0;){this.btns.insertChildAt(b=new OjButton(d[a-(e--)]),c+1);b.addEventListener(OjUiEvent.PRESS,this,"_onButtonClick")}}else{if(e<0){for(;e++<0;){OJ.destroy(this.btns.getChildAt(--c-1))}}}for(;c-->1;){b=this.btns.getChildAt(c);b.label=d[c]}},".cancelLabel":function(){return this.cancelBtn.label},"=cancelLabel":function(a){return this.cancelBtn.label=a},"=content":function(a){if(this._content==a){return}this.container.removeAllChildren();this._content=a;if(isString(a)){this.container.text=a.replaceAll("\n","<br />")}else{this.container.appendChild(a)}},"=title":function(a){if(this._title==a){return}this.bar.text=this._title=a},".paneHeight":function(){return this.pane.height},"=paneHeight":function(a){this.pane.height=Array.array(arguments)},".paneWidth":function(){return this.pane.width},"=paneWidth":function(a){this.pane.width=Array.array(arguments)}},{NONE:0,SHALLOW:1,DEEP:2,OK:"Ok",Cancel:"Cancel"});OJ.extendClass("OjModal",[OjAlert,OjINavController],{_p_:{barVisible:true,buttonsVisible:null,closeVisible:null,isFullscreen:false,underlayVisible:true},_t:"<div><div var=underlay></div><div var=pane><flownav var=bar v-align=m cancel-label=Close></flownav><navstack var=container class=content></navstack><div var=btns v-align=m></div></div></div>",_c:function(){this._s(OjAlert,"_c",[]);this.bar.stack=this.stack=this.container;this.closeVisible=true;this.buttonsVisible=false;var a=arguments,b=a.length;if(b){this.addView(a[0]);if(b>1){this.title=a[1]}}if(OJ.is_mobile){this.bar.cancelLabel="&times;"}},_d:function(a){this._u("bar",a||0);this._u("stack",a||0);return this._s(OjAlert,"_d",arguments)},_onDrag:function(a){this.pane.x+=a.deltaX;this.pane.y+=a.deltaY},_onStackChange:function(a){},"=barVisible":function(a){if(this._barVisible=a){this.bar.show()}else{this.bar.hide()}},"=buttonsVisible":function(a){if(this._buttonsVisible=a){this.removeCss("no-buttons")}else{this.addCss("no-buttons")}},".closeVisible":function(){return this.bar.cancelVisible},"=closeVisible":function(a){this.bar.cancelVisible=a;if(a){this.bar.addEventListener(OjEvent.CANCEL,this,"_onCancelPress")}else{this.bar.removeEventListener(OjEvent.CANCEL,this,"_onCancelPress")}},"=isFullscreen":function(a){if(this._isFullscreen=a){this.addCss("fullscreen")}else{this.removeCss("fullscreen")}},"=underlayVisible":function(a){if(this._underlayVisible=a){this.underlay.show()}else{this.underlay.hide()}},"=buttons":function(a){this._s(OjAlert,"=buttons",arguments);if(this.btns.numChildren){this.btns.show()}else{this.btns.hide()}},"=title":function(a){this.bar.title=this._title=a}});OJ.extendManager("WindowManager","OjWindowManager",[OjActionable],{BLANK:"_blank",SELF:"_self",PARENT:"_parent",TOP:"_top",WINDOW:"_window",HIDE:"onWindowHide",SHOW:"onWindowShow",_p_:{alertClass:OjAlert,modalClass:OjModal},_g_p_:{holder:null},_c:function(a){this._s(OjActionable,"_c",[]);if(a){this._modals=a._modals;this._modal_holder=a._modal_holder;this._overlay=a._overlay;if(!OJ.is_ready){OJ.removeEventListener(OjEvent.READY,a,"_onOjReady");OJ.addEventListener(OjEvent.READY,this,"_onOjReady")}OJ.destroy(a)}else{this._modals=[];this._modal_holder=new OjStyleElement();this._modal_holder.addCss("WindowManager");this._modal_holder.hide();if(OJ.is_ready){this._onOjReady(null)}else{OJ.addEventListener(OjEvent.READY,this,"_onOjReady")}}},_calcWindowWidth:function(b,c){var a=OJ.viewport;if(c){return a.width}if(b){return b}if(OJ.is_tablet&&a.width>540){return 540}return Math.round(a.width*0.85)},_calcWindowHeight:function(a,c){var b=OJ.viewport;if(c){return b.height}if(a){return a}if(OJ.is_tablet&&b.height>620){return 620}return Math.round(b.height*0.85)},_isMobileModal:function(a){return a.is(OjModal)&&OJ.is_mobile},_transIn:function(b){var c=new OjFade(b,OjFade.IN,250),e=b.pane,a,d;c.addEventListener(OjTweenEvent.COMPLETE,this,"_onShow");c.start();if(this._isMobileModal(b)){a=e.height;d=e.y;e.y+=a;c=new OjMove(e,OjMove.Y,d,c.duration,OjEasing.OUT);c.start()}},_transOut:function(b){var c=new OjFade(b,OjFade.OUT,250),e=b.pane,a,d;c.addEventListener(OjTweenEvent.COMPLETE,this,"_onHide");c.start();if(this._isMobileModal(b)){a=e.height;d=e.y;c=new OjMove(b.pane,OjMove.Y,d+a,c.duration,OjEasing.OUT);c.start()}},_onShow:function(a){var b=a.currentTarget.target;a=OJ.destroy(a);b.dispatchEvent(new OjEvent(this.SHOW))},_onHide:function(a){var c=this._modal_holder,d=a.currentTarget.target;c.removeChild(d);a=OJ.destroy(a);if(!c.numChildren){c.hide()}d.dispatchEvent(new OjEvent(this.HIDE));var b=d.selfDestruct;if(b){OJ.destroy(d,b)}},_onOjReady:function(a){OJ.removeEventListener(OjEvent.READY,this,"_onOjReady");document.body.appendChild(this._modal_holder.dom);this._modal_holder._setIsDisplayed(true)},alert:function(){var a=this.makeAlert.apply(this,arguments);this.show(a);return a},call:function(a){window.location.href="tel:"+a.path.substring(1)},close:function(){window.close()},email:function(a){window.location.href="mailto:"+a.path.substring(1)},browser:function(b,g,d,a,f){var c=new OjIframe(b),e=this.makeModal(c,g);if(isUnset(f)){f=this._isMobileModal(e)}c.width=[100,"%"];c.height=[100,"%"];e.addCss("browser");e.selfDestruct=OjAlert.DEEP;e.paneWidth=this._calcWindowWidth(d,f);e.paneHeight=this._calcWindowHeight(a,f);return this.show(e)},modal:function(e,g,c,a,f){var b=arguments,d=this.makeModal.apply(this,b);if(isUnset(f)){f=this._isMobileModal(d)}d.selfDestruct=OjAlert.DEEP;d.isFullscreen=f;d.paneWidth=this._calcWindowWidth(c,f);d.paneHeight=this._calcWindowHeight(a,f);this.show(d);return d},hide:function(c){var b=this._modals,a;if((a=b.indexOf(c))==-1){return}b.removeAt(a);this._transOut(c)},hideLoading:function(){var b=arguments,a=b.length?b[0]:this._overlay;if(a){a.hide()}},image:function(a,f,b,i,g){var e=arguments,d=e.length,c=new OjImageViewer(a),h=this.makeModal(c,f);c.width=[100,"%"];c.height=[100,"%"];h.selfDestruct=OjAlert.DEEP;h.paneWidth=this._calcWindowWidth(b,g);h.paneHeight=d>3?e[3]:this._calcWindowHeight(i,g);return this.show(h)},makeAlert:function(){var a=arguments,c=a.length,d=[c?a[0]:null,c>1?a[1]:null,c>2?a[2]:[],OjAlert.OK],b;if(c>3){d[3]=a[3]}else{if(c>2){d[3]=OjAlert.CANCEL}}b=this._alertClass.makeNew(d);if(!d[2]&&!d[3]){b.hideButtons()}b.paneWidth=c>4?a[4]:400;if(c>5){b.paneHeight=a[5]}return b},makeModal:function(){return this._modalClass.makeNew(arguments)},moveToTop:function(a){this._modal_holder.moveChild(a,this._modal_holder.numChildren-1)},open:function(b){if(b.protocol=="mailto"){return this.email(b)}if(b.protocol=="tel"){return this.call(b)}var h=arguments,g=h.length,f=g>1?h[1]:this.BLANK,e=g>2?h[2]:{},d=[],i,c=OJ.viewport,a=OJ.screen;if(b.protocol=="sms"||b.protocol=="mms"){return this.txt(b,e)}if(f!=this.SELF&&f!=this.TOP&&f!=this.PARENT){if(isUnset(e.toolbar)){e.toolbar=0}if(!e.width){e.width=c.width*0.75}if(!e.height){e.height=c.height*0.75}if(isUnset(e.top)){e.top=a.top+Math.round((c.height-e.height)/2)}if(isUnset(e.left)){e.left=a.left+Math.round((c.width-e.width)/2)}for(i in e){d.append(i+"="+e[i])}if(f==this.WINDOW){f=OJ.guid()}}h=[b.toString()];if(f!=this.BLANK){h.append(f);h.append(d.join(","))}window.open.apply(window,h);return f},show:function(b){var a=this._modal_holder;this._modals.append(b);if(!a.isVisible){a.show()}b.show();b.alpha=0;a.appendChild(b);this._transIn(b)},showLoading:function(){var b=arguments,d=b.length,e=d?b[0]:null,c=d>1?b[1]:null,a=this._overlay;if(!a){a=this._overlay=new OjOverlay()}a.message=e;a.icon=c;a.show(this._modal_holder);return a}});OJ.extendComponent("OjItemRenderer",[OjComponent],{_p_:{data:null,group:null},_c:function(){this._s(OjComponent,"_c",[]);this._processArguments(arguments,{group:null,data:null})},_redrawData:function(){return this._is_displayed},redraw:function(){if(this._s(OjComponent,"redraw",arguments)){this._redrawData();return true}return false},"=data":function(a){if(this._data==a){return}this._data=a;this._redrawData()}},{_TAGS:["item"]});OJ.extendComponent("OjList",[OjCollectionComponent],{_default_direction:"vert",_default_renderer:OjItemRenderer,_p_:{direction:null},_c:function(b,a,c){this._s(OjCollectionComponent,"_c",[]);if(a){this.itemRenderer=a}this._processArguments(arguments,{elms:undefined,itemRenderer:this._default_renderer,direction:this._default_direction})},_updateListCss:function(){if(this.container.numChildren){this.removeCss("is-empty")}else{this.addCss("is-empty")}},_onItemAdd:function(a){this.container.insertChildAt(this.renderItem(a.item,a.index),a.index);this._updateListCss();this._s(OjCollectionComponent,"_onItemAdd",arguments)},_onItemMove:function(a){var b=a.index;this.container.moveChild(this.renderItem(a.item,b),b);this._s(OjCollectionComponent,"_onItemMove",arguments)},_onItemRemove:function(a){var b=this.container.removeChildAt(a.index);this._updateListCss();this._s(OjCollectionComponent,"_onItemRemove",arguments);this._releaseItem(b)},_onItemReplace:function(a){var b=a.index,c=this.container.replaceChildAt(this.renderItem(a.item,b),b);this._s(OjCollectionComponent,"_onItemReplace",arguments);this._releaseItem(c)},_onItemPress:function(a){this._s(OjCollectionComponent,"_onItemPress",arguments)},_onItemOver:function(a){this._s(OjCollectionComponent,"_onItemOver",arguments)},_onItemOut:function(a){this._s(OjCollectionComponent,"_onItemOut",arguments)},"=direction":function(a){if(this._direction==a){return}if(this._direction){this.removeCss(this._direction)}this.addCss(this._direction=a);return true},"=elms":function(d){var b=this;if(b._elms==d){return}b._s(OjCollectionComponent,"=elms",arguments);var c,a=b.container,e=b._rendered;a.removeAllChildren();for(c in e){OJ.destroy(e[c])}b._rendered={};b._elms.forEachReverse(function(g,f){a.prependChild(b.renderItem(g,f))});b._updateListCss()}},{HORIZONTAL:"horz",VERTICAL:"vert",_TAGS:["list"]});OJ.extendClass("OjLabelItemRenderer",[OjItemRenderer],{_t:"<div><label var=lbl></label></div>",_redrawData:function(){if(this._s(OjItemRenderer,"_redrawData",arguments)){this.lbl.text=this._data;return true}return false}});OJ.extendComponent("OjItemEditor",[OjItemRenderer],{_p_:{itemRenderer:OjLabelItemRenderer},_t:"<div><div var=holder></div><div var=actions v-align=m><button var=delete_btn on-press=_onDeletePress>&times;</button></div></div>",_resetItem:function(){if(this.item){this.holder.removeAllChildren();this.item=null}},_redrawData:function(){if(this._s(OjItemRenderer,"_redrawData",arguments)){this._resetItem();var b=this.data,a=itemRenderer;if(b){this.holder.appendChild(this.item=new a(this.group,b))}return true}return false},_onDeletePress:function(a){this.group.removeElm(this.data)},"=group":function(a){this._s(OjItemRenderer,"=group",arguments);if(a){this.itemRenderer=a.itemRenderer}}});OJ.extendComponent("OjEditableList",[OjList],{_p_:{itemEditor:OjItemEditor},_getItemRenderer:function(){return this.itemEditor},"=itemEditor":function(a){a=isString(a)?OJ.stringToClass(a):a;if(a==this._itemEditor){return}this._itemEditor=a;return true}},{_TAGS:["elist"]});OJ.extendComponent("OjFieldset",[OjComponent],{_p_:{collapsedIcon:null,collapsedText:"show",collapsable:false,expandedIcon:null,expandedText:"hide",isCollapsed:false,icon:null,title:null},_t:"<fieldset><legend var=legend></legend><a var=actuator></a><div var=container></div></fieldset>",_c:function(){var a=arguments,b=a.length;this._s(OjComponent,"_c",[]);this.actuator.addEventListener(OjUiEvent.PRESS,this,"_onActuatorClick");this.removeChild(this.actuator);if(b){this.title=a[0]}},_processDomSourceChild:function(b,c){var a=b.tagName;if(a&&a.toLowerCase()=="legend"){var d=b.childNodes.length,e;for(;d--;){e=b.childNodes[d];if(OjElement.isTextNode(e)){this.title=e.nodeValue}}return null}return this._processChild(b,c)},_redrawActuator:function(){if(this._is_displayed){if(this._collapsable){this.actuator.height=this.legend.height;if(this._isCollapsed){if(this._collapsedIcon||this._collapsedText){this.actuator.icon=this._collapsedIcon;this.actuator.text=this._collapsedText;this.insertChildAt(this.actuator,1)}else{this.removeChild(this.actuator)}}else{if(this._expandedIcon||this._expandedText){this.actuator.icon=this._expandedIcon;this.actuator.text=this._expandedText;this.insertChildAt(this.actuator,1)}else{this.removeChild(this.actuator)}}}else{this.removeChild(this.actuator)}return true}return false},_redrawLegend:function(){if(this._is_displayed){if(!this.title&&this._title){this.legend.appendChild(this.title=new OjLabel(this._title))}else{if(this.title){this.title.text=this._title}}if(!this.icon&&this._icon){this.legend.appendChild(this.icon=new OjImage(this._icon))}else{if(this.icon){this.icon.source=this._icon}}return true}return false},_onActuatorClick:function(a){if(this._isCollapsed){this.expand()}else{this.collapse()}},_onExpand:function(a){this.removeCss(["collapsed"]);this.height=OjStyleElement.AUTO;OJ.destroy(a)},collapse:function(){var a;if(this._isCollapsed){return}this.isCollapsed=true;a=new OjResize(this,OjResize.HEIGHT,this.legend.height,250,OjEasing.OUT);a.start();this._redrawActuator()},expand:function(){var a;if(!this._isCollapsed){return}this.isCollapsed=false;a=new OjResize(this,OjResize.HEIGHT,this.legend.height+this.container.height,250,OjEasing.OUT);a.addEventListener(OjTweenEvent.COMPLETE,this,"_onExpand");a.start();this._redrawActuator()},redraw:function(){if(this._s(OjComponent,"redraw",arguments)){this._redrawActuator();this._redrawLegend();return true}return false},"=collapsable":function(a){if(this._collapsable==a){return}this._collapsable=a;this._redrawActuator()},"=collapsedIcon":function(a){if(this._collapsedIcon==a){return}this._collapsedIcon=a;this._redrawActuator()},"=collapsedText":function(a){if(this._collapsedText==a){return}this._collapsedText=a;this._redrawActuator()},"=expandedIcon":function(a){if(this._expandedIcon==a){return}this._expandedIcon=a;this._redrawActuator()},"=expandedText":function(a){if(this._expandedText==a){return}this._expandedText=a;this._redrawActuator()},"=icon":function(a){if(this._icon==a){return}this._icon=a;this._redrawLegend()},"=isCollapsed":function(a){if(this._isCollapsed==a){return}if(this._isCollapsed=a){this.addCss("collapsed");this.dispatchEvent(new OjEvent(this.$.COLLAPSE))}else{this.removeCss("collapsed");this.dispatchEvent(new OjEvent(this.$.EXPAND))}},"=title":function(a){if(this._title==a){return}this._title=a;this._redrawLegend()}},{_TAGS:["fieldset"],COLLAPSE:"onCollapse",EXPAND:"onExpand"});OJ.extendComponent("OjImageButton",[OjButton],{_v_align:OjStyleElement.TOP,_c:function(){this._s(OjButton,"_c",[]);this._processArguments(arguments,{icon:null});this.removeChild(this.label)},_processDomSourceChildren:function(b,c){var a=b.innerHTML;if(!isEmpty(a)){this.icon=new OjImage(a.trim());return null}return this._s(OjButton,"_processDomSourceChildren",arguments)},_makeLabel:function(){},".image":function(){return this.icon},"=image":function(a){this.icon=a}},{_TAGS:["imagebutton"]});OJ.extendClass("OjData",[OjActionable],{_p_:{id:null,label:null},_c:function(){this._s(OjActionable,"_c",[]);this._processArguments(arguments,{id:undefined,label:undefined})}});OJ.extendClass("OjEventPhase",[OjObject],{},{BUBBLING:3,CAPTURING:1,TARGETING:2});OJ.extendClass("OjOrientationEvent",[OjDomEvent],{_g_p_:{orientation:null},_c:function(b){var a=Array.array(arguments),c=a.length;if(c>1){this._orientation=a.removeAt(1)[0]}this._s(OjDomEvent,"_c",a)},clone:function(){var a=this._s(OjDomEvent,"clone",arguments);a._orientation=this._orientation;return a}},{convertDomEvent:function(a){var b;a=OjDomEvent.normalizeDomEvent(a);if(a.type==OjDomEvent.ORIENTATION_CHANGE){b=OjOrientationEvent.CHANGE}return new OjOrientationEvent(b,window.orientation,false,false)},isOrientationEvent:function(a){return a==OjOrientationEvent.CHANGE},isOrientationDomEvent:function(a){return a==OjDomEvent.ORIENTATION_CHANGE},PORTRAIT:0,LANDSCAPE_LEFT:90,LANDSCAPE_RIGHT:-90,CHANGE:"onOrienationChange"});OJ.extendClass("OjOption",[OjItemRenderer],{_p_:{dataRenderer:null,isSelected:false},_v_align:OjStyleElement.MIDDLE,_t:"<div><div var=indicator v-align=m><input var=input type=checkbox /></div></div>",_c:function(){var a=arguments,c=a.length,d=OjLabelItemRenderer;if(c>1){var b=a[1];if(isString(b)||b.is("OjItemRenderer")){d=b;a[1]=null}}this._s(OjItemRenderer,"_c",arguments);if(!this._selector){this.dataRenderer=d;this.addEventListener(OjUiEvent.PRESS,this,"_onClick")}},_d:function(){this._selector=this._dataRenderer=null;return this._s(OjItemRenderer,"_d",arguments)},_processDomSourceChild:function(a,b){if(!isEmpty(a.nodeValue)){this.data=(this._data?this._data:"")+a.nodeValue;return null}return this._s(OjItemRenderer,"_processDomSourceChild",arguments)},_redrawData:function(){if(this.option&&this._s(OjItemRenderer,"_redrawData",arguments)){this.option.data=this._data;return true}return false},_onClick:function(a){this.isSelected=!this.isSelected},"=dataRenderer":function(a){if(isString(a)){a=OJ.stringToClass(a)}if(this._dataRenderer==a){return}this._u("option");this._dataRenderer=a;this.option=new a(this._group,this._data);this.option.addCss("option");this.appendElm(this.option)},"=group":function(b){if(this._group==b){return}this._s(OjItemRenderer,"=group",arguments);var a;if(this._group&&(a=this._group.owner)&&a.is(OjSelector)){this._selector=a;this.dataRenderer=a.itemRenderer;this.removeEventListener(OjUiEvent.PRESS,this,"_onClick")}else{this._selector=null;this.dataRenderer=OjLabelItemRenderer;this.addEventListener(OjUiEvent.PRESS,this,"_onClick")}},"=isSelected":function(a){if(this._isSelected==a){return}if(this._isSelected=a){this.addCss("selected");this.input.dom.checked=true}else{this.removeCss("selected");this.input.dom.checked=false}this.dispatchEvent(new OjEvent(OjEvent.CHANGE))}});OJ.extendComponent("OjCheckedOption",[OjOption],{},{_TAGS:["checkbox"]});OJ.extendClass("OjInput",[OjComponent],{_p_:{name:null,placeholder:null,prefix:null,required:false,suffix:null,title:null,validators:null,value:null},_ready:false,_t:"<div><div var=wrapper><label var=lbl></label><div var=psuedoInput><span var=prefix_lbl class=prefix></span><span var=stem><input var=input type=hidden /><label var=dflt></label></span><span var=suffix_lbl class=suffix></span></div></div></div>",_c:function(){this._s(OjComponent,"_c",[]);this._errors=[];this._validators=[];var c="input" in this;if(c&&!isUndefined(this.input.dom.placeholder)){this._u("dflt")}this._processArguments(arguments,{name:null,label:null,value:null,validators:[]});if(c){if(!this._value){this.value=this.input.dom.value}this.input.addEventListener(OjFocusEvent.IN,this,"_onInputFocusIn");this.input.addEventListener(OjFocusEvent.OUT,this,"_onInputFocusOut");this.input.addEventListener(OjDomEvent.CHANGE,this,"_onInputChange")}if(this.oj_class_name=="OjInput"){this.hide()}else{var b=this._supers.length,a;for(;b--;){a=this._supers[b];this.addCss(OJ.classToString(a));if(a==OjInput){break}}}this.addEventListener(OjUiEvent.PRESS,this,"_onClick");this._ready=true},_formatError:function(a){return OJ.tokensReplace(a,this._formatErrorTokens())},_formatErrorTokens:function(){return{INPUT:this.title||this.label||this.placeholder||this.name,VALUE:this.value}},_redrawDefault:function(){if(!this.dflt||isEmpty(this.placeholder)||!isEmpty(this.value)){this.addCss("no-default")}else{this.removeCss("no-default")}return true},_redrawValue:function(){if(this.input){var b=this.input._dom,a=this._value;if(b.value!=a){b.value=a}}},_onDefaultClick:function(a){if(this.input){this.input.focus()}},_onInputFocusIn:function(a){this.addCss("focus")},_onInputFocusOut:function(a){this.removeCss("focus")},_onInputChange:function(a){this.value=this.input.dom.value},_onClick:function(a){if(this.input&&!this.input.hasFocus()){this.focus()}},blur:function(){if(this.input){this.input.blur()}},focus:function(){if(this.input){this.input.focus()}},isValid:function(){this._errors=[];if(this._required&&isEmpty(this._value)){this._errors.append(this._formatError(OjInput.REQUIRED_ERROR));return false}return true},redraw:function(){if(this._s(OjComponent,"redraw",arguments)){this._redrawDefault();return true}return false},validate:function(){if(this.isValid()){this.removeCss(["error"]);return true}this.addCss(["error"]);return false},"=placeholder":function(a){if(this._placeholder==a){return}this._placeholder=a;if(this.dflt){if(a){this.dflt.addEventListener(OjUiEvent.PRESS,this,"_onDefaultClick")}else{this.dflt.removeEventListener(OjUiEvent.PRESS,this,"_onDefaultClick")}this.dflt.text=a;this._redrawDefault()}else{if(this.input){this.input.setAttr("placeholder",a)}}},".error":function(){return this._errors&&this._errors.length?this._errors[0]:null},".errors":function(){return this._errors?this._errors.clone():[]},".form":function(){if(!this._form){var a=this.parentComponent;while(a&&a!=OJ){if(a.is(OjForm)){this._form=a;break}a=a.parentComponent}}return this._form},"=label":function(a){this.lbl.text=this._label=a;if(isEmpty(this._label)){this.addCss("no-label")}else{this.removeCss("no-label")}},"=name":function(a){if(this._name==a){return}if(this._name){this.removeCss(this._name.toLowerCase()+"-input")}if(this._name=a){this.addCss(a.toLowerCase()+"-input")}},".notes":function(){return this.notes?this.notes.text:null},"=notes":function(a){if(!a){this._u("notes_lbl");return}if(!this.notes_lbl){this.notes_lbl=new OjLabel();this.notes_lbl.css="notes";this.psuedoInput.appendChild(this.notes_lbl)}this.notes_lbl.text=a},"=prefix":function(a){if(isString(a)){this.prefix_lbl.text=this._prefix=a}else{if(this._prefix){if(isString(this._prefix)){this.prefix_lbl.removeAllChildren()}else{this.prefix_lbl.removeChild(this._prefix)}}this.prefix_lbl.appendChild(this._prefix=a)}},"=suffix":function(a){if(isString(a)){this.suffix_lbl.text=this._suffix=a}else{if(this._suffix){if(isString(this._suffix)){this.suffix_lbl.removeAllChildren()}else{this.suffix_lbl.removeChild(this._suffix)}}this.suffix_lbl.appendChild(this._suffix=a)}},"=validators":function(a){this._validators=Array.array(a)},".value":function(){return this._value},"=value":function(a){if(a==this._value){return}this._value=a;this._redrawValue();this._redrawDefault();if(this._ready){this.dispatchEvent(new OjEvent(OjEvent.CHANGE))}return true}},{REQUIRED_ERROR:"[%INPUT] is required.",supportsInputType:function(b){var a=document.createElement("input");a.setAttribute("type",b);return a.type==b}});OJ.extendClass("OjComboBox",[OjInput],{_list_visible:false,_ignore_click:false,_allow_none:false,_none_lbl:"-- Select -- ",_c:function(){var a=arguments.length;this._options_index=[];this._s(OjInput,"_c",a>2?[].slice.call(arguments,0,2):arguments);this._list=new OjList();this._list.addEventListener(OjCollectionEvent.ITEM_PRESS,this,"_onItemClick");this._options_dp=this._list.dataProvider;if(a>2){if(a>3){this.options=arguments[3]}this.value=arguments[2]}},_setDom:function(b){this._s(OjInput,"_setDom",arguments);var a=new OjStyleElement('<select class="input"></select>');this.stem.replaceChild(this.input,a);this.input=a;this.dflt.hide()},_showList:function(){if(this._list_visible){return}this._list.alpha=0;this._list.show();var a=this._list.height;this._list.height=0;OJ.destroy(this._tween,true);this._tween=new OjTweenSet(new OjPropTween(this._list,{height:a},250),new OjFade(this._list,OjFade.IN,250));this._tween.addEventListener(OjTweenEvent.COMPLETE,this,"_onTween");this._tween.start();OJ.addEventListener(OjUiEvent.PRESS,this,"_onPageClick");this._list_visible=true},_hideList:function(){if(!this._list_visible){return}OJ.destroy(this._tween,true);this._tween=new OjTweenSet(new OjPropTween(this._list,{height:0},250),new OjFade(this._list,OjFade.NONE,250));this._tween.addEventListener(OjTweenEvent.COMPLETE,this,"_onTween");this._tween.start();OJ.removeEventListener(OjUiEvent.PRESS,this,"_onPageClick");this._trigger_evt=null;this._list_visible=this._ignore_click=false},_redrawList:function(){this.input.removeAllChildren();var a=this._options.length;for(;a--;){this.input.insertChildAt(new OjStyleElement(OJ.tokensReplace('<option value="[%value]">[%label]</option>',{value:this._options[a].id,label:this._options[a].label})),0)}return},_redrawValue:function(){return},_onClick:function(a){if(!this._trigger_evt){this._showList()}if(!this._ignore_click){this._trigger_evt=a;this._ignore_click=false}},_onItemClick:function(a){this.selected=a.item;this._ignore_click=true},_onPageClick:function(a){if(this._trigger_evt==a){return}this._hideList()},_onTween:function(a){this._list.height=OjStyleElement.AUTO;OJ.destroy(this._tween,true)},".allowNone":function(){return this._allow_none},"=allowNone":function(a){this._allow_none=a},".itemRenderer":function(){return this._list.itemRenderer},"=itemRenderer":function(a){this._list.itemRenderer=a;this._redrawValue()},".options":function(){return this._options},"=options":function(a){if(a==this._options){return}var b;this._options=[];if(isObject(a)){for(b in a){this._options.append(new OjData(b,a[b]))}}else{if(isArray(a)&&(b=a.length)&&!isObject(a[0])){for(;b--;){this._options.prepend(new OjData(a[b],a[b]))}}}this._redrawList();this._redrawValue();this.value=this._value;return this._options},".selected":function(){return this._selected},"=selected":function(b){if(this._selected!=b){if(this._options){var a;for(a in this._options){if(this._options[a]==b){this.value=a;return}}if(this._allow_none){this.value=null}else{this.selectedIndex=0}}else{this._selected=b}}},".selectedIndex":function(){return this._selected_index},"=selectedIndex":function(a){if(this._selected_index!=a){if(this._options){this.value=this._options_index[a]}else{this._selected_index=a}}},".value":function(){var c=this._options.length,d=this.input.dom.value,a,b;for(;c--;){a=this._options[c];b=a.id;if(b==d){return a.is(OjData)?b:a}}return null},"=value":function(b){if(isEmpty(b)){b=null}else{if(!isObject(b)){var a=this._options.length;for(;a--;){if(this._options[a].id==b){b=this._options[a];break}}if(!isObject(b)){b=null}}}if(this._s(OjInput,"=value",[b])){this.input.dom.value=b?b.id:null}}});OJ.extendComponent("OjTextInput",[OjInput],{_p_:{minLength:0,maxLength:255},_g_p_:{type:"text"},_c:function(){this._s(OjInput,"_c",arguments);this.input.addEventListener(OjKeyboardEvent.UP,this,"_onInputChange")},_setDom:function(a){this._s(OjInput,"_setDom",arguments);this.input.setAttr("type",this._type)},_formatErrorTokens:function(){var a=this._s(OjInput,"_formatErrorTokens",arguments);a.MAX=this._maxLength;a.MIN=this._minLength;return a},isValid:function(){var b=this._s(OjInput,"isValid",arguments);var a=this._value?this._value.length:0;if(this._minLength&&a<this._minLength){this._errors.append(this._formatError(OjTextInput.MIN_LENGTH_ERROR));b=false}if(this._maxLength&&a>this._maxLength){this._errors.append(this._formatError(OjTextInput.MAX_LENGTH_ERROR));b=false}return b},"=value":function(a){if(isSet(a)){a=String.string(a);if(a.length>this._maxLength){a=a.slice(0,this._maxLength)}}return this._s(OjInput,"=value",[a])}},{EMAIL:"email",TEXT:"text",NUMBER:"number",SECURE:"password",MIN_LENGTH_ERROR:"[%INPUT] must be at least [%MIN] characters long.",MAX_LENGTH_ERROR:"[%INPUT] must be no more than [%MAX] characters long.",_TAGS:["textinput"]});OJ.extendComponent("OjEmailInput",[OjTextInput],{_p_:{maxLength:254,minLength:3},_type:OjTextInput.EMAIL,isValid:function(){var a=this._s(OjTextInput,"isValid",arguments);if(!isEmpty(this._value)&&!this.$.isValidEmail(this._value)){this._errors.append(this._formatError(OjEmailInput.INVALID_ERROR));a=false}return a},"=maxLength":function(a){throw new Error("Cannot set the max length of an email. This is a fixed value.")},"=minLength":function(a){throw new Error("Cannot set the min length of an email. This is a fixed value.")}},{INVALID_ERROR:"[%INPUT] requires a valid email address.",SUPPORTS_EMAIL_TYPE:OjInput.supportsInputType("email"),isValidEmail:function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)},_TAGS:["emailinput"]});OJ.extendComponent("OjNumberInput",[OjTextInput],{_type:OjTextInput.NUMBER,".value":function(){var a=this._s(OjTextInput,".value",[]);if(isEmpty(a)){return 0}return parseFloat(a)}},{_TAGS:["numinput"]});OJ.extendComponent("OjSecureInput",[OjTextInput],{_type:OjTextInput.SECURE},{_TAGS:["secureinput"]});OJ.extendClass("OjDateInput",[OjTextInput],{_onFocusIn:function(a){this._s(OjTextInput,"_onFocusIn",arguments)}});OJ.extendClass("OjValue",[OjComponent],{_p_:{itemRenderer:OjLabelItemRenderer,label:null,name:null,value:null},_t:"<div><div var=wrapper><label var=label></label><div var=value></div></div></div>",_c:function(){this._s(OjComponent,"_c",[]);this._processArguments(arguments,{name:null,label:null,value:null})},_redrawLabel:function(){this.label.text=this._label},_redrawValue:function(){this.value.removeAllChildren();if(isArray(this._value)||(isObjective(this._value)&&this._value.is(OjArray))){this.value.appendChild(new OjList(this._value,this._itemRenderer))}else{this.value.appendChild(new this._itemRenderer(null,this._value))}},"=label":function(a){if(this._label==a){return}this._label=a;this._redrawLabel()},"=name":function(a){if(this._name==a){return}if(this._name){this.removeCss(a+"-value")}this.addCss((this._name=a)+"-value")},"=value":function(a){if(this._value==a){return}this._value=a;this._redrawValue()}});OJ.extendClass("OjDateValue",[OjValue],{_redrawValue:function(){this.value.text=this._value.toLocaleDateString()}});OJ.extendComponent("OjFileInput",[OjInput],{_p_:{minSize:0,maxSize:0,selectionMax:1},_c:function(b,a,d,c){this._s(OjInput,"_c",[b,a]);if(d){this.maxSize=d}if(c){this.minSize=c}},_setDom:function(a){this._s(OjInput,"_setDom",arguments);this.input.setAttr("type","file")},_formatErrorTokens:function(){var a=this._s(OjInput,"_formatErrorTokens",arguments);a.MAX=this._maxSize;a.MIN=this._minSize;return a},_onInputChange:function(a){var c=this.input.dom.files,b=c.length;if(this.allowMultiple){}else{if(b){c=c[0]}}this.value=c},_redrawValue:function(){},isValid:function(){var b=this._s(OjInput,"isValid",arguments);var a=this._value?this._value.size/1000000:0;if(this._minSize&&a<this._minSize){this._errors.append(this._formatError(OjFileInput.MIN_SIZE_ERROR));b=false}else{if(this._maxSize&&a>this._maxSize){this._errors.append(this._formatError(OjFileInput.MAX_SIZE_ERROR));b=false}}return b},"=selectionMax":function(a){if(this._selectionMax==a){return}this.input.setAttr("multiple",(this._selectionMax=a)==1?null:"")}},{MIN_SIZE_ERROR:"[%INPUT] must be at least [%MIN] MB.",MAX_SIZE_ERROR:"[%INPUT] must be no more than [%MAX] MB.",_TAGS:["fileinput"]});OJ.extendClass("OjFilterBox",[OjComboBox],{_item_index:null,_previous_search:null,_c:function(){this._s(OjComboBox,"_c",arguments);this.valueHldr.addEventListener(OjEvent.CHANGE,this,"_onSearch");this.valueHldr.addEventListener(OjFocusEvent.IN,this,"_onFocusIn");this.valueHldr.addEventListener(OjFocusEvent.OUT,this,"_onFocusOut");this._item_index={}},_setDom:function(a){this._s(OjComboBox,"_setDom",arguments);var c=this.valueHldr.parent;var b=new OjTextInput();b.addCss("value");b.addEventListener(OjFocusEvent.IN,this,"_onValueFocus");c.replaceChild(this.valueHldr,b);this.valueHldr=b},_redrawList:function(){var b=arguments.length&&arguments[0]?arguments[0]:null;var c=this._options_dp.length,d=0,a;if(this._options){if(isEmpty(b)||b==this._none_lbl){b=null}else{b=b.toLowerCase()}if(this._previous_search==b){return}this._options_index=[];this._previous_search=b;for(a in this._options){this._options_index.append(a);if(b&&this._options[a]&&this._item_index[a]&&this._item_index[a].indexOf(b)==-1){continue}if(c>d){if(this._options_dp[d]!=this._options[a]){this._options_dp.setItemAt(this._options[a],d)}}else{this._options_dp.addItem(this._options[a])}d++}}else{this._options_index=[]}while(c-->d){this._options_dp.removeItemAt(c)}},_redrawValue:function(){var a=null;if(isObject(this._selected)){if(isFunction(this._selected.toString)){a=this._selected.toString()}else{a=this._value}}else{if(this._selected){a=this._selected.toString()}}this.valueHldr.value=a},_showList:function(){this._redrawList();this._s(OjComboBox,"_showList",arguments)},_hideList:function(){this._s(OjComboBox,"_hideList",arguments);this._redrawValue()},_onSearch:function(a){this._redrawList(this.valueHldr.value)},_onFocusIn:function(a){this._showList()},_onFocusOut:function(a){var b=this.find(a.target);if(!b.length){this._hideList()}},_onValueFocus:function(a){if(this.valueHldr.value==this._none_lbl){this.valueHldr.value=null}},"=options":function(a){var b,c;this._item_index={};for(b in a){if(isString(a[b])){this._item_index[b]=a[b].toLowerCase()}else{if(isNumber(a[b])){this._item_index[b]=a[b].toString()}else{if(isObject(a[b])){if(isFunction(a[b].toString)){this._item_index[b]=a[b].toString().toLowerCase()}else{this._item_index[b]="";for(c in a[b]){if(isString(a[b][c])){this._item_index[b]+=" "+a[b][c].toLowerCase()}else{if(isNumber(a[b][c])){this._item_index[b]+=" "+a[b][c].toString()}}}this._item_index[b]=this._item_index[b].trim()}}}}}this._options=a;this._previous_search=-1;this._redrawValue();this.value=this._value}});OJ.extendComponent("OjForm",[OjView],{_p_:{cancelLabel:"Cancel",resetLabel:"Reset",submitLabel:"Submit"},_getInputs:function(){var a=this._dom.getElementsByClassName("OjInput"),b=[],c=a.length;for(;c--;){b.unshift(OjElement.element(a[c]))}return b},_onSubmitClick:function(a){if(this.submit()&&this._controller){this._controller.removeView(this)}},focus:function(){this._s(OjView,"focus",arguments);var a=this._getInputs();if(a.length){a[0].focus()}},reset:function(){var a=this._getInputs(),b=a.length;for(;b--;){a[b].value=null}},submit:function(){if(this.validate()){this.dispatchEvent(new OjEvent(OjEvent.SUBMIT,false,false));return true}return false},validate:function(){var a=this._getInputs(),c=a.length,b,d="";this._errors=[];for(;c--;){b=a[c];if(!b.validate()){this._errors.unshift({input:b,error:b.error})}}if(!(c=this._errors.length)){return true}for(;c--;){d="\n"+this._errors[c].error+d}WindowManager.alert('Please fix the following issues and re-submit:<span style="font-weight: bold;">'+d+"</span>\nThank you.","Form Error");return false},".actionView":function(){if(!this._actionView){this._actionView=new OjButton(this._submitLabel);this._actionView.addEventListener(OjUiEvent.PRESS,this,"_onSubmitClick")}return this._actionView},".data":function(){var a=this._getInputs(),b=a.length,c={};for(;b--;){c[a[b].name]=a[b].value}return c},"=submitLabel":function(a){if(this._submitLabel==a){return}this._submitLabel=a;if(this._actionView){this._actionView.label=a}}},{_TAGS:["form"]});OJ.extendClass("OjFormError",[OjItemRenderer],{_t:"<div><div var=input></div><list var=errors></list></div>",_redrawData:function(){var b=this._data,a=this.input,c=this.errors;if(b){if(b.input){a.show();a.text=b.input.label}else{a.hide()}if(b.errors){c.show();c.dataProvider.source=b.errors}else{c.hide()}}}});OJ.extendComponent("OjPasswordInput",[OjTextInput],{_minLength:6,_maxLength:30,_setDom:function(a){this._s(OjTextInput,"_setDom",arguments);this.input.setAttr("type","password")},"=minLength":function(){},"=maxLength":function(){}},{_TAGS:["passwordinput"]});OJ.extendClass("OjRadioOption",[OjOption],{_c:function(){this._s(OjOption,"_c",arguments);this.input.setAttr("type","radio")}});OJ.extendComponent("OjSelector",[OjInput],{_p_:{itemRenderer:OjLabelItemRenderer,selectionMin:0,selectionMax:1},_t:"<div><div var=wrapper><label var=label></label><div var=psuedoInput><span var=prefix class=prefix></span><span var=stem><list var=input item-renderer=OjOption></list><label var=dflt></label></span><span var=suffix class=suffix></span></div></div></div>",_c:function(){var a=arguments,b=a.length;this._value=[];this._s(OjInput,"_c",b>2?Array.array(a).slice(0,2):a);this.input.addEventListener(OjCollectionEvent.ITEM_ADD,this,"_onItemAdd");this.input.addEventListener(OjCollectionEvent.ITEM_PRESS,this,"_onItemClick");this.input.addEventListener(OjCollectionEvent.ITEM_MOVE,this,"_onItemMove");this.input.addEventListener(OjCollectionEvent.ITEM_REMOVE,this,"_onItemRemove");this.input.addEventListener(OjCollectionEvent.ITEM_REPLACE,this,"_onItemReplace");this.input.removeEventListener(OjDomEvent.CHANGE,this,"_onChange");if(b>3){this.options=a[3]}},_setDom:function(a){this._s(OjInput,"_setDom",arguments)},_processDomSourceChild:function(b,c){if(OjElement.isTextNode(b)){return}var a=b.innerHTML;if(a){this.input.addItem(OjObject.importData(a.parseJson()))}},_selectOption:function(a,b){if(this._value.indexOf(b)>-1){return}if(this._selectionMax&&this._selectionMax==this._value.length){this.input.renderItem(this._value.shift()).isSelected=false}a.isSelected=true;this._value.append(b);this.dispatchEvent(new OjEvent(OjEvent.CHANGE))},_toggleOptionAt:function(a){var b=this.input.renderItemAt(a),c=this.input.getElmAt(a);if(b.isSelected){this._unselectOption(b,c)}else{this._selectOption(b,c)}},_unselectOption:function(b,c){var a=this._value.indexOf(c);if(a==-1||this._value.length<=this._selectionMin){return}b.isSelected=false;this._value.removeAt(a);this.dispatchEvent(new OjEvent(OjEvent.CHANGE))},_updateSelection:function(){var c=this._value.length;for(;c--;){if(this.input.indexOfElm(this._value[c])==-1){this._value.removeAt(c)}}var b=0,a=this.input.numElms;for(;(c=this._value.length)<this._selectionMin&&b<a;b++){this._selectOption(this.input.renderItemAt(b),this.input.getElmAt(b))}},_onInputChange:function(a){},_onItemAdd:function(a){this._updateSelection()},_onItemClick:function(a){this._toggleOptionAt(a.index)},_onItemMove:function(a){},_onItemRemove:function(a){this._updateSelection()},_onItemReplace:function(a){return;var b,c=this._options[a.index];if((b=this._value.indexOf(c))>-1){this._value[b]=a.item}this.options.getChildAt(a.index).data=a.item},redraw:function(){if(this._s(OjInput,"redraw",arguments)){this.input.redraw();this._updateSelection();return true}return false},"=itemRenderer":function(a){if(isString(a)){a=OJ.stringToClass(a)}if(this._itemRenderer==a){return}this._itemRenderer=a;this.redraw()},".options":function(){return this.input.dataProvider},"=options":function(f){if(f==this.options){return}var e=[],d=this._value.length,c,b,a;for(;d--;){e.unshift(this.input.indexOfElm(this._value[d]))}this._value=[];this.input.dataProvider=f;d=(c=this.options).length;a=e.length;for(;a--;){if((b=e[a])<d){this._selectOption(this.input.renderItemAt(b),c.getItemAt(b))}}this.redraw()},"=value":function(c){c=Array.array(c);if(this._value!=c){if(this._value=c){var a=this.options,b=a.length;for(;b--;){this.input.renderItemAt(b).isSelected=c.indexOf(a[b])>-1}}this.dispatchEvent(new OjEvent(OjEvent.CHANGE))}},".selectionRenderer":function(){return this.input.itemRenderer},"=selectionRenderer":function(a){this.input.itemRenderer=a;if(this.selectionRenderer==OjRadioOption){this.selectionMin=1;this.selectionMax=1}}},{_TAGS:["selector"]});OJ.extendComponent("OjSwitch",[OjInput],{_p_:{},_t:"<div class=off><div var=wrapper><label var=label></label><div var=psuedoInput><div var=slider><label var=prefix></label><label var=suffix></label><div class=highlight></div><span var=stem><input var=input type=hidden /></span></div></div></div></div>",_onClick:function(a){this._s(OjInput,"_onClick",arguments);this.value=!this._value},_redrawValue:function(){this._s(OjInput,"_redrawValue",arguments);if(this._value){this.addCss("on");this.removeCss("off")}else{this.addCss("off");this.removeCss("on")}}},{_TAGS:["switch"]});OJ.extendComponent("OjTextArea",[OjInput],{_p_:{minLength:0,maxLength:0},_setDom:function(a){this._s(OjInput,"_setDom",arguments);var b=this.input.parent,c=new OjStyleElement(OjElement.elm("textarea"));c.addCss("input");b.replaceChild(this.input,c);this.input=c;this.wrapper.vAlign=OjStyleElement.TOP}},{_TAGS:["textarea"]});OJ.extendClass("OjToken",[OjItemRenderer],{_t:"<div><div var=item></div><button var=removeBtn>X</button></div>",_c:function(){this._s(OjItemRenderer,"_c",arguments);this.removeBtn.addEventListener(OjUiEvent.PRESS,this,"_onRemoveClick")},_redrawData:function(){this.item.text=this.data.toString()},_onRemoveClick:function(a){this._list.removeItem(this.data)}});OJ.extendComponent("OjTokenInput",[OjInput],{_p_:{allowNone:true,allowDuplicate:false,options:null,selected:null},_c:function(){var a=arguments.length;this._selected=[];this._value=[];this._s(OjInput,"_c",a>2?[].slice.call(arguments,0,2):arguments);if(a>2){if(a>3){this.options=arguments[3]}this.value=arguments[2]}this.valueHldr.addEventListener(OjCollectionEvent.ITEM_REMOVE,this,"_onListItemRemove");this.filterBox.addEventListener(OjEvent.CHANGE,this,"_onFilterChange")},_addValue:function(a){return this._addValueAt(a,this._value.length,arguments.length>2?arguments[2]:false)},_addValueAt:function(b,a){this._value.insertAt(b,a);if(!this._options){return}this._selected.insertAt(this._options[b],a);this.valueHldr.addItemAt(this._options[b],a);if(!this._allow_duplicate){delete this._available[b];this.filterBox.options=this._available;if(!Object.keys(this._available).length){this.filterBox.hide()}}if(arguments.length<3||!arguments[2]){this.dispatchEvent(new OjEvent(OjEvent.CHANGE,true,true))}return b},_removeValue:function(b){var a=this._value.length;while(a-->0){if(this._value[a]==b){return this._removeValueAt(a,arguments.length>2?arguments[2]:false)}}return null},_removeValueAt:function(a){var b=this._value[a];if(!this._options){this._values.removeAt(a);return b}this.valueHldr.removeItemAt(a);if(arguments.length<3||!arguments[2]){this.dispatchEvent(new OjEvent(OjEvent.CHANGE,true,true))}return b},_moveValueTo:function(b,a){this.dispatchEvent(new OjEvent(OjEvent.CHANGE,true,true))},_onFilterChange:function(a){if(a.target==this.filterBox&&this.filterBox.value!=null){this._addValue(this.filterBox.value);this.filterBox.value=null}},_onListItemRemove:function(a){var b=this._value.removeAt(a.index);this._selected.removeAt(a.index);if(!this._allow_duplicate){this._available[b]=this._options[b];this.filterBox.options=this._available;this.filterBox.show()}},".options":function(a){this._options=a;this._available=OJ.merge({},a);this.filterBox.options=this._available;this.value=this._value.clone()},".tokenRenderer":function(){return this.valueHldr.itemRenderer},"=tokenRenderer":function(a){this.valueHldr.itemRenderer=a},_onChange:function(){},"=value":function(c){var d=[],b=this._value.length;while(b-->0){this._removeValueAt(b,true)}if(c){b=c.length;for(var a=0;a<b;a++){this._addValueAt(c[a],a,true)}}this.dispatchEvent(new OjEvent(OjEvent.CHANGE,true,true))}},{_TAGS:["tokeninput"]});OJ.extendClass("OjFlip",[OjPropTween],{_p_:{direction:"flipLeft",duration:250},_force:false,_c:function(){this._s(OjPropTween,"_c",[]);var a=arguments,b=a.length;if(b){this.target=a[0];if(b>1){this.direction=a[1];if(b>2){this.duration=a[2];if(b>3){this.easing=a[3]}}}}},_onComplete:function(a){if(this._direction==OjFade.NONE){this._target.alpha=1;this._target.hide()}this._s(OjPropTween,"_onComplete",arguments)},start:function(){if(!this._target){return}if(!this._to){this._to={}}if(this._direction==OjFlip.DOWN){if(this._force||this._target.alpha==1){this._target.alpha=0}this._to.alpha=1}else{if(this._direction==OjFlip.RIGHT){if(this._force||this._target.alpha==1){this._target.alpha=0}this._to.alpha=1}else{if(this._direction==OjFlip.UP){if(this._force||this._target.alpha==1){this._target.alpha=0}this._to.alpha=1}else{if(this._force||this._target.alpha==0){this._target.alpha=1}this._to.alpha=0}}}this._target.show();this._s(OjPropTween,"start",arguments)}},{DOWN:"flipDown",LEFT:"flipLeft",RIGHT:"flipRight",UP:"flipUp"});OJ.extendComponent("OjAudio",[OjMedia],{_sources:null,_makeMedia:function(){var a=new OjStyleElement("<audio></audio>");return a},_setSource:function(a){this._s(OjMedia,"_setSource",arguments);if(this.media){this.media.setAttr("src",this._source)}},_onMediaLoad:function(a){},pause:function(){if(this.media){this.media.dom.pause()}},play:function(){if(this.media){this.media.dom.play()}},stop:function(){if(this.media){if(this.media.load){this.media.dom.load()}else{this.media.setAttr("src",null);this.media.setAttr("src",this._source)}}},".sources":function(){if(this._sources){return this._sources.clone()}return[]},"=sources":function(a){this._sources=a?a.clone():[];var c=this._sources.length;if(this.media){for(var b=0;b<c;b++){if(this.media.canPlayType(OjAudio.audioType(this._sources[b]))==""){}}}else{if(c){this.source=this._sources[c]}}}},{MP3:"audio/mpeg",MP4:"audio/mp4",OGG:"audio/ogg",WAV:"audio/x-wav",audioType:function(a){var c=OjUrl.url(a).path.split("."),b=c.pop();if(!b){return null}b=b.toLowerCase();if(b=="mp3"||b=="mpeg"||b=="mpeg1"||b=="mpeg2"||b=="mpeg3"){return this.MP3}if(b=="mp4"||b=="m4a"||b=="m4p"||b=="m4b"||b=="m4r"||b=="m4v"){return this.MP4}if(b=="ogg"){return this.OGG}if(b=="wav"){return this.WAV}return null},_TAGS:["audio"]});OJ.extendComponent("OjVideo",[OjMedia],{_tag:"<video></video>"},{supportedVideo:function(){return["video"]}});OJ.extendClass("OjMenu",[OjComponent],{_p_:{content:null,horzOffset:null,positioning:null,parentMenu:null,vertOffset:0},_c:function(){this._s(OjComponent,"_c",[]);this._processArguments(arguments,{content:null,positioning:[OjMenu.RIGHT_MIDDLE,OjMenu.RIGHT_TOP,OjMenu.RIGHT_BOTTOM,OjMenu.LEFT_MIDDLE,OjMenu.LEFT_TOP,OjMenu.LEFT_BOTTOM,OjMenu.BOTTOM_LEFT,OjMenu.BOTTOM_CENTER,OjMenu.BOTTOM_RIGHT,OjMenu.TOP_LEFT,OjMenu.TOP_CENTER,OjMenu.TOP_RIGHT],parentMenu:null})},_d:function(){this._content=null;return this._s(OjComponent,"_d",arguments)},hasSubMenu:function(a){while(a){if((a=a.parentMenu)==this){return true}}return false},"=content":function(a){if(this._content==a){return}if(this._content){this.replaceChild(this._content,this._content=a)}else{this.appendChild(this._content=a)}}},{TOP_LEFT:"positionTopLeft",TOP_CENTER:"positionTopCenter",TOP_RIGHT:"positionTopRight",BOTTOM_LEFT:"positionBottomLeft",BOTTOM_CENTER:"positionBottomCenter",BOTTOM_RIGHT:"positionBottomRight",LEFT_TOP:"positionLeftTop",LEFT_MIDDLE:"positionLeftMiddle",LEFT_BOTTOM:"positionLeftBottom",RIGHT_TOP:"positionRightTop",RIGHT_MIDDLE:"positionRightMiddle",RIGHT_BOTTOM:"positionRightBottom"});OJ.extendManager("MenuManager","OjMenuManager",[OjActionable],{_p_:{menuClass:OjMenu},_c:function(){this._s(OjActionable,"_c",arguments);this._menus={};this._active={};this._tweens={}},_percentRectVisible:function(c){var b=OJ.viewport;var a={top:c.top>0&&c.top>=b.top?c.top:b.top,left:c.left>0&&c.left>=b.left?c.left:b.left,bottom:b.bottom>=c.bottom?c.bottom:b.bottom,right:b.right>=c.right?c.right:b.right};return((c.bottom-c.top)*(c.right-c.left))/((a.bottom-a.top)*(a.right-a.left))},_positionMenu:function(b,e){var g=b.positioning;var h,j;var d,a=0;var c,f=g.length;for(c=0;c<f;c++){h=this[g[c]](e,b);j=this._percentRectVisible(h);if(j==1){break}else{if(j>a){a=j;d=h}}if(d){h=null}}if(!h){h=d}b.x=h.left;b.y=h.top},_removeMenus:function(b){var a,c=new OjTweenSet();for(a in b){OJ.destroy(this._tweens[a]);OjElement.byId(a).removeEventListener(OjTransformEvent.MOVE,this,"_onTargetMove");c.addTween(new OjFade(b[a],OjFade.OUT));delete this._active[a];delete this._tweens[a]}if(c.numTweens()){c.addEventListener(OjTweenEvent.COMPLETE,this,"_onTransOut");c.start()}},_onPageClick:function(a){var d,f,e,c,b;for(d in this._active){f=this._active[d];c=a.pageX;b=a.pageY;if(f&&f.hitTestPoint(c,b)){return}e=OjElement.byId(d);if(e&&e.hitTestPoint(c,b)){return}}this._removeMenus(this._active);OJ.removeEventListener(OjUiEvent.PRESS,this,"_onPageClick")},_onTargetClick:function(a){var b=a.currentTarget;var c=this._menus[b.id];if(c&&!this._active[b.id]){this.show(c,b)}},_onTargetMove:function(a){var b=a.currentTarget;var c=this._menus[b.id];if(c){this._positionMenu(c,b)}},_onTransOut:function(a){OJ.destroy(a.currentTarget)},hide:function(d){var b,e,c=0;for(b in this._active){c++;if(this._active[b]==d){e=b}}if(e){var a={};a[e]=d;delete this._active[e];this._removeMenus(a);if(c==1){OJ.removeEventListener(OjUiEvent.PRESS,this,"_onPageClick")}}},makeMenu:function(){return this._menuClass.makeNew(arguments)},menu:function(b,a){var c=this.makeMenu.apply(this,Array.slice(arguments,1));this.register(b,c);this.show(c,b);return c},register:function(a,b){a.addEventListener(OjUiEvent.PRESS,this,"_onTargetClick");this._menus[a.id]=b},show:function(e){var d=arguments.length>1?arguments[1]:null;var b,c={};if(!d){for(b in this._menus){if(this._menus[b]==e){d=OjElement.byId(b);break}}}for(b in this._active){if(this._active[b]!=e&&!this._active[b].hasSubMenu(e)){c[b]=this._active[b]}}this._removeMenus(c);e.alpha=0;OJ.appendChild(e);if(e){this._positionMenu(e,d);var a=new OjFade(e);a.start();this._active[d.id]=e;this._tweens[d.id]=a;OJ.addEventListener(OjUiEvent.PRESS,this,"_onPageClick")}d.addEventListener(OjTransformEvent.MOVE,this,"_onTargetMove")},unregister:function(b){if(b.is("OjMenu")){var a;for(a in this._menus){if(this._menus[a]==b){b=OjElement.byId(a);break}}}if(b){b.removeEventListener(OjUiEvent.PRESS,this,"_onTargetClick");delete this._menus[b.id]}},positionTopLeft:function(a,b){return new OjRect(a.pageX-b.horzOffset,a.pageY-b.height-b.vertOffset,b.width,b.height)},positionTopCenter:function(a,b){return new OjRect(a.pageX+((a.width-b.width)/2),a.pageY-b.height,b.width,b.height)},positionTopRight:function(a,b){return new OjRect(a.pageX+a.width-b.width,a.pageY-b.height,b.width,b.height)},positionBottomLeft:function(a,b){return new OjRect(a.pageX,a.pageY+a.height,b.width,b.height)},positionBottomCenter:function(a,b){return new OjRect(a.pageX+((a.width-b.width)/2),a.pageY+a.height,b.width,b.height)},positionBottomRight:function(a,b){return new OjRect(a.pageX+a.width-b.width,a.pageY+a.height,b.width,b.height)},positionLeftTop:function(a,b){return new OjRect(a.pageX-b.width,a.pageY,b.width,b.height)},positionLeftMiddle:function(a,b){return new OjRect(a.pageX-b.width,a.pageY+((a.height-b.height)/2),b.width,b.height)},positionLeftBottom:function(a,b){return new OjRect(a.pageX-b.width,a.pageY+a.height-b.height,b.width,b.height)},positionRightTop:function(a,b){return new OjRect(a.getPageX()+a.getWidth(),a.getPageY(),b.getWidth(),b.getHeight())},positionRightMiddle:function(a,b){return new OjRect(a.pageX+a.width,a.pageY+((a.height-b.height)/2),b.width,b.height)},positionRightBottom:function(a,b){return new OjRect(a.pageX+a.width,a.pageY+a.height-b.height,b.width,b.height)}});OJ.extendComponent("OjTabNavController",[OjNavController],{_prev_active:null,_addViewButton:function(a,b){var c=new OjButton(a.shortTitle,a.icon);c.vAlign=OjStyleElement.TOP;c.addEventListener(OjUiEvent.PRESS,this,"_onTabClick");a.addEventListener(OjView.ICON_CHANGE,this,"_onViewIconChange");a.addEventListener(OjView.TITLE_CHANGE,this,"_onViewTitleChange");this.insertChildAt(c,b)},_processDomSourceChildren:function(b,a){return},_removeViewButton:function(a,b){OJ.destroy(this.removeElmAt(b));a.removeEventListener(OjView.ICON_CHANGE,this,"_onViewIconChange");a.removeEventListener(OjView.TITLE_CHANGE,this,"_onViewTitleChange")},_updateActiveBtn:function(){if(this._prev_active){this._prev_active.isActive=false}if(this._prev_active=this.getChildAt(this._stack.activeIndex)){this._prev_active.isActive=true}},_onStackChange:function(a){this._updateActiveBtn()},_onStackViewAdd:function(a){this._addViewButton(a.view,a.index)},_onStackViewMove:function(a){},_onStackViewRemove:function(a){this._removeViewButton(a.view,a.index)},_onStackViewReplace:function(a){},_onTabClick:function(a){this._stack.activeIndex=this.indexOfChild(a.currentTarget);this._updateActiveBtn()},_onViewIconChange:function(b){var a=b.currentTarget;this.getChildAt(this._stack.indexOfElm(a)).icon=a.icon},_onViewTitleChange:function(b){var a=b.currentTarget;this.getChildAt(this._stack.indexOfElm(a)).label=a.shortTitle},"=stack":function(a){if(this._stack==a){return}var b;if(this._stack){this._stack.removeEventListener(OjStackEvent.ADD,this,"_onStackViewAdd");this._stack.removeEventListener(OjStackEvent.MOVE,this,"_onStackViewMove");this._stack.removeEventListener(OjStackEvent.REMOVE,this,"_onStackViewRemove");this._stack.removeEventListener(OjStackEvent.REPLACE,this,"_onStackViewReplace");b=this.numElms;for(;b--;){this._removeViewButton(this._stack.getElmAt(b),b)}}this._s(OjNavController,"=stack",arguments);if(a){a.addEventListener(OjStackEvent.ADD,this,"_onStackViewAdd");a.addEventListener(OjStackEvent.MOVE,this,"_onStackViewMove");a.addEventListener(OjStackEvent.REMOVE,this,"_onStackViewRemove");a.addEventListener(OjStackEvent.REPLACE,this,"_onStackViewReplace");b=a.numElms;for(;b--;){this._addViewButton(a.getElmAt(b),0)}this._updateActiveBtn()}}},{_TAGS:["tabnav"]});OJ.extendClass("OjRpc",[OjUrlLoader],{_p_:{method:null,params:null},_g_p_:{id:null},_c:function(b,e,d){this._s(OjUrlLoader,"_c",[]);var a=arguments,c=a.length;this.contentType=c>3?a[3]:OjUrlRequest.JSON;this.request=new OjUrlRequest(b,{id:this._id=OjRpc.guid(),method:e,params:Array.array(d)},this._contentType,OjUrlRequest.POST);if(c>4){this.async=a[4]}},load:function(){return this._s(OjUrlLoader,"load",[])},".request":function(){return this._request},"=method":function(a){if(this._method==a){return}this._request.data.method=(this._method=a)},"=params":function(a){if(this._params==a){return}this._request.data.params=(this._params=a)}},{guid:function(){return OJ._guid++}});OJ.extendComponent("OjListItem",[OjItemRenderer],{_p_:{showAccessory:false,showIcon:false},_t:"<div valign=m><div var=accessory></div><img var=icon /><span var=content></span></div>",_d:function(){var a=this._data;if(isObjective(a,OjActionable)){a.removeEventListener(OjEvent.CHANGE,this,"_onDataChange")}this._list=this._data=null;return this._s(OjItemRenderer,"_d",arguments)},_redrawAccessory:function(){if(this.showAccessory){this.removeCss("no-accessory")}else{this.addCss("no-accessory")}},_redrawData:function(){if(this._s(OjItemRenderer,"_redrawData",arguments)){this.content.text=this.data;return true}return false},_redrawIcon:function(){if(this.showIcon){this.removeCss("no-icon")}else{this.addCss("no-icon")}},redraw:function(){if(this._s(OjItemRenderer,"redraw",arguments)){this._redrawAccessory();this._redrawIcon();return true}return false},_onDataChange:function(a){this._redrawData()},"=data":function(b){var a=this._data;if(isObjective(a,OjActionable)){a.removeEventListener(OjEvent.CHANGE,this,"_onDataChange")}this._data=b;if(isObjective(b,OjActionable)){b.addEventListener(OjEvent.CHANGE,this,"_onDataChange")}this.redraw()},"=showAccessory":function(a){if(this._showAccessory==a){return}this._showAccessory=a;this.redraw()},"=showIcon":function(a){if(this._showIcon==a){return}this._showIcon=a;this.redraw()}},{_TAGS:["listitem"]});OJ.extendComponent("OjListViewItemRenderer",[OjItemRenderer],{});OJ.extendManager("TimerManager","OjTimerManager",[OjActionable],{_callback:null,_timers:{},_timer_count:0,_min_interval:999999,_interval:null,_c:function(){this._s(OjActionable,"_c",[]);this._callback=this._tick.bind(this)},_d:function(){this._callback=null;return this._s(OjActionable,"_d",arguments)},_updateInterval:function(){if(this._timer_count){var a,b=this._min_interval;for(a in this._timers){b=Math.min(b,this._timers[a].duration)}if(this._min_interval!=b){this._min_interval=b;clearInterval(this._interval);this._interval=setInterval(this._callback,Math.max(this._min_interval/3,10));this._tick()}}else{clearInterval(this._interval);this._min_interval=999999}},_tick:function(){var b,a=Date.time(),c;for(b in this._timers){c=this._timers[b];if(c._duration<a-c._last_tick){c._last_tick=a;setTimeout('TimerManager._timerTick("'+b+'")',0)}}},_timerTick:function(a){if(TimerManager._timers[a]){TimerManager._timers[a]._tick()}},timer:function(){var a=arguments.length;if(!a){return new OjTimer()}if(a==1){return new OjTimer(arguments[0])}return new OjTimer(arguments[0],arguments[1])},registerTimer:function(b){var a=b.id;if(this._timers[a]!=b){this._timers[a]=b;b._last_tick=Date.time();this._timer_count++;this._updateInterval()}},updateTimer:function(a){if(this._timers[a.id]){this._updateInterval()}},unregisterTimer:function(b){var a=b.id;if(this._timers[a]){delete this._timers[a];this._timer_count--;this._updateInterval()}}});OJ.extendComponent("OjListView",[OjView,OjList],{_itemRenderer:OjListViewItemRenderer,_c:function(){this._s(OjView,"_c",arguments)}},{_TAGS:["listview"]});